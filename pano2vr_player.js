//////////////////////////////////////////////////////////////////////
// Pano2VR 7.0 beta 3a/19375 HTML5/CSS3 & WebGL Panorama Player     //
// License: Lantyx Tecnologia Eireli                                //
// (c) 2022, Garden Gnome Software, https://ggnome.com              //
//////////////////////////////////////////////////////////////////////

var p="function"==typeof Object.defineProperties?Object.defineProperty:function(y,w,r){if(y==Array.prototype||y==Object.prototype)return y;y[w]=r.value;return y};function aa(y){y=["object"==typeof globalThis&&globalThis,y,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var w=0;w<y.length;++w){var r=y[w];if(r&&r.Math==Math)return r}throw Error("Cannot find global object");}var ba=aa(this);
function L(y,w){if(w)a:{var r=ba;y=y.split(".");for(var f=0;f<y.length-1;f++){var c=y[f];if(!(c in r))break a;r=r[c]}y=y[y.length-1];f=r[y];w=w(f);w!=f&&null!=w&&p(r,y,{configurable:!0,writable:!0,value:w})}}var ca;if("function"==typeof Object.setPrototypeOf)ca=Object.setPrototypeOf;else{var da;a:{var ea={a:!0},fa={};try{fa.__proto__=ea;da=fa.a;break a}catch(y){}da=!1}ca=da?function(y,w){y.__proto__=w;if(y.__proto__!==w)throw new TypeError(y+" is not extensible");return y}:null}var ha=ca;
L("Object.setPrototypeOf",function(y){return y||ha});L("Array.prototype.fill",function(y){return y?y:function(w,r,f){var c=this.length||0;0>r&&(r=Math.max(0,c+r));if(null==f||f>c)f=c;f=Number(f);0>f&&(f=Math.max(0,c+f));for(r=Number(r||0);r<f;r++)this[r]=w;return this}});function Q(y){return y?y:Array.prototype.fill}L("Int8Array.prototype.fill",Q);L("Uint8Array.prototype.fill",Q);L("Uint8ClampedArray.prototype.fill",Q);L("Int16Array.prototype.fill",Q);L("Uint16Array.prototype.fill",Q);
L("Int32Array.prototype.fill",Q);L("Uint32Array.prototype.fill",Q);L("Float32Array.prototype.fill",Q);L("Float64Array.prototype.fill",Q);function ia(y,w,r){if(null==y)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(w instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return y+""}
L("String.prototype.startsWith",function(y){return y?y:function(w,r){var f=ia(this,w,"startsWith");w+="";var c=f.length,a=w.length;r=Math.max(0,Math.min(r|0,f.length));for(var b=0;b<a&&r<c;)if(f[r++]!=w[b++])return!1;return b>=a}});function ja(y){var w=0;return function(){return w<y.length?{done:!1,value:y[w++]}:{done:!0}}}
L("Symbol",function(y){function w(a){if(this instanceof w)throw new TypeError("Symbol is not a constructor");return new r(f+(a||"")+"_"+c++,a)}function r(a,b){this.kq=a;p(this,"description",{configurable:!0,writable:!0,value:b})}if(y)return y;r.prototype.toString=function(){return this.kq};var f="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",c=0;return w});
L("Symbol.iterator",function(y){if(y)return y;y=Symbol("Symbol.iterator");for(var w="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<w.length;r++){var f=ba[w[r]];"function"===typeof f&&"function"!=typeof f.prototype[y]&&p(f.prototype,y,{configurable:!0,writable:!0,value:function(){return ka(ja(this))}})}return y});function ka(y){y={next:y};y[Symbol.iterator]=function(){return this};return y}
function la(y,w){y instanceof String&&(y+="");var r=0,f=!1,c={next:function(){if(!f&&r<y.length){var a=r++;return{value:w(a,y[a]),done:!1}}f=!0;return{done:!0,value:void 0}}};c[Symbol.iterator]=function(){return c};return c}L("Array.prototype.keys",function(y){return y?y:function(){return la(this,function(w){return w})}});L("Object.is",function(y){return y?y:function(w,r){return w===r?0!==w||1/w===1/r:w!==w&&r!==r}});
L("Array.prototype.includes",function(y){return y?y:function(w,r){var f=this;f instanceof String&&(f=String(f));var c=f.length;r=r||0;for(0>r&&(r=Math.max(r+c,0));r<c;r++){var a=f[r];if(a===w||Object.is(a,w))return!0}return!1}});L("String.prototype.includes",function(y){return y?y:function(w,r){return-1!==ia(this,w,"includes").indexOf(w,r||0)}});
var __extends=this&&this.__extends||function(){function y(w,r){y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(f[a]=c[a])};return y(w,r)}return function(w,r){function f(){this.constructor=w}if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");y(w,r);w.prototype=null===r?Object.create(r):(f.prototype=r.prototype,new f)}}();
function ma(){var y="perspective",w=["Webkit","Moz","O","ms","Ms"],r;for(r=0;r<w.length;r++)"undefined"!==typeof document.documentElement.style[w[r]+"Perspective"]&&(y=w[r]+"Perspective");"undefined"!==typeof document.documentElement.style[y]?"webkitPerspective"in document.documentElement.style?(y=document.createElement("style"),w=document.createElement("div"),r=document.head||document.getElementsByTagName("head")[0],y.textContent="@media (-webkit-transform-3d) {#ggswhtml5{height:5px}}",r.appendChild(y),
w.id="ggswhtml5",document.documentElement.appendChild(w),r=5===w.offsetHeight,y.parentNode.removeChild(y),w.parentNode.removeChild(w)):r=!0:r=!1;return r}function na(){var y;if(y=!!window.WebGLRenderingContext)try{var w=document.createElement("canvas");w.width=100;w.height=100;var r=w.getContext("webgl");r||(r=w.getContext("experimental-webgl"));y=!!r}catch(f){y=!1}return y}var ggP2VR;
(function(y){var w=function(){function f(c){this.o=null;this.ke=this.ko=this.La=!1;this.Fc=!0;this.kd=!1;this.tb=this.Ma=this.Ia=0;this.fov=70;this.Bj=this.Ca=0;this.autoplay=this.bg=this.df=!1;this.id="";this.u=this.pan=0;this.o=c;this.Nc=this.lc=100;this.Ec=1}f.prototype.rb=function(c){var a;if(a=c.getAttributeNode("id"))this.id=a.nodeValue.toString();if(a=c.getAttributeNode("pan"))this.pan=Number(a.nodeValue);if(a=c.getAttributeNode("tilt"))this.u=Number(a.nodeValue)};f.prototype.zm=function(c){var a=
"",b=this.o,e=!0;if(b.jj){var h=new y.Ra(0,0,-100);h.Ia(-this.u*Math.PI/180);h.Ma(this.pan*Math.PI/180);h.Ma(-b.pan.m*Math.PI/180);h.Ia(b.u.m*Math.PI/180);h.tb(b.X.m*Math.PI/180);.01<=h.z&&(e=!1)}b.ze&&(a+="perspective("+c+"px) ");a=a+("translate3d(0px,0px,"+c+"px) rotateZ(")+(b.X.m.toFixed(10)+"deg) ");a+="rotateX("+b.u.m.toFixed(10)+"deg) ";a+="rotateY("+(-b.pan.m).toFixed(10)+"deg) ";a+="rotateY("+this.pan.toFixed(10)+"deg) ";a+="rotateX("+(-this.u).toFixed(10)+"deg) ";c=1E4;h=this.j.videoWidth;
var m=this.j.videoHeight;if(0==h||0==m)h=640,m=480;0<this.lc&&(h=this.lc);0<this.Nc&&(m=this.Nc);0<h&&0<m&&(this.j.width=h,this.j.height=m,this.j.style.width=h+"px",this.j.style.height=m+"px");0<this.fov&&(c=h/(2*Math.tan(this.fov/2*Math.PI/180)));a+="translate3d(0px,0px,"+(-c).toFixed(10)+"px) ";a+="rotateZ("+this.tb.toFixed(10)+"deg) ";a+="rotateY("+(-this.Ma).toFixed(10)+"deg) ";a+="rotateX("+this.Ia.toFixed(10)+"deg) ";this.Ec&&1!=this.Ec&&(a+="scaleY("+this.Ec+") ");a+="translate3d("+-h/2+"px,"+
-m/2+"px,0px) ";this.j.style[b.wd+"Origin"]="0% 0%";this.La&&(a="",1==this.Ca&&(a+="scale("+Math.min(b.C.width/h,b.C.height/m)+") "),a+="translate3d("+-h/2+"px,"+-m/2+"px,0px) ");this.qs!=a&&(this.qs=a,this.j.style[b.wd]=a,this.j.style.visibility=e&&this.Fc&&(!this.df||this.ke||this.La)?"visible":"hidden",this.ke&&this.ko==this.La&&(this.j.style[b.Tb]="all 0s linear 0s"),this.ko=this.La)};f.prototype.wf=function(c){this.j&&(this.j.style.visibility=c?"visible":"hidden")};f.prototype.Zd=function(){var c=
this.o;c.pa?(this.j.style.left=c.C.width/2+"px",this.j.style.top=c.C.height/2+"px"):(this.j.style.left=c.margin.left+c.C.width/2+"px",this.j.style.top=c.margin.top+c.C.height/2+"px")};f.prototype.ye=function(){this.j.parentNode&&this.j.parentNode.removeChild(this.j);this.j=null};f.prototype.yk=function(){};return f}();y.Zu=w;var r=function(f){function c(a){a=f.call(this,a)||this;a.va=!1;a.Kp=!1;a.Po=!1;a.Cg=!1;a.Tk=!1;a.Jl=!1;a.Hd=!1;a.ec=null;a.Ci=null;a.ji=0;a.pf=0;a.ng=!1;a.wt=!1;a.stopped=!1;
a.url=[];a.loop=0;a.level=1;a.yc=0;a.mode=1;a.Ri=10;a.zb=0;a.Bg=0;a.ua=1;a.Yc=0;a.Zc=0;a.$c=0;a.ad=0;a.xj=-1;return a}__extends(c,f);c.prototype.wm=function(){var a=this,b=a.j.play();if(void 0!==b)b.then(function(){a.Ef()})["catch"](function(){a.j.pause();a.Kp&&(a.j.muted=!0,a.j.play())})};c.prototype.Hp=function(){this.va&&this.stopped?this.stopped=!1:0==this.loop?this.va?(this.ec=null,this.de()):this.j.play():0<this.nb?(this.nb--,this.va||(this.j.currentTime=0),this.Tk&&(this.kc&&0==this.kc.gain.value||
0==this.Fb.gain.value&&0==this.Xb.gain.value&&0==this.Vb.gain.value&&0==this.Wb.gain.value)||(this.va?(this.ec=null,this.de()):this.j.play())):this.va&&(this.ec=null,this.ng=!1)};c.prototype.Ef=function(){this.Hd=!1;var a=this.o.xa;a&&(this.va||(this.source=a.createMediaElementSource(this.j)),2==this.mode||3==this.mode||5==this.mode?(this.Kd=a.createChannelSplitter(2),this.Fb=a.createGain(),this.Vb=a.createGain(),this.Wb=a.createGain(),this.Xb=a.createGain(),this.Ug=a.createChannelMerger(2),this.va||
this.source.connect(this.Kd),this.Kd.connect(this.Fb,0),this.Kd.connect(this.Vb,0),this.Kd.connect(this.Wb,1),this.Kd.connect(this.Xb,1),this.Fb.connect(this.Ug,0,0),this.Vb.connect(this.Ug,0,1),this.Wb.connect(this.Ug,0,0),this.Xb.connect(this.Ug,0,1),this.Ug.connect(a.destination),1==this.xj&&this.Pp()):(this.kc=a.createGain(),this.va||this.source.connect(this.kc),this.kc.connect(a.destination)))};c.prototype.Pp=function(){1!=this.xj||this.Hd||!this.Kd||2!=this.mode&&3!=this.mode&&5!=this.mode||
(this.Kd.connect(this.Wb,0),this.Kd.connect(this.Xb,0))};c.prototype.di=function(){var a=this.o.xa;this.La||this.Jl||(this.Fb?(this.Fb.gain.setValueAtTime(this.Yc,a.currentTime),this.Xb.gain.setValueAtTime(this.ad,a.currentTime),this.Vb.gain.setValueAtTime(this.Zc,a.currentTime),this.Wb.gain.setValueAtTime(this.$c,a.currentTime)):this.kc&&this.kc.gain.setValueAtTime((this.Yc+this.ad)/2,a.currentTime+1))};c.prototype.ck=function(){if(!this.Hd||4==this.mode||6==this.mode){var a=this.o,b=this.o.xa;if(this.j||
this.va){var e,h=this.pan-a.pan.m;for(e=this.u-a.u.m;-180>h;)h+=360;for(;180<h;)h-=360;var m=this.yc,n=this.Ri;0==n&&(n=.01);0>n&&(n=a.fov.m);this.dc||(this.dc=new y.Ra,this.dc.Dn(this.pan,this.u));0!=this.mode&&1!=this.mode||!b||this.kc&&this.kc.gain.setValueAtTime(this.level*a.ba*this.ua,b.currentTime);if(2==this.mode&&b){var q=.5*Math.cos(h*Math.PI/180)+.5;this.Yc=Math.sqrt(q)*this.ua*this.level*a.ba;this.ad=Math.sqrt(q)*this.ua*this.level*a.ba;this.Zc=Math.sqrt(1-q)*this.ua*this.level*a.ba;this.$c=
Math.sqrt(1-q)*this.ua*this.level*a.ba;this.di()}if(3==this.mode){h=0>h?h<-this.zb?h+this.zb:0:h>this.zb?h-this.zb:0;var v=this.level;e=Math.abs(e);e=e<this.Bg?0:e-this.Bg;var t=1-e/n;if(Math.abs(h)>n||0>t)q=v*m*a.ba,b?(this.Yc=q*this.ua,this.ad=q*this.ua,this.$c=this.Zc=0,this.di()):this.j.volume=v*m*a.ba;else if(q=1-Math.abs(h/n),b){var x=v*(m+(1-m)*t*q)*a.ba;q=v*m*a.ba;0<=h?(this.Yc=x*this.ua,this.ad=q*this.ua):(this.Yc=q*this.ua,this.ad=x*this.ua);2*Math.abs(h)<n?(q=1-Math.abs(2*h)/n,x=v*(m+(1-
m)*t*q)*a.ba,q=.5*v*(1-m)*t*(1-q)*a.ba,0<=h?(this.ad=x*this.ua,this.$c=q*this.ua,this.Zc=0):(this.Yc=x*this.ua,this.Zc=q*this.ua,this.$c=0)):(q=1-(Math.abs(2*h)-n)/n,x=.5*v*(1-m)*t*q*a.ba,0<=h?(this.$c=x*this.ua,this.Zc=0):(this.Zc=x*this.ua,this.$c=0));this.di()}else this.j.volume=v*(m+(1-m)*t*q)*a.ba}4==this.mode&&(Math.abs(h)<this.zb&&Math.abs(e)<this.Bg?this.Cg||(this.Cg=!0,this.nb=this.loop-1,a.Wf||(this.j.play(),this.Hd&&this.Ef())):this.Cg=!1);5==this.mode&&(e=180*Math.acos(a.Kk.Ej(this.dc))/
Math.PI,e<this.zb?b?(this.Yc=this.level*a.ba*this.ua,this.ad=this.level*a.ba*this.ua,this.$c=this.Zc=0,this.di()):this.j.volume=this.level*a.ba:b?(e<this.zb+n?(h=0>h?h>-this.zb?0:h+this.zb:h<this.zb?0:h-this.zb,x=1-Math.max(e-this.zb,0)/n,q=Math.max(1-Math.abs(h)*Math.cos(this.u*Math.PI/180)/n,0),0<h?(this.Yc=this.level*(x*(1-this.yc)+this.yc)*a.ba*this.ua,this.ad=this.level*(x*q*(1-this.yc)+this.yc)*a.ba*this.ua,this.Zc=0,this.$c=this.level*x*(1-q)*a.ba*this.ua):(this.Yc=this.level*(x*q*(1-this.yc)+
this.yc)*a.ba*this.ua,this.ad=this.level*(x*(1-this.yc)+this.yc)*a.ba*this.ua,this.Zc=this.level*x*(1-q)*a.ba*this.ua,this.$c=0)):(x=this.level*this.yc*a.ba,this.Yc=x*this.ua,this.ad=x*this.ua,this.$c=this.Zc=0),this.di()):(e-=this.zb,e<n&&0<n?(q=1-Math.abs(e/n),this.j.volume=this.level*(m+(1-m)*q)*a.ba):this.j.volume=m*a.ba));6==this.mode&&(e=180*Math.acos(a.Kk.Ej(this.dc))/Math.PI,Math.abs(e)<this.zb?this.Cg||(this.Cg=!0,this.nb=this.loop-1,this.va?this.ng||this.de():this.j.play()):this.Cg=!1)}}};
c.prototype.Xq=function(){var a=this;a.ec=this.o.xa.createBufferSource();a.ec.addEventListener("ended",function(){a.Hp()},!1);2==a.mode||3==a.mode||5==a.mode?a.ec.connect(a.Kd):a.ec.connect(a.kc)};c.prototype.de=function(){var a=this.o.xa,b=this.pf;this.Ci?(null==this.ec&&(this.Xq(),this.ec.buffer=this.Ci),this.ji=a.currentTime-b,this.pf=0,this.ng=!0,this.stopped=!1,this.ec.start(0,b),this.o.N("buffer Source started")):(this.o.N("bufferSoundPlay() -> no audio buffer -> playWhenReady"),this.wt=!0)};
c.prototype.uk=function(){var a=this.o.xa.currentTime-this.ji;this.Kf();this.pf=a};c.prototype.Kf=function(){this.ec&&this.ng&&(this.stopped=!0,this.ec.disconnect(),this.ec.stop(0),this.ec=null);this.ji=this.pf=0;this.ng=!1};c.prototype.Lq=function(){var a=this.o.xa;return this.pf?this.pf:this.ji?a.currentTime-this.ji:0};c.prototype.Mq=function(a){this.Kf();this.pf=a;this.de()};c.prototype.addElement=function(){var a=-1,b=this,e=this.o,h=this.o.xa;try{for(var m=!1,n=0;n<e.S.length;n++)e.S[n].id==
b.id&&(a=n,null==e.S[n].j&&!e.S[n].va||e.S[n].url.join()!=b.url.join()||e.S[n].loop!=b.loop||e.S[n].mode!=b.mode||(m=!0,e.S[n].pan=b.pan,e.S[n].u=b.u,e.S[n].level=b.level,e.S[n].yc=b.yc,e.S[n].Ri=b.Ri,e.S[n].zb=b.zb,e.S[n].Bg=b.Bg));if(m)e.N("Keep playing "+b.id);else{if(0<=a){var q=e.S[a];if(null!=q.j||q.va)if(h&&e.Ta.enabled)e.Ta.ri.push(q),1!=e.D.ca&&2!=e.D.ca&&6!=e.D.ca&&e.Ta.yn(q);else{try{q.va?q.uk():q.j.pause()}catch(t){e.N(t)}try{q.ye()}catch(t){e.N(t)}}}h&&(this.Hd=!0);b.j=document.createElement("audio");
b.j.crossOrigin=e.crossOrigin;b.j.setAttribute("class","ggmedia");e.oe&&b.j.setAttribute("id",e.oe+b.id);for(n=0;n<b.url.length;n++)m=void 0,m=document.createElement("source"),""!=b.url[n]&&"#"!=b.url[n]&&(m.crossOrigin=e.crossOrigin,m.setAttribute("src",e.vb(b.url[n])),b.j.appendChild(m));b.j.volume=b.level*e.ba;if(0<b.j.childNodes.length&&(e.$.appendChild(b.j),b.j.addEventListener("ended",function(){b.Hp()},!1),h)){b.Tk=!1;0==b.loop&&b.source&&b.source.mediaElement&&(b.source.mediaElement.loop=
!0);var v=new XMLHttpRequest;v.open("GET",e.vb(b.url[0]),!0);v.responseType="arraybuffer";v.onload=function(){h.decodeAudioData(v.response,function(t){b.xj=t.numberOfChannels;1==b.xj&&b.Pp()})};v.send()}1<=b.loop&&(b.nb=b.loop-1);0<=a?e.S[a]=b:e.S.push(b);b.ck();this.o.Ed||-1!=this.o.wc.indexOf(b.id)||-1!=this.o.wc.indexOf("_main")&&-1==this.o.Je.indexOf(b.id)||(1!=b.mode&&2!=b.mode&&3!=b.mode&&5!=b.mode||!(0<=b.loop)||h&&e.Ta.enabled||(b.va||(b.j.autoplay=!0,b.wm()),b.autoplay=!0),0==b.mode&&0<=
b.loop&&(b.autoplay=!0,b.wm()))}}catch(t){this.o.N(t)}};c.prototype.ye=function(){try{this.o.N("Remove Snd:"+this.id),this.va||(this.o.$.removeChild(this.j),this.j=null)}catch(a){this.o.N(a)}};c.prototype.rb=function(a){f.prototype.rb.call(this,a);var b;(b=a.getAttributeNode("url"))&&this.url.push(b.nodeValue.toString());if(b=a.getAttributeNode("level"))this.level=Number(b.nodeValue);if(b=a.getAttributeNode("loop"))this.loop=Number(b.nodeValue);if(b=a.getAttributeNode("mode"))this.mode=Number(b.nodeValue);
if(b=a.getAttributeNode("nodechangekeep"))this.Po=1==Number(b.nodeValue);if(b=a.getAttributeNode("field"))this.Ri=Number(b.nodeValue);if(b=a.getAttributeNode("ambientlevel"))this.yc=Number(b.nodeValue);if(b=a.getAttributeNode("pansize"))this.zb=Number(b.nodeValue);if(b=a.getAttributeNode("tiltsize"))this.Bg=Number(b.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(b=a.getAttributeNode("url"))&&this.url.push(b.nodeValue.toString()),a=a.nextSibling};return c}(w);y.uq=r;r=function(f){function c(a){a=
f.call(this,a)||this;a.poster="";a.Ia=0;a.Ma=0;a.tb=0;a.fov=50;a.Ca=0;a.Bj=0;a.df=!1;a.bg=!1;return a}__extends(c,f);c.prototype.me=function(){1!=this.Ca&&4!=this.Ca||this.af(!this.La);2==this.Ca&&this.o.$o(this.id)};c.prototype.af=function(a){var b=this.o,e=b.xa;if(1==this.Ca||4==this.Ca){if(this.La=a)this.j.style.pointerEvents="auto",this.j.style.cursor="pointer",this.j.style.zIndex=(b.Cf+8E4).toString(),this.j.style[this.o.Tb]="all 1s ease 0s",this.j.muted=!1,this.o.isPlaying(this.id)||b.ve(this.id);
else{this.j.style.pointerEvents="none";this.j.style.cursor="default";this.j.style.zIndex=b.Cf.toString();this.j.style[this.o.Tb]="all 1s ease 0s";this.o.isPlaying(this.id)&&(0==this.Bj?b.Uj(this.id):2==this.Bj&&(this.j.muted=!0));this.Jl=!0;var h=this;setTimeout(function(){h.Jl=!1},1E3)}if(e&&(2==this.mode||3==this.mode||5==this.mode)&&(e=e.currentTime,this.Fb&&this.Xb&&this.Vb.gain&&this.Vb&&this.Wb)){var m=this.Fb.gain.value,n=this.Xb.gain.value,q=this.Vb.gain.value,v=this.Wb.gain.value;this.La?
(this.Fb.gain.linearRampToValueAtTime(m,e),this.Fb.gain.linearRampToValueAtTime(this.level*b.ba,e+1),this.Xb.gain.linearRampToValueAtTime(n,e),this.Xb.gain.linearRampToValueAtTime(this.level*b.ba,e+1),this.Vb.gain.linearRampToValueAtTime(q,e),this.Vb.gain.linearRampToValueAtTime(0,e+1),this.Wb.gain.linearRampToValueAtTime(v,e),this.Wb.gain.linearRampToValueAtTime(0,e+1)):(this.Fb.gain.linearRampToValueAtTime(m,e),this.Fb.gain.linearRampToValueAtTime(this.Yc,e+1),this.Xb.gain.linearRampToValueAtTime(n,
e),this.Xb.gain.linearRampToValueAtTime(this.ad,e+1),this.Vb.gain.linearRampToValueAtTime(q,e),this.Vb.gain.linearRampToValueAtTime(this.Zc,e+1),this.Wb.gain.linearRampToValueAtTime(v,e),this.Wb.gain.linearRampToValueAtTime(this.$c,e+1))}this.ke=!0;this.o.$p()}2==this.Ca&&(a?this.o.ve(this.id):this.o.Aj(this.id))};c.prototype.ne=function(){this.ke=!1;this.j.style[this.o.Tb]="none"};c.prototype.Qu=function(){0==this.loop?this.j.play():0<this.nb?(this.nb--,this.j.currentTime=0,this.j.play()):this.isRunning=
!1};c.prototype.rb=function(a){f.prototype.rb.call(this,a);var b;if(b=a.getAttributeNode("poster"))this.poster=String(b.nodeValue);if(b=a.getAttributeNode("maskimage"))this.jd=String(b.nodeValue);if(b=a.getAttributeNode("rotx"))this.Ia=Number(b.nodeValue);if(b=a.getAttributeNode("roty"))this.Ma=Number(b.nodeValue);if(b=a.getAttributeNode("rotz"))this.tb=Number(b.nodeValue);if(b=a.getAttributeNode("fov"))this.fov=Number(b.nodeValue);if(b=a.getAttributeNode("width"))this.lc=Number(b.nodeValue);if(b=
a.getAttributeNode("height"))this.Nc=Number(b.nodeValue);this.Ec=(b=a.getAttributeNode("stretch"))?Number(b.nodeValue):1;if(b=a.getAttributeNode("clickmode"))this.Ca=Number(b.nodeValue);if(b=a.getAttributeNode("popbackmode"))this.Bj=Number(b.nodeValue);if(b=a.getAttributeNode("handcursor"))this.bg=1==Number(b.nodeValue);if(b=a.getAttributeNode("startmutedmobile"))this.Kp=1==Number(b.nodeValue)};c.prototype.addElement=function(){var a=this,b=this.o,e=this.o.xa;try{a.j=document.createElement("video");
a.j.setAttribute("class","ggmedia");a.j.crossOrigin=b.crossOrigin;a.j.hidden=!0;a.j.addEventListener("click",function(n){n.stopPropagation()});b.oe&&a.j.setAttribute("id",b.oe+a.id);if(b.ui)a.j.setAttribute("playsinline","playsinline"),a.j.setAttribute("style","display: none; max-width:none;");else if(a.j.setAttribute("style","max-width:none;pointer-events:none;"),a.j.setAttribute("playsinline","playsinline"),1==a.Ca||4==a.Ca)a.j.addEventListener(b.Jm(),function(){a.ne()},!1),a.j.addEventListener("transitionend",
function(){a.ne()},!1);var h=void 0;for(h=0;h<a.url.length;h++){var m=void 0;m=document.createElement("source");m.crossOrigin=b.crossOrigin;m.setAttribute("src",b.vb(a.url[h]));a.j.appendChild(m)}""!=a.poster&&(a.j.poster=b.vb(a.poster),0>a.loop&&(a.j.preload="none"));a.jd&&""!=a.jd&&(a.j.style.jd="url('"+b.vb(a.jd)+"')",a.j.style.webkitMaskImage="url('"+b.vb(a.jd)+"')",a.j.style.maskSize="100% 100%",a.j.style.webkitMaskSize="100% 100%");a.j.volume=a.level*b.ba;1<=a.loop&&(a.nb=a.loop-1);e&&(this.Hd=
!0);(1==a.mode||2==a.mode||3==a.mode||5==a.mode)&&0<=a.loop&&(a.j.autoplay=!0,a.isRunning=!0,a.autoplay=!0,this.o.Ed&&(a.j.muted=!0),a.wm());b.V.push(this);b.ui?b.$.appendChild(a.j):(a.j.style.position="absolute",a.lc&&(a.j.width=a.lc),a.Nc&&(a.j.height=a.Nc),b.da.appendChild(a.j));a.j.addEventListener("ended",function(){a.Qu()},!1)}catch(n){b.N(n)}};c.prototype.registerElement=function(a,b){this.kd=!0;this.j=b;this.id=a;this.level=1;this.o.V.push(this)};c.prototype.ye=function(){var a=this.o;a.ui&&
(a.R.deleteTexture(this.texture),this.texture=0);this.j.parentNode&&this.j.parentNode.removeChild(this.j);this.j=null};return c}(r);y.Qm=r;r=function(f){function c(a){a=f.call(this,a)||this;a.url="";a.Ia=0;a.Ma=0;a.tb=0;a.fov=50;a.Ca=0;a.bg=!1;a.lc=100;a.Nc=100;a.Ec=1;return a}__extends(c,f);c.prototype.rb=function(a){f.prototype.rb.call(this,a);var b;if(b=a.getAttributeNode("url"))this.url=b.nodeValue.toString();if(b=a.getAttributeNode("maskimage"))this.jd=String(b.nodeValue);if(b=a.getAttributeNode("rotx"))this.Ia=
Number(b.nodeValue);if(b=a.getAttributeNode("roty"))this.Ma=Number(b.nodeValue);if(b=a.getAttributeNode("rotz"))this.tb=Number(b.nodeValue);if(b=a.getAttributeNode("fov"))this.fov=Number(b.nodeValue);if(b=a.getAttributeNode("width"))this.lc=Number(b.nodeValue);if(b=a.getAttributeNode("height"))this.Nc=Number(b.nodeValue);this.Ec=(b=a.getAttributeNode("stretch"))?Number(b.nodeValue):1;if(b=a.getAttributeNode("clickmode"))this.Ca=Number(b.nodeValue);if(b=a.getAttributeNode("hidepinned"))this.df=1==
Number(b.nodeValue);if(b=a.getAttributeNode("handcursor"))this.bg=1==Number(b.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(b=a.getAttributeNode("url"))&&(this.url=b.nodeValue.toString()),a=a.nextSibling};c.prototype.ne=function(){this.ke=!1;this.j.style[this.o.Tb]="none";this.df&&!this.La&&(this.j.style.visibility="hidden")};c.prototype.me=function(){1!==this.Ca&&4!==this.Ca||this.af(!this.La)};c.prototype.af=function(a){var b=this.o;if(1===this.Ca||4===this.Ca)this.La=a,this.df&&(this.j.style.visibility=
"visible",this.j.style.opacity=this.La?"0.0":"1.0"),this.La?(this.j.style.pointerEvents="auto",this.j.style.cursor="pointer",this.j.style.zIndex=(b.Cf+8E4).toString(),this.j.style[b.Tb]="all 1s ease 0s",this.j.style.opacity="1.0"):(this.j.style.pointerEvents="none",this.j.style.cursor="default",this.j.style.zIndex=b.Cf.toString(),this.j.style[b.Tb]="all 1s ease 0s",this.df&&(this.j.style.opacity="0.0")),this.ke=!0,b.ym()};c.prototype.addElement=function(){var a=this,b=this.o;try{a.j=document.createElement("img");
a.j.setAttribute("style","-webkit-user-drag:none; max-width:none; pointer-events:none;");a.j.setAttribute("class","ggmedia");a.j.hidden=!0;a.j.addEventListener("click",function(e){e.stopPropagation()});b.oe&&a.j.setAttribute("id",b.oe+a.id);a.j.ondragstart=function(){return!1};if(1===a.Ca||4===a.Ca)a.j.addEventListener(b.Jm(),function(){a.ne()},!1),a.j.addEventListener("transitionend",function(){a.ne()},!1);a.j.setAttribute("src",b.vb(a.url));a.lc&&(a.j.width=a.lc);a.Nc&&(a.j.height=a.Nc);b.kb.push(a);
a.j.style.position="absolute";a.jd&&""!=a.jd&&(a.j.style.jd="url('"+b.vb(a.jd)+"')",a.j.style.webkitMaskImage="url('"+b.vb(a.jd)+"')",a.j.style.maskSize="100% 100%",a.j.style.webkitMaskSize="100% 100%");b.da.appendChild(a.j)}catch(e){b.N("Error addimage:"+e)}};return c}(w);y.sq=r;r=function(f){function c(a){a=f.call(this,a)||this;a.code="";return a}__extends(c,f);c.prototype.rb=function(a){f.prototype.rb.call(this,a);var b;if(b=a.getAttributeNode("rotx"))this.Ia=Number(b.nodeValue);if(b=a.getAttributeNode("roty"))this.Ma=
Number(b.nodeValue);if(b=a.getAttributeNode("rotz"))this.tb=Number(b.nodeValue);if(b=a.getAttributeNode("fov"))this.fov=Number(b.nodeValue);if(b=a.getAttributeNode("width"))this.lc=Number(b.nodeValue);if(b=a.getAttributeNode("height"))this.Nc=Number(b.nodeValue);this.Ec=(b=a.getAttributeNode("stretch"))?Number(b.nodeValue):1;if(b=a.getAttributeNode("clickmode"))this.Ca=Number(b.nodeValue);if(b=a.getAttributeNode("handcursor"))this.bg=1==Number(b.nodeValue);if(b=a.getAttributeNode("code"))this.code=
b.nodeValue.toString()};c.prototype.ne=function(){this.ke=!1;this.j.style[this.o.Tb]="none"};c.prototype.me=function(){1!==this.Ca&&4!==this.Ca||this.af(!this.La)};c.prototype.af=function(a){var b=this.o;if(1===this.Ca||4===this.Ca)this.La=a,this.df&&(this.j.style.visibility="visible",this.j.style.opacity=this.La?"0.0":"1.0"),this.La?(this.j.style.cursor="pointer",this.j.style.zIndex=(b.Cf+8E4).toString(),this.j.style[b.Tb]="all 1s ease 0s",this.j.style.opacity="1.0"):(this.j.style.cursor="default",
this.j.style.zIndex=b.Cf.toString(),this.j.style[b.Tb]="all 1s ease 0s"),this.ke=!0,b.ym()};c.prototype.addElement=function(){var a=this,b=this.o;try{a.j=document.createElement("div");this.Xp();a.j.setAttribute("style","max-width:none;");a.j.setAttribute("class","ggmedia");b.oe&&a.j.setAttribute("id",b.oe+a.id);if(1===a.Ca||4===a.Ca)a.j.addEventListener(b.Jm(),function(){a.ne()},!1),a.j.addEventListener("transitionend",function(){a.ne()},!1);b.Mb.push(a);a.j.style.position="absolute";0==a.Ca?b.Ha.insertBefore(a.j,
b.Ha.firstChild):b.da.appendChild(a.j)}catch(e){b.N("Error addwebelement:"+e)}};c.prototype.Xp=function(){var a=this.j.innerHTML,b=this.o.Kc(this.code);b!=a&&(this.j.innerHTML=b)};c.prototype.yk=function(){this.Xp()};return c}(w);y.vq=r;w=function(f){function c(a){a=f.call(this,a)||this;a.$m=50;a.alpha=50;a.type=0;a.color=16777215;return a}__extends(c,f);c.prototype.rb=function(a){f.prototype.rb.call(this,a);var b;if(b=a.getAttributeNode("blinding"))this.$m=Number(b.nodeValue);if(b=a.getAttributeNode("alpha"))this.alpha=
Number(b.nodeValue);if(b=a.getAttributeNode("type"))this.type=Number(b.nodeValue);if(b=a.getAttributeNode("color"))this.color=1*Number(b.nodeValue)};return c}(w);y.tq=w;w=function(){function f(c){this.o=c;this.type="empty";this.im=this.id=this.target=this.description=this.title=this.url="";this.w=100;this.h=20;this.ik=!1;this.j=null;this.Ml=this.Ll=this.Kb=this.$b=this.cb=this.Da=this.distance=this.u=this.pan=0;this.visible=!0;this.Qb=c.J.Qb;this.Ob=c.J.Ob;this.Pb=c.J.Pb;this.Nb=c.J.Nb;this.cg=c.J.cg;
this.dd="";this.ud=this.Ue=0;this.Af=!1;this.Ni=0;this.vertices=[]}f.prototype.Tf=function(){this.id=this.id;this.pan=this.pan;this.tilt=this.u;this.url=this.url;this.target=this.target;this.title=this.title;this.distance=this.distance;this.description=this.description;this.skinid=this.im;this.obj=this.j;this.customimage=this.dd;this.customimagewidth=this.Ue;this.customimageheight=this.ud;this.use3D=this.Af;this.distance3D=this.Ni;this.j&&this.j.__div&&(this.div=this.j.__div)};f.prototype.wu=function(){var c=
this.url;return"{"==c.charAt(0)?c.substr(1,c.length-2):!1};f.prototype.rb=function(c){var a;if(a=c.getAttributeNode("url"))this.url=a.nodeValue.toString();if(a=c.getAttributeNode("target"))this.target=a.nodeValue.toString();if(a=c.getAttributeNode("title"))this.title=a.nodeValue.toString();if(a=c.getAttributeNode("description"))this.description=a.nodeValue.toString();if(a=c.getAttributeNode("id"))this.id=a.nodeValue.toString();if(a=c.getAttributeNode("skinid"))this.im=a.nodeValue.toString();if(a=
c.getAttributeNode("width"))this.w=Number(a.nodeValue);if(a=c.getAttributeNode("height"))this.h=Number(a.nodeValue);if(a=c.getAttributeNode("wordwrap"))this.ik=1==Number(a.nodeValue);a=c.getAttributeNode("pan");this.pan=1*(a?Number(a.nodeValue):0);a=c.getAttributeNode("tilt");this.u=1*(a?Number(a.nodeValue):0);a=c.getAttributeNode("fov");this.fov=1*(a?Number(a.nodeValue):0);a=c.getAttributeNode("distance");this.distance=1*(a?Number(a.nodeValue):0);if(a=c.getAttributeNode("bordercolor"))this.Qb=1*
Number(a.nodeValue);if(a=c.getAttributeNode("backgroundcolor"))this.Ob=1*Number(a.nodeValue);if(a=c.getAttributeNode("borderalpha"))this.Pb=1*Number(a.nodeValue);if(a=c.getAttributeNode("backgroundalpha"))this.Nb=1*Number(a.nodeValue);if(a=c.getAttributeNode("handcursor"))this.cg=1==Number(a.nodeValue);if(a=c.getAttributeNode("customimage"))this.dd=this.o.On()+a.nodeValue;if(a=c.getAttributeNode("customimagewidth"))this.Ue=Number(a.nodeValue);if(a=c.getAttributeNode("customimageheight"))this.ud=Number(a.nodeValue);
if(a=c.getAttributeNode("use3D"))this.Af=1==Number(a.nodeValue);if(a=c.getAttributeNode("distance3D"))this.Ni=Number(a.nodeValue);for(c=c.firstChild;c;){if("polystring"==c.nodeName){a=c.textContent.toString().split("|");for(var b=0;b<a.length;b++){var e=a[b].split("/");if(2==e.length){var h={pan:0,u:0};h.pan=Number(e[0]);h.u=Number(e[1]);this.vertices.push(h)}}}"vertex"==c.nodeName&&(h={pan:0,u:0},a=c.getAttributeNode("pan"),h.pan=1*(a?Number(a.nodeValue):0),a=c.getAttributeNode("tilt"),h.u=1*(a?
Number(a.nodeValue):0),this.vertices.push(h));c=c.nextSibling}this.Tf()};return f}();y.yi=w})(ggP2VR||(ggP2VR={}));
(function(y){var w=function(){function r(f,c){this.x=f;this.y=c}r.prototype.init=function(f,c){this.x=f;this.y=c};r.prototype.Od=function(f,c,a){var b=c.y-f.y;this.x=f.x+(c.x-f.x)*a;this.y=f.y+b*a};r.prototype.Kq=function(f,c,a,b,e){var h=new r;h.Od(f,a,e);f=new r;f.Od(a,b,e);a=new r;a.Od(b,c,e);c=new r;c.Od(h,f,e);h=new r;h.Od(f,a,e);f=new r;f.Od(c,h,e);this.x=f.x;this.y=f.y};r.prototype.sk=function(f,c,a,b,e){var h=new r,m=.5,n=.25;do{h.Kq(f,c,a,b,m);var q=h.x-e;m=0<q?m-n:m+n;n/=2}while(.01<Math.abs(q));
this.x=h.x;this.y=h.y};return r}();y.Jc=w})(ggP2VR||(ggP2VR={}));
(function(y){var w=function(){function r(f,c,a,b,e){this.x=f;this.y=c;this.z=a;this.Gd=b;this.dc=e}r.prototype.init=function(f,c,a,b,e){this.x=f;this.y=c;this.z=a;this.Gd=b;this.dc=e};r.prototype.toString=function(){return"("+this.x+","+this.y+","+this.z+") - ("+this.Gd+","+this.dc+")"};r.prototype.Ia=function(f){var c=Math.sin(f);f=Math.cos(f);var a=this.y,b=this.z;this.y=f*a-c*b;this.z=c*a+f*b};r.prototype.Ft=function(){var f=this.y;this.y=-this.z;this.z=f};r.prototype.Et=function(){var f=this.y;
this.y=this.z;this.z=-f};r.prototype.Ma=function(f){var c=Math.sin(f);f=Math.cos(f);var a=this.x,b=this.z;this.x=f*a+c*b;this.z=-c*a+f*b};r.prototype.Gt=function(){var f=this.x;this.x=-this.z;this.z=f};r.prototype.tb=function(f){var c=Math.sin(f);f=Math.cos(f);var a=this.x,b=this.y;this.x=f*a-c*b;this.y=c*a+f*b};r.prototype.op=function(){var f=this.x;this.x=-this.y;this.y=f};r.prototype.Td=function(f){this.Ia(f*Math.PI/180)};r.prototype.uf=function(f){this.Ma(f*Math.PI/180)};r.prototype.vf=function(f){this.tb(f*
Math.PI/180)};r.prototype.clone=function(){return new r(this.x,this.y,this.z,this.Gd,this.dc)};r.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};r.prototype.normalize=function(){var f=this.length();0<f&&(f=1/f,this.x*=f,this.y*=f,this.z*=f)};r.prototype.Ej=function(f){return this.x*f.x+this.y*f.y+this.z*f.z};r.prototype.Dn=function(f,c){var a=Math.cos(c*Math.PI/180);this.x=a*Math.sin(f*Math.PI/180);this.y=Math.sin(c*Math.PI/180);this.z=a*Math.cos(f*Math.PI/
180)};r.prototype.Gq=function(){return 180*Math.atan2(-this.x,-this.z)/Math.PI};r.prototype.Hq=function(){return 180*Math.asin(this.y/this.length())/Math.PI};r.prototype.Od=function(f,c,a){this.x=f.x*a+c.x*(1-a);this.y=f.y*a+c.y*(1-a);this.z=f.z*a+c.z*(1-a);this.Gd=f.Gd*a+c.Gd*(1-a);this.dc=f.dc*a+c.dc*(1-a)};return r}();y.Ra=w})(ggP2VR||(ggP2VR={}));
(function(y){var w=function(){function r(){this.tp()}r.prototype.tp=function(){this.nc=1;this.Hc=this.oc=this.Ib=0;this.pc=1;this.qc=this.Yb=this.Ic=0;this.Zb=1};r.prototype.clone=function(f){this.nc=f.nc;this.Ib=f.Ib;this.oc=f.oc;this.Hc=f.Hc;this.pc=f.pc;this.Ic=f.Ic;this.Yb=f.Yb;this.qc=f.qc;this.Zb=f.Zb};r.prototype.Wt=function(f){var c=Math.cos(f);f=Math.sin(f);this.nc=1;this.Hc=this.oc=this.Ib=0;this.pc=c;this.Ic=-f;this.Yb=0;this.qc=f;this.Zb=c};r.prototype.Xt=function(f){var c=Math.cos(f);
f=Math.sin(f);this.nc=c;this.Ib=0;this.oc=f;this.Hc=0;this.pc=1;this.Ic=0;this.Yb=-f;this.qc=0;this.Zb=c};r.prototype.Yt=function(f){var c=Math.cos(f);f=Math.sin(f);this.nc=c;this.Ib=-f;this.oc=0;this.Hc=f;this.pc=c;this.qc=this.Yb=this.Ic=0;this.Zb=1};r.prototype.Tt=function(f){this.Wt(f*Math.PI/180)};r.prototype.Ut=function(f){this.Xt(f*Math.PI/180)};r.prototype.Vt=function(f){this.Yt(f*Math.PI/180)};r.prototype.Td=function(f){this.hd||(this.hd=new r,this.se=new r);this.hd.Tt(f);this.se.clone(this);
this.multiply(this.hd,this.se)};r.prototype.uf=function(f){this.hd||(this.hd=new r,this.se=new r);this.hd.Ut(f);this.se.clone(this);this.multiply(this.hd,this.se)};r.prototype.vf=function(f){this.hd||(this.hd=new r,this.se=new r);this.hd.Vt(f);this.se.clone(this);this.multiply(this.hd,this.se)};r.prototype.multiply=function(f,c){this.nc=f.nc*c.nc+f.Ib*c.Hc+f.oc*c.Yb;this.Ib=f.nc*c.Ib+f.Ib*c.pc+f.oc*c.qc;this.oc=f.nc*c.oc+f.Ib*c.Ic+f.oc*c.Zb;this.Hc=f.Hc*c.nc+f.pc*c.Hc+f.Ic*c.Yb;this.pc=f.Hc*c.Ib+
f.pc*c.pc+f.Ic*c.qc;this.Ic=f.Hc*c.oc+f.pc*c.Ic+f.Ic*c.Zb;this.Yb=f.Yb*c.nc+f.qc*c.Hc+f.Zb*c.Yb;this.qc=f.Yb*c.Ib+f.qc*c.pc+f.Zb*c.qc;this.Zb=f.Yb*c.oc+f.qc*c.Ic+f.Zb*c.Zb};r.prototype.Us=function(f){var c=f.x;var a=f.y;var b=f.z;f.x=c*this.nc+a*this.Ib+b*this.oc;f.y=c*this.Hc+a*this.pc+b*this.Ic;f.z=c*this.Yb+a*this.qc+b*this.Zb};return r}();y.Mm=w})(ggP2VR||(ggP2VR={}));
(function(y){y.ka={create:function(w){var r="undefined"!=typeof Float32Array?new Float32Array(16):Array(16);w&&(r[0]=w[0],r[1]=w[1],r[2]=w[2],r[3]=w[3],r[4]=w[4],r[5]=w[5],r[6]=w[6],r[7]=w[7],r[8]=w[8],r[9]=w[9],r[10]=w[10],r[11]=w[11],r[12]=w[12],r[13]=w[13],r[14]=w[14],r[15]=w[15]);return r},set:function(w,r){r[0]=w[0];r[1]=w[1];r[2]=w[2];r[3]=w[3];r[4]=w[4];r[5]=w[5];r[6]=w[6];r[7]=w[7];r[8]=w[8];r[9]=w[9];r[10]=w[10];r[11]=w[11];r[12]=w[12];r[13]=w[13];r[14]=w[14];r[15]=w[15];return r},identity:function(w){w[0]=
1;w[1]=0;w[2]=0;w[3]=0;w[4]=0;w[5]=1;w[6]=0;w[7]=0;w[8]=0;w[9]=0;w[10]=1;w[11]=0;w[12]=0;w[13]=0;w[14]=0;w[15]=1;return w},multiply:function(w,r,f){f||(f=w);var c=w[0],a=w[1],b=w[2],e=w[3],h=w[4],m=w[5],n=w[6],q=w[7],v=w[8],t=w[9],x=w[10],z=w[11],C=w[12],F=w[13],E=w[14];w=w[15];var D=r[0],A=r[1],G=r[2],J=r[3],H=r[4],I=r[5],M=r[6],K=r[7],O=r[8],R=r[9],U=r[10],V=r[11],W=r[12],X=r[13],Y=r[14];r=r[15];f[0]=D*c+A*h+G*v+J*C;f[1]=D*a+A*m+G*t+J*F;f[2]=D*b+A*n+G*x+J*E;f[3]=D*e+A*q+G*z+J*w;f[4]=H*c+I*h+M*v+
K*C;f[5]=H*a+I*m+M*t+K*F;f[6]=H*b+I*n+M*x+K*E;f[7]=H*e+I*q+M*z+K*w;f[8]=O*c+R*h+U*v+V*C;f[9]=O*a+R*m+U*t+V*F;f[10]=O*b+R*n+U*x+V*E;f[11]=O*e+R*q+U*z+V*w;f[12]=W*c+X*h+Y*v+r*C;f[13]=W*a+X*m+Y*t+r*F;f[14]=W*b+X*n+Y*x+r*E;f[15]=W*e+X*q+Y*z+r*w;return f},translate:function(w,r,f){var c=r[0],a=r[1];r=r[2];if(!f||w==f)return w[12]=w[0]*c+w[4]*a+w[8]*r+w[12],w[13]=w[1]*c+w[5]*a+w[9]*r+w[13],w[14]=w[2]*c+w[6]*a+w[10]*r+w[14],w[15]=w[3]*c+w[7]*a+w[11]*r+w[15],w;var b=w[0],e=w[1],h=w[2],m=w[3],n=w[4],q=w[5],
v=w[6],t=w[7],x=w[8],z=w[9],C=w[10],F=w[11];f[0]=b;f[1]=e;f[2]=h;f[3]=m;f[4]=n;f[5]=q;f[6]=v;f[7]=t;f[8]=x;f[9]=z;f[10]=C;f[11]=F;f[12]=b*c+n*a+x*r+w[12];f[13]=e*c+q*a+z*r+w[13];f[14]=h*c+v*a+C*r+w[14];f[15]=m*c+t*a+F*r+w[15];return f},scale:function(w,r,f){var c=r[0],a=r[1];r=r[2];if(!f||w==f)return w[0]*=c,w[1]*=c,w[2]*=c,w[3]*=c,w[4]*=a,w[5]*=a,w[6]*=a,w[7]*=a,w[8]*=r,w[9]*=r,w[10]*=r,w[11]*=r,w;f[0]=w[0]*c;f[1]=w[1]*c;f[2]=w[2]*c;f[3]=w[3]*c;f[4]=w[4]*a;f[5]=w[5]*a;f[6]=w[6]*a;f[7]=w[7]*a;f[8]=
w[8]*r;f[9]=w[9]*r;f[10]=w[10]*r;f[11]=w[11]*r;f[12]=w[12];f[13]=w[13];f[14]=w[14];f[15]=w[15];return f},rotate:function(w,r,f,c){var a=f[0],b=f[1];f=f[2];var e=Math.sqrt(a*a+b*b+f*f);if(!e)return null;1!=e&&(e=1/e,a*=e,b*=e,f*=e);var h=Math.sin(r),m=Math.cos(r),n=1-m;r=w[0];e=w[1];var q=w[2],v=w[3],t=w[4],x=w[5],z=w[6],C=w[7],F=w[8],E=w[9],D=w[10],A=w[11],G=a*a*n+m,J=b*a*n+f*h,H=f*a*n-b*h,I=a*b*n-f*h,M=b*b*n+m,K=f*b*n+a*h,O=a*f*n+b*h;a=b*f*n-a*h;b=f*f*n+m;c?w!=c&&(c[12]=w[12],c[13]=w[13],c[14]=w[14],
c[15]=w[15]):c=w;c[0]=r*G+t*J+F*H;c[1]=e*G+x*J+E*H;c[2]=q*G+z*J+D*H;c[3]=v*G+C*J+A*H;c[4]=r*I+t*M+F*K;c[5]=e*I+x*M+E*K;c[6]=q*I+z*M+D*K;c[7]=v*I+C*M+A*K;c[8]=r*O+t*a+F*b;c[9]=e*O+x*a+E*b;c[10]=q*O+z*a+D*b;c[11]=v*O+C*a+A*b;return c},jr:function(w,r,f,c,a,b,e){e||(e=y.ka.create());var h=r-w,m=c-f,n=b-a;e[0]=2*a/h;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=2*a/m;e[6]=0;e[7]=0;e[8]=(r+w)/h;e[9]=(c+f)/m;e[10]=-(b+a)/n;e[11]=-1;e[12]=0;e[13]=0;e[14]=-(b*a*2)/n;e[15]=0;return e},perspective:function(w,r,f,c,a){w=
f*Math.tan(w*Math.PI/360);r*=w;return y.ka.jr(-r,r,-w,w,f,c,a)},fv:function(w,r,f,c,a,b,e){e||(e=y.ka.create());var h=r-w,m=c-f,n=b-a;e[0]=2/h;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=2/m;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=-2/n;e[11]=0;e[12]=-(w+r)/h;e[13]=-(c+f)/m;e[14]=-(b+a)/n;e[15]=1;return e}}})(ggP2VR||(ggP2VR={}));
(function(y){var w=function(){function r(f){this.za=y.ka.create();this.xb=y.ka.create();this.Nd=0;this.Ya=[];this.Bh=!1;this.nm=this.Uk=this.Ql=1;this.Of=1E6;this.Ki=[!1,!1,!1,!1,!1,!1];this.Rj=!1;this.Nk=[];this.fh=!1;this.Nm=8;this.Ls=new y.Mm;this.fe=[];this.o=f;this.O=f.O;if(f.Qd||f.yh)f.O.tm=2}r.prototype.xh=function(){var f=this.o.R;if(f){var c=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(c,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n\t\t\t\t\t}");
f.compileShader(c);f.getShaderParameter(c,f.COMPILE_STATUS)||(console&&console.log(f.getShaderInfoLog(c)),alert(f.getShaderInfoLog(c)),c=null);var a=f.createShader(f.VERTEX_SHADER);this.fd(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tattribute vec2 aTextureCoord;\n\t\t\t\tuniform mat4 uMVMatrix;\n\t\t\t\tuniform mat4 uPMatrix;\n\t\t\t\tuniform float uZoffset;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n\t\t\t\t\tgl_Position.z += uZoffset;\n\t\t\t\t\tvTextureCoord = aTextureCoord;\n\t\t\t\t}");
this.P=f.createProgram();this.jg(this.P,a,c);this.P.ia=f.getAttribLocation(this.P,"aVertexPosition");f.enableVertexAttribArray(this.P.ia);this.P.Ja=f.getAttribLocation(this.P,"aTextureCoord");f.enableVertexAttribArray(this.P.Ja);this.P.ue=f.getUniformLocation(this.P,"uPMatrix");this.P.Qh=f.getUniformLocation(this.P,"uMVMatrix");this.P.qg=f.getUniformLocation(this.P,"uSampler");this.P.mk=f.getUniformLocation(this.P,"uZoffset");c=f.createShader(f.VERTEX_SHADER);this.fd(c,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n\t\t\t\t}");
a=f.createShader(f.FRAGMENT_SHADER);this.fd(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform vec3 uColor;\n\t\t\t\tuniform float uAlpha;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = vec4(uColor, uAlpha);\n\t\t\t\t}");this.Sd=f.createProgram();this.jg(this.Sd,c,a);this.Sd.ia=f.getAttribLocation(this.Sd,"aVertexPosition");f.enableVertexAttribArray(this.Sd.ia);a=f.createShader(f.VERTEX_SHADER);this.fd(a,"precision highp float;\n\t\t\t\tattribute vec3 aVertexPosition;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tuniform vec4 uRect;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pos = vec2(uRect.x + uRect.z*aVertexPosition.x,uRect.y + uRect.w*aVertexPosition.y);\n\t\t\t\t\tvec2 pointNorm = (pos / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 1.0, 1.0);\n\t\t\t\t\tvTextureCoord.s=aVertexPosition.x;\n\t\t\t\t\tvTextureCoord.t=1.0-aVertexPosition.y;\n\t\t\t\t}");
c=f.createShader(f.FRAGMENT_SHADER);this.fd(c,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = texture2D(uSampler,vTextureCoord);\n\t\t\t\t}");this.ih=f.createProgram();this.jg(this.ih,a,c)}};r.prototype.gj=function(){var f=this.o,c=f.R;if(c){var a=c.createShader(c.FRAGMENT_SHADER);var b=this.dl(13);this.fd(a,b);b=c.createShader(c.VERTEX_SHADER);
this.fd(b,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n");
this.gp=c.createProgram();this.jg(this.gp,b,a);a=c.createShader(c.FRAGMENT_SHADER);b=this.dl(4);this.fd(a,b);b=c.createShader(c.VERTEX_SHADER);this.fd(b,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n");
this.hp=c.createProgram();this.jg(this.hp,b,a);a=c.createShader(c.FRAGMENT_SHADER);b=this.dl(f.B.format);this.fd(a,b);b=c.createShader(c.VERTEX_SHADER);this.fd(b,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n");
this.ip=c.createProgram();this.jg(this.ip,b,a);this.Hj||(this.Hj=c.createBuffer())}else this.o.N("No WebGL to initRemapShader!")};r.prototype.fd=function(f,c){var a=this.o.R;a.shaderSource(f,c);a.compileShader(f);a.getShaderParameter(f,a.COMPILE_STATUS)||(console&&console.log(a.getShaderInfoLog(f)),S&&alert(a.getShaderInfoLog(f)))};r.prototype.jg=function(f,c,a){var b=this.o.R;b.attachShader(f,c);b.attachShader(f,a);b.linkProgram(f);b.getProgramParameter(f,b.LINK_STATUS)||(alert("Could not initialise shader program"),
console&&console.log(b.getError()));b.useProgram(f)};r.prototype.dl=function(f){var c=this.o;var a="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define M_PI 3.14159265358979323846\nvarying vec2 dst;\nuniform vec2 srcScale;\nuniform vec2 srcOffset;\nuniform float rectDstDistance;\nuniform float fisheyeDistance;\nuniform float stereoDistance;\nuniform float directionBlend;\nuniform mat4 matRotate; // = mat4( 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0 );\nconst float rectSrcDistance = 1.0;\nuniform vec2 tonemap;\n";
a=(13==f?a+"uniform samplerCube cubeTexture;":a+"uniform sampler2D tileTexture;\n")+"void main()\n{\n";a+="vec4 direction;\n";a+="vec2 src;\n";a+="vec2 srcCord;\n";a+="vec2 texc;\n";var b=this.io(c.Z());c.Z()!=c.Dc()&&0!=c.Dc()?(c=this.io(c.Dc()),a+="vec4 direction1,direction2;\n",a+=b.replace("direction=","direction1="),a+=c.replace("direction=","direction2="),a+="direction=normalize(mix(direction1, direction2,1.0-directionBlend));\n"):a+=b;a+="direction=direction*matRotate;\n";13==f&&(a+="direction.z=-direction.z;",
a+="gl_FragColor = textureCube(cubeTexture, direction.xyz);");4==f&&(a+="float iz=1.0/(direction.z * rectSrcDistance);\n",a+="src.x=-direction.x*iz;\n",a+="src.y= direction.y*iz;\n",a+="texc=src * srcScale + srcOffset;\n",a+="if (",a+="(direction.z<0.0) && ",a+="(texc.x>=0.0) && (texc.x<=1.0) && (texc.y>=0.0) && (texc.y<=1.0)) {\n",a=this.fh?a+" gl_FragColor = vec4(0.5,0.5,0,1);\n":a+"  gl_FragColor = texture2D(tileTexture, texc);\n",a+="} else {\n",a=this.fh?a+" gl_FragColor = vec4(0.5,0,0,0.3);\n":
a+"  discard;\n",a+="}\n");1==f&&(a+="src.x=atan(float(-direction.x), float(-direction.z));",a+="src.y=asin(direction.y);\n",a+="texc=src * srcScale + srcOffset;\n",a+="gl_FragColor = texture2D(tileTexture, texc);\n");14==f&&(a+="vec2 cf;\n",a+="if ((direction.z<0.0) && (direction.z<=-abs(direction.x)) && (direction.z<=-abs(direction.y))) {\n",a+="  src.x=-direction.x/direction.z;\n",a+="  src.y=+direction.y/direction.z;\n",a+="  cf.x=1.0;cf.y=3.0;\n",a+="}\n",a+="if ((direction.x>=0.0) && (direction.x>=abs(direction.y)) && (direction.x>=abs(direction.z))) {\n",
a+="  src.x=+direction.z/direction.x;\n",a+="  src.y=-direction.y/direction.x;\n",a+="  cf.x=3.0;cf.y=3.0;\n",a+="}\n",a+="if ((direction.z>=0.0) && (direction.z>=abs(direction.x)) && (direction.z>=abs(direction.y))) {\n",a+="  src.x=-direction.x/direction.z;\n",a+="  src.y=-direction.y/direction.z;\n",a+="  cf.x=5.0;cf.y=3.0;\n",a+="}\n",a+="if ((direction.x<=0.0) && (direction.x<=-abs(direction.y)) && (direction.x<=-abs(direction.z))) {\n",a+="  src.x=+direction.z/direction.x;\n",a+="  src.y=+direction.y/direction.x;\n",
a+="  cf.x=1.0;cf.y=1.0;\n",a+="}\n",a+="if ((direction.y>=0.0) && (direction.y>=abs(direction.x)) && (direction.y>=abs(direction.z))) {\n",a+="  src.x=+direction.x/direction.y;\n",a+="  src.y=-direction.z/direction.y;\n",a+="  cf.x=5.0;cf.y=1.0;\n",a+="}\n",a+="if ((direction.y<=0.0) && (direction.y<=-abs(direction.x)) && (direction.y<=-abs(direction.z))) {\n",a+="  src.x=-direction.x/direction.y;\n",a+="  src.y=-direction.z/direction.y;\n",a+="  cf.x=3.0;cf.y=1.0;\n",a+="}\n",a+="texc.x=(cf.x+src.x*srcScale.x) / 6.0;\n",
a+="texc.y=(cf.y+src.y*srcScale.y) / 4.0;\n",a+="gl_FragColor = texture2D(tileTexture, texc);\n");return a+="}\n"};r.prototype.io=function(f){var c="";switch(f){case 4:c+="direction.x=dst.x*rectDstDistance;\ndirection.y=dst.y*rectDstDistance;\ndirection.z=-1.0;\n";break;case 12:c+="float r,ph,ro;\nr=length(dst.xy)*0.5;\nro=atan(float(dst.x),float(-dst.y));\nph=r / fisheyeDistance;\ndirection.x= sin(ph) * sin(ro);\ndirection.y=-sin(ph) * cos(ro);\ndirection.z=-cos(ph);\n";break;case 9:c+="float n;\nvec2 ind;\nind=dst*stereoDistance;\nn=1.0 + ind.x*ind.x + ind.y*ind.y;\ndirection.x=2.0*ind.x/n;\ndirection.y=2.0*ind.y/n;\ndirection.z=(n-2.0)/n;\n"}return c+
"direction.w=0.0;\ndirection=normalize(direction);\n"};r.prototype.ro=function(f){var c,a,b=this.o,e=this.o.R;this.Jk=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.Jk);var h=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];for(c=0;12>c;c++)2>c%3&&(h[c]*=f);e.bufferData(e.ARRAY_BUFFER,new Float32Array(h),e.STATIC_DRAW);this.Te=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.Te);var m=[1,0,0,0,0,1,1,1];e.bufferData(e.ARRAY_BUFFER,new Float32Array(m),e.STATIC_DRAW);this.td=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,
this.td);var n=[0,1,2,0,2,3];e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),e.STATIC_DRAW);h=[];n=[];m=[];var q=new y.Ra;for(f=0;6>f;f++){var v=f%3;var t=3>f?1:0;for(a=0;4>a;a++){q.x=-1;q.y=-1;q.z=1;for(c=0;c<a;c++)q.op();m.push((0>q.x?.33:0)+.33*v,(0>q.y?0:.5)+.5*t);if(4>f)for(c=0;c<f;c++)q.Gt();else 5==f?q.Ft():q.Et();h.push(q.x,q.y,q.z)}c=4*f;n.push(0+c,1+c,2+c,0+c,2+c,3+c)}b.B.ek=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,b.B.ek);e.bufferData(e.ARRAY_BUFFER,new Float32Array(h),e.STATIC_DRAW);
b.B.mi=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,b.B.mi);e.bufferData(e.ARRAY_BUFFER,new Float32Array(m),e.STATIC_DRAW);b.B.fj=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,b.B.fj);e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),e.STATIC_DRAW);this.us=e.createBuffer();this.ts=e.createBuffer()};r.prototype.ll=function(f){var c=this;return function(){try{if(f.Zs)return;var a=c.o.R;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1);var b=!1;null!=f.kf&&f.kf.complete?f.mo||(a.bindTexture(a.TEXTURE_2D,
f),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,f.kf),b=f.mo=!0):null!=f.rf&&f.rf.complete&&(a.bindTexture(a.TEXTURE_2D,f),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,f.rf),b=!0);b&&(f.loaded=!0,c.o.D.Xc&&("previewtrack"==c.o.D.delay||"videopano"==c.o.D.delay&&!c.o.B.j)&&c.ap()&&c.o.Tj(null));a.bindTexture(a.TEXTURE_2D,null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,0)}catch(e){c.o.N(e)}c.o.update(2)}};r.prototype.so=function(){var f=this.o,c=f.R;if(this.Ya)for(;0<this.Ya.length;)c.deleteTexture(this.Ya.pop());
this.Ya=[];for(var a=0;6>a;a++){var b=c.createTexture();this.Nd++;b.rf=null;b.kf=null;b.mo=!1;c.bindTexture(c.TEXTURE_2D,b);c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);if(f.Zg[a]){var e=new Image;e.crossOrigin=f.crossOrigin;e.src=f.vb(f.Zg[a]);b.rf=e;e.addEventListener&&e.addEventListener("load",
this.ll(b),!1);f.sd.push(e)}this.Ya.push(b)}for(a=0;6>a;a++)f.Yg[a]&&(e=new Image,e.crossOrigin=f.crossOrigin,e.src=f.vb(f.Yg[a]),e.addEventListener?e.addEventListener("load",this.ll(this.Ya[a]),!1):e.onload=this.ll(this.Ya[a]),this.Ya[a].kf=e,f.sd.push(e));for(a=0;a<f.V.length;a++)f.V[a].kd||(f.V[a].texture=c.createTexture(),f.Nd++,c.bindTexture(c.TEXTURE_2D,f.V[a].texture),c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),
c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));f.B.texture=c.createTexture();f.Nd++;c.bindTexture(c.TEXTURE_2D,f.B.texture);c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.bindTexture(c.TEXTURE_2D,null)};r.prototype.Wu=
function(){var f=this.o;if(f.C.width!=f.da.offsetWidth||f.C.height!=f.da.offsetHeight)f.C.width=f.da.offsetWidth,f.C.height=f.da.offsetHeight;f.he&&(f.Pc(0),f.cc());if(f.R){var c=f.R;this.ak();c.clear(c.DEPTH_BUFFER_BIT);c.useProgram(this.P);this.tg(0);c.uniform1i(this.P.qg,0);c.enableVertexAttribArray(this.P.ia);c.enableVertexAttribArray(this.P.Ja);c.bindBuffer(c.ARRAY_BUFFER,this.Te);c.vertexAttribPointer(this.P.Ja,2,c.FLOAT,!1,0,0);c.activeTexture(c.TEXTURE0);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,
this.td);c.uniform1f(this.P.mk,1E-4);c.vertexAttribPointer(this.P.ia,3,c.FLOAT,!1,0,0);y.ka.identity(this.xb);y.ka.perspective(f.Gb(),f.wb.width/f.wb.height,.1,100,this.xb);c.uniformMatrix4fv(this.P.ue,!1,this.xb);for(f=0;6>f;f++)this.tg(f),c.bindBuffer(c.ARRAY_BUFFER,this.Jk),c.vertexAttribPointer(this.P.ia,3,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,this.Te),c.vertexAttribPointer(this.P.Ja,2,c.FLOAT,!1,0,0),6<=this.Ya.length&&this.Ya[f].loaded&&(c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,
this.Ya[f]),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.td),c.uniform1i(this.P.qg,0),c.uniformMatrix4fv(this.P.Qh,!1,this.za),c.uniformMatrix4fv(this.P.ue,!1,this.xb),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0))}};r.prototype.ak=function(){var f=this.o,c=this.O;c.M.Cj&&6<c.M.Cj.length&&(c=parseInt(c.M.Cj,10),f.R.clearColor((c>>16&255)/255,(c>>8&255)/255,(c>>0&255)/255,1))};r.prototype.tg=function(f,c){void 0===c&&(c=1);var a=this.o;y.ka.identity(this.za);y.ka.rotate(this.za,c*-a.X.m*Math.PI/180,
[0,0,1]);y.ka.rotate(this.za,c*-a.u.m*Math.PI/180,[1,0,0]);-1==c?y.ka.rotate(this.za,-a.pan.m*Math.PI/180,[0,1,0]):y.ka.rotate(this.za,(180-a.pan.m)*Math.PI/180,[0,1,0]);a.Sa&&(y.ka.rotate(this.za,-a.Sa.pitch*Math.PI/180,[1,0,0]),y.ka.rotate(this.za,a.Sa.X*Math.PI/180,[0,0,1]));4>f?y.ka.rotate(this.za,-Math.PI/2*f,[0,1,0]):y.ka.rotate(this.za,Math.PI/2*(5==f?1:-1),[1,0,0])};r.prototype.xu=function(f){var c=this;return function(){c.Nk.push(f)}};r.prototype.br=function(f){this.o.ob=!0;this.o.dh=!0;
f.loaded=!0;f.Rl=0;f.xe=0;var c=this.o.R;this.sn();c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,1);if(null!=f.M&&f.M.complete){f.Hb=c.createTexture();this.o.Nd++;c.bindTexture(c.TEXTURE_2D,f.Hb);try{c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,f.M)}catch(a){c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array([128,128,128,250])),this.o.N(a)}}this.o.update(2)};r.prototype.sn=function(){this.o.O.ni&&this.o.O.ni--};r.prototype.cr=function(){if(0<this.Nk.length){var f=this.Nk.shift();
this.br(f)}};r.prototype.Vs=function(f){var c=this;return function(){c.o.ob=!0;c.o.dh=!0;var a=c.O.M;try{if(null!=f&&f.complete){var b=a.levels[a.levels.length-1],e=a.$a;b.height=b.width=f.width-2*e;b.Y=b.sa=1;for(var h=0;6>h;h++){var m=new y.Og;m.Ac=document.createElement("canvas");c.o.pa?(m.Ac.width=b.width+2*e,m.Ac.height=b.height+2*e):(m.Ac.width=a.W+2*e,m.Ac.height=a.W+2*e);m.pn=m.Ac.getContext("2d");m.Ac.style[c.o.wd+"Origin"]="0% 0%";m.Ac.style.overflow="hidden";m.Ac.style.position="absolute";
m.M=f;var n=b.width+2*e,q=b.height+2*e;m.pn&&m.pn.drawImage(f,0,h*q,n,q,0,0,n,q);if(c.o.pa&&c.o.R){var v=c.o.R;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,1);m.Hb=v.createTexture();c.o.Nd++;v.bindTexture(v.TEXTURE_2D,m.Hb);try{v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,m.Ac)}catch(t){c.o.N(t)}v.bindTexture(v.TEXTURE_2D,null);v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,0)}c.o.Eg&&(m.Ac.bv=-1,c.o.da.insertBefore(m.Ac,c.o.da.firstChild));b.Ka[h]=m}b.loaded=!0;c.o.D.Xc&&("previewtrack"==c.o.D.delay||"videopano"==
c.o.D.delay&&!c.o.B.j)&&c.o.Tj(null)}}catch(t){c.o.N(t)}c.o.update(2)}};r.prototype.Rp=function(f){var c=this;return function(){c.o.ob=!0;c.o.dh=!0;c.sn();f.M=null}};r.prototype.Uu=function(){var f=this.o,c=this.O,a=c.M,b=a.levels;f.he&&(f.Pc(0),f.cc());if(f.R){var e=f.R;e.useProgram(this.P);this.ak();e.clear(e.DEPTH_BUFFER_BIT);e.enable(e.DEPTH_TEST);y.ka.identity(this.xb);y.ka.perspective(f.Gb(),f.wb.width/f.wb.height,.1,100,this.xb);e.uniformMatrix4fv(this.P.ue,!1,this.xb);c.Ju();c.Jo();var h=
c.An();var m=b.length-1;for(c.Yd=0;m>=h;){var n=b[m],q=1;m==b.length-1&&0==a.$a&&(q=a.W/(a.W-.5));for(var v=0;6>v;v++){var t=c.cube.Uf[v];var x=t.Vh;if(t.Fc&&0<x.wi&&0<x.hk&&0<x.scale||n.cache){t.ob=!1;t.Jf[m]||(t.Jf[m]={Mc:0,xd:0,Cd:0,Dd:0});var z=t.Jf[m];n.cache?(z.Mc=0,z.xd=0,z.Cd=n.Y-1,z.Dd=n.sa-1):c.cs(n,x,z);x=!0;for(var C=z.xd;C<=z.Dd;C++)for(var F=z.Mc;F<=z.Cd;F++){var E=F+C*n.Y+v*n.Y*n.sa,D=n.Ka[E];D||(D=n.Ka[E]=new y.Og,f.N("create simple "+m+","+E));this.Oi()?D.M||(D.xe?D.xe--:(this.qj(D,
n,c.zg(v,m,F,C)),f.ob=!0)):c.Yd++;if(D.Hb){if(!D.ag){E=.5*m+1;D.ag=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,D.ag);var A=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];A[3]=F*a.W-a.$a;A[0]=Math.min((F+1)*a.W,n.width)+a.$a;A[7]=C*a.W-a.$a;A[1]=Math.min((C+1)*a.W,n.height)+a.$a;A[4]=A[1];A[6]=A[3];A[9]=A[0];A[10]=A[7];for(var G=0;12>G;G++)A[G]=0==G%3?q*E*(-2*A[G]/n.width+1):1==G%3?q*E*(-2*A[G]/n.height+1):E;e.bufferData(e.ARRAY_BUFFER,new Float32Array(A),e.STATIC_DRAW)}}else x=!1;D.visible=t.Fc}z.Go=x}}m--}for(v=
0;6>v;v++)if(t=c.cube.Uf[v],t.Fc)for(x=t.Vh,this.tg(v),e.uniform1i(this.P.qg,0),e.uniformMatrix4fv(this.P.ue,!1,this.xb),e.uniformMatrix4fv(this.P.Qh,!1,this.za),e.enableVertexAttribArray(this.P.ia),e.enableVertexAttribArray(this.P.Ja),e.bindBuffer(e.ARRAY_BUFFER,this.Te),e.vertexAttribPointer(this.P.Ja,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.td),e.useProgram(this.P),m=h;m<=b.length-1;){n=b[m];if(t.Fc&&0<x.wi&&t.Jf[m]&&0<=t.Jf[m].Mc){z=t.Jf[m];for(C=
z.xd;C<=z.Dd;C++)for(F=z.Mc;F<=z.Cd;F++)E=F+C*n.Y+v*n.Y*n.sa,(D=n.Ka[E])&&D.Hb&&(e.uniform1f(this.P.mk,1E-4*(F%2+C%2*2)),e.bindBuffer(e.ARRAY_BUFFER,D.ag),e.vertexAttribPointer(this.P.ia,3,e.FLOAT,!1,0,0),e.bindTexture(e.TEXTURE_2D,D.Hb),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.drawElements(e.TRIANGLES,
6,e.UNSIGNED_SHORT,0)),D.visible=t.Fc;z.Go&&(m=b.length)}m++}this.Sl();f.dh=!1}};r.prototype.Oi=function(){return this.O.ni<this.O.tm};r.prototype.qj=function(f,c,a){var b=this.O,e=this.o;b.As++;f.M=new Image;f.Rl++;f.xe=1<<f.Rl;f.M.onload=this.xu(f);f.M.onerror=this.Rp(f);f.M.onabort=this.Rp(f);f.M.crossOrigin=e.crossOrigin;f.M.setAttribute("src",a);e.N("load "+a);c.cache&&e.sd.push(f.M);b.ni++};r.prototype.hq=function(){var f=this.o,c=this.O,a=c.M;f.he&&(f.Pc(0),f.cc());if(f.R){var b=f.R;this.ak();
b.clear(b.DEPTH_BUFFER_BIT);b.disable(b.CULL_FACE);b.bindBuffer(b.ARRAY_BUFFER,this.Hj);var e=[0,0];e[2]=f.C.width;e[3]=0;e[4]=f.C.width;e[5]=f.C.height;e[6]=0;e[7]=f.C.height;b.bufferData(b.ARRAY_BUFFER,new Float32Array(e),b.STATIC_DRAW);c.Yd=0;if(!this.Oc||this.Bh)0<a.levels.length?this.$q():this.ar();f.B.Rc?this.nt():(b.enable(b.DEPTH_TEST),b.depthRange(0,1),b.depthFunc(b.LESS),this.Rj=!1,0<a.levels.length&&this.Vu(),this.Oc&&!this.Rj&&this.mt())}};r.prototype.iu=function(f,c,a,b,e,h,m){var n=
this.o;e=this.O.M;var q=n.C,v=a*e.W/c.width,t=(a+1)*e.W/c.width;a=b*e.W/c.height;c=(b+1)*e.W/c.height;e=.1;m&&(e=.2);this.fh&&(e=0);b=(t-v)*e;1<t&&(t=1);1<c&&(c=1);v-=b;a-=b;e=this.Nm;m=(t+b-v)/e;t=(c+b-a)/e;c={x:0,y:0};b={x:0,y:0};f.jl=0;var x=n.$i(),z=new y.Ra,C=this.Ls;C.tp();4>h?C.uf(-90*h):C.Td(5==h?90:-90);n.Sa&&(C.vf(n.Sa.X),C.Td(-n.Sa.pitch));C.uf(-n.pan.m);C.Td(n.u.m);C.vf(n.X.m);for(h=0;h<=e;h++)for(var F=0;F<=e;F++){var E=2*(v+F*m)-1;var D=2*(a+h*t)-1;z.x=1*E;z.y=1*D;z.z=-1;z.normalize();
C.Us(z);E=this.fo(z,c,n.Z());0!=n.Dc()&&1>x&&(D=this.fo(z,b,n.Dc()),E&&D?(c.x=c.x*x+b.x*(1-x),c.y=c.y*x+b.y*(1-x)):!E&&D&&(E=!0,c.x=b.x,c.y=b.y));E||(c.x=NaN);f.cj[f.jl++]=q.width/2+c.x*q.width/2;f.cj[f.jl++]=q.height/2-c.y*q.width/2}this.ju(f,e)};r.prototype.fo=function(f,c,a){var b=!0;switch(a){case 0:case 4:a=1/(f.z*this.Ql);c.x=-f.x*a;c.y=f.y*a;0<f.z&&(b=!1);break;case 9:1==f.z&&(b=!1);a=1/((1-f.z)*this.nm);c.x=f.x*a;c.y=-f.y*a;break;case 12:if(a=Math.sqrt(f.x*f.x+f.y*f.y),0==a)c.x=0,c.y=0;else{var e=
2*this.Uk*Math.acos(-f.z)/a;if(2<a)return!1;c.x=e*f.x;c.y=-e*f.y}}return b};r.prototype.ju=function(f,c){for(var a=[],b,e=f.Na=0;e<c;e++)for(var h=0;h<c;h++){a[0]=e+h*(c+1);a[1]=e+1+h*(c+1);a[2]=e+(h+1)*(c+1);a[3]=e+1+(h+1)*(c+1);b=!0;for(var m=0;4>m;m++)isNaN(f.cj[2*a[0]])&&(b=!1);if(b){for(m=0;4>m;m++);b&&(this.fh?(f.hb[f.Na++]=a[0],f.hb[f.Na++]=a[1],f.hb[f.Na++]=a[1],f.hb[f.Na++]=a[3],f.hb[f.Na++]=a[3],f.hb[f.Na++]=a[2],f.hb[f.Na++]=a[2],f.hb[f.Na++]=a[0],f.hb[f.Na++]=a[3],f.hb[f.Na++]=a[0],f.hb[f.Na++]=
a[1],f.hb[f.Na++]=a[2]):(f.hb[f.Na++]=a[0],f.hb[f.Na++]=a[3],f.hb[f.Na++]=a[2],f.hb[f.Na++]=a[0],f.hb[f.Na++]=a[1],f.hb[f.Na++]=a[3]))}}};r.prototype.Vu=function(){var f=this.o,c=this.O,a=c.M,b=a.levels;f.he&&(f.Pc(0),f.cc());if(f.R){var e=f.R,h=this.hp;e.useProgram(h);this.Am(h);e.enable(e.CULL_FACE);e.cullFace(e.FRONT);e.enable(e.STENCIL_TEST);e.stencilOp(e.KEEP,e.INCR,e.INCR);e.stencilFunc(e.EQUAL,0,255);e.enable(e.BLEND);e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.SRC_ALPHA,e.ONE);
y.ka.identity(this.xb);y.ka.perspective(f.Gb(),f.wb.width/f.wb.height,.1,100,this.xb);e.uniformMatrix4fv(e.getUniformLocation(h,"uPMatrix"),!1,this.xb);c.Yd=0;c.Jo();var m=c.An(),n=0;var q=b.length-1;for(var v={},t=b[q];t.sf&&0<q;)q--,t=b[q];for(var x=q,z=x,C=0;6>C;C++)for(var F=0;F<t.sa;F++)for(var E=0;E<t.Y;E++){var D=E+F*t.Y+C*t.Y*t.sa;v[D]=1}for(;q>=m;){var A={};t=b[q];var G=null;0<q&&(G=b[q-1]);var J=!0;for(var H in v)if(v.hasOwnProperty(H)){D=Number(H);var I=t.Ka[D];C=Number(Math.floor(D/(t.Y*
t.sa)));F=Math.floor((D-C*t.Y*t.sa)/t.Y);E=Math.floor(D-(F*t.Y+C*t.Y*t.sa));if(6<=C)console.log("Grrr...");else{var M=c.cube.Uf[C];M.ob=!1;I||(I=t.Ka[D]=new y.Og,f.N("create "+ +q+","+D));this.iu(I,t,E,F,Math.max(1,this.Nm>>x-q),C,0!=f.Dc());I.visible=0<I.Na||t.cache;I.lj=3;I.Eh=Date.now();I.visible&&!I.Hb&&(J=!1,this.Oi()?I.M||(I.xe?I.xe--:(this.qj(I,t,c.zg(C,q,E,F)),f.ob=!0)):this.O.Yd++);if(G&&(I.visible||G.cache)){I=(E*a.W+1)/t.width;E=Math.min(1,((E+1)*a.W-1)/t.width);var K=(F*a.W+1)/t.height;
F=Math.min(1,((F+1)*a.W-1)/t.height);D=a.W/G.width;M=a.W/G.height;var O=K;K=Math.floor(K*G.height/a.W);do{var R=I,U=Math.floor(I*G.width/a.W);do{var V=U+K*G.Y+C*G.Y*G.sa;U<G.Y&&K<G.sa?A[V]=1:f.N("Grrrr");U++;R+=D}while(R<E);K++;O+=M}while(O<F)}}}J&&(z=q,20>f.fov.m&&q<this.Of&&(this.Rj=!0));v=A;q--}this.Sl();e.uniform1i(e.getUniformLocation(h,"tileTexture"),0);e.activeTexture(e.TEXTURE0);q=m;for(m=-1;q<=Math.min(z,this.Of-1);){t=b[q];for(H in t.Ka)if(t.Ka.hasOwnProperty(H)){v=Number(H);I=t.Ka[v];C=
Math.floor(v/(t.Y*t.sa));F=Math.floor((v-C*t.Y*t.sa)/t.Y);E=Math.floor(v-(F*t.Y+C*t.Y*t.sa));m!=C&&(m=C,this.bk(C,h));if(n>c.lg){f.N("Exceeded painted tiles");this.Rj=!1;break}I.Hb&&(x=v=a.W,E==t.Y-1&&(v=t.width-a.W*E),F==t.sa-1&&(x=t.height-a.W*F),v=(v+2*a.$a)/a.W,x=(x+2*a.$a)/a.W,e.bindTexture(e.TEXTURE_2D,I.Hb),e.uniform2f(e.getUniformLocation(h,"uCanvasDimensions"),f.C.width,f.C.height),A=e.getUniformLocation(h,"srcScale"),e.uniform2f(A,.5*t.width/a.W/v,.5*t.height/a.W/x),A=e.getUniformLocation(h,
"srcOffset"),e.uniform2f(A,(.5*t.width+a.$a-a.W*E)/a.W/v,-(.5*t.height+a.$a-a.W*F)/a.W/x+1),A=e.getUniformLocation(h,"zOffset"),e.uniform1f(A,(q+1)/(b.length+5)),v=e.getAttribLocation(h,"aVertexPosition"),e.disableVertexAttribArray(0),e.disableVertexAttribArray(1),e.disableVertexAttribArray(2),e.enableVertexAttribArray(v),e.activeTexture(e.TEXTURE0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,
e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindBuffer(e.ARRAY_BUFFER,this.us),e.vertexAttribPointer(v,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,new Float32Array(I.cj),e.DYNAMIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.ts),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(I.hb),e.DYNAMIC_DRAW),this.fh?0==q&&0==C&&e.drawElements(e.LINES,I.Na,e.UNSIGNED_SHORT,0):e.drawElements(e.TRIANGLES,I.Na,e.UNSIGNED_SHORT,0),n++)}q++}e.disable(e.CULL_FACE);
e.cullFace(e.FRONT_AND_BACK);f.dh=!1;e.disable(e.STENCIL_TEST)}};r.prototype.bk=function(f,c){var a=this.o.R;y.ka.identity(this.za);this.tg(f,-1);a.uniformMatrix4fv(a.getUniformLocation(c,"matRotate"),!1,this.za)};r.prototype.nt=function(){var f=this.o;if(f.R){var c=f.R,a=this.ip;c.useProgram(a);this.bk(0,a);c.uniform2f(c.getUniformLocation(a,"uCanvasDimensions"),f.C.width,f.C.height);var b=c.getUniformLocation(a,"srcOffset");c.uniform2f(b,.5,.5);1==f.B.format&&(b=c.getUniformLocation(a,"srcScale"),
f.Ad?(c.uniform2f(b,-.5/Math.PI,(f.B.flipY?-.5:.5)/Math.PI),b=c.getUniformLocation(a,"srcOffset"),f.wg?c.uniform2f(b,.5,.75):c.uniform2f(b,.5,.25)):c.uniform2f(b,-.5/Math.PI,(f.B.flipY?-1:1)/Math.PI));14==f.B.format&&(b=c.getUniformLocation(a,"srcScale"),c.uniform2f(b,1-2*f.B.Re/(f.B.width/3),1-2*f.B.Re/(f.B.height/2)));this.Am(a);b=c.getUniformLocation(a,"cubeTexture");c.uniform1i(b,0);b=c.getAttribLocation(a,"aVertexPosition");c.disableVertexAttribArray(0);c.disableVertexAttribArray(1);c.disableVertexAttribArray(2);
c.enableVertexAttribArray(b);c.bindBuffer(c.ARRAY_BUFFER,this.Hj);c.vertexAttribPointer(b,2,c.FLOAT,!1,0,0);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,f.B.texture);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.td);c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,
0)}};r.prototype.Am=function(f){var c=this.o,a=c.R,b=this.o.C,e=1;switch(c.fov.mode){case 0:e=b.width/b.height;break;case 1:e=1;break;case 2:e=b.width/Math.sqrt(b.width*b.width+b.height*b.height);break;case 3:4*b.height/3<b.width&&(e=4/3)}b=a.getUniformLocation(f,"rectDstDistance");this.Ql=Math.tan(Math.min(c.fov.m,179)/2*Math.PI/180)*e;a.uniform1f(b,this.Ql);b=a.getUniformLocation(f,"fisheyeDistance");this.Uk=180/(c.fov.m*Math.PI*e);a.uniform1f(b,this.Uk);b=a.getUniformLocation(f,"stereoDistance");
this.nm=Math.tan(Math.min(c.fov.m,359)/4*Math.PI/180)*e;a.uniform1f(b,this.nm);b=a.getUniformLocation(f,"directionBlend");a.uniform1f(b,c.$i())};r.prototype.mt=function(){var f=this.o,c=f.R,a=this.gp;c.useProgram(a);c.enable(c.STENCIL_TEST);c.stencilOp(c.KEEP,c.INCR,c.INCR);c.stencilFunc(c.EQUAL,0,255);this.bk(0,a);c.uniform2f(c.getUniformLocation(a,"uCanvasDimensions"),f.C.width,f.C.height);f=c.getUniformLocation(a,"srcScale");c.uniform2f(f,1,1);f=c.getUniformLocation(a,"srcOffset");c.uniform2f(f,
0,0);f=c.getUniformLocation(a,"zOffset");c.uniform1f(f,.9999);this.Am(a);this.bk(0,a);f=c.getUniformLocation(a,"cubeTexture");c.uniform1i(f,0);a=c.getAttribLocation(a,"aVertexPosition");c.disableVertexAttribArray(0);c.disableVertexAttribArray(1);c.disableVertexAttribArray(2);c.enableVertexAttribArray(a);c.bindBuffer(c.ARRAY_BUFFER,this.Hj);c.vertexAttribPointer(a,2,c.FLOAT,!1,0,0);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_CUBE_MAP,this.Oc);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,
c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MAG_FILTER,c.LINEAR);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.td);c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0);c.disable(c.STENCIL_TEST)};r.prototype.ar=function(){var f=this.o,c=f.R;c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE);for(var a=[1,3,5,4,0,2],b=!0,e=!0,h=!1,m=0;6>m;m++)this.Ya[m].kf.complete?
this.Ki[m]||(h=!0):b=!1,this.Ya[m].rf.complete||(e=!1);if(e||b)if(!e||b||!this.Oc||h){m=Math.round(f.Ge/f.Ag);e=(f.Ge-m)/2;f.N("paint cube single - isMain: "+b+" overlap: "+e);this.Of=0;this.Oc||(this.Oc=c.createTexture());f.Nd++;c.bindTexture(c.TEXTURE_CUBE_MAP,this.Oc);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,1);h=document.createElement("canvas");h.width=m;h.height=
m;var n=h.getContext("2d");for(m=0;6>m;m++){var q=a[m];this.Ya[q].kf.complete?this.Ki[q]||(n.drawImage(this.Ya[q].kf,-e,-e),c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,h),this.Ki[q]=!0):(n.drawImage(this.Ya[q].rf,-e,-e,f.Ge,f.Ge),c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,h))}this.Bh=!b}};r.prototype.$q=function(){var f=this.o,c=this.O.M,a=c.levels,b=f.R,e;var h=a.length-1;if(!(0>h)){a[h].sf&&h--;var m=512;f.Ah&&(m=256);!f.pg&&2<=
f.devicePixelRatio&&(m=512);for((e=b.getParameter(b.MAX_CUBE_MAP_TEXTURE_SIZE))&&e<m&&(m=e);0<h&&a[h-1].width<=m;)h--;m=a[h];if(0!=m.Y){e=h;var n=this.Vq(h);this.Bh&&n&&(this.Bh=!1);n||(h=a.length-1,m=a[h],n||(m.sf?(n=m.loaded,this.Bl(h-1)&&(--h,n=!0)):n=this.Bl(h)),this.Bh=!0);this.Bl(e);if(n&&this.Of>h){m=a[h];f.N("paint cube level "+h);this.Of=h;a=c.$a;h=0<a||1<m.Y||1<m.sa;n=e=void 0;h&&(n=document.createElement("canvas"),n.width=m.width,n.height=m.height,2048>m.width&&(1500<m.width?(n.width=2048,
n.height=2048):700<m.width?(n.width=1024,n.height=1024):(n.width=512,n.height=512)),e=n.getContext("2d"));this.Oc=b.createTexture();f.Nd++;b.bindTexture(b.TEXTURE_CUBE_MAP,this.Oc);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,1);var q=[1,3,5,4,0,2];c=c.W;for(var v=0;6>v;v++){for(var t=0;t<m.sa;t++)for(var x=0;x<m.Y;x++){var z=x+t*m.Y+q[v]*m.Y*m.sa,C=m.Ka[z],F=C.M;C.Ac&&
(F=C.Ac);F?h?(z=n.width/m.width,e.drawImage(F,z*(x*c-a),z*(t*c-a),z*F.width,z*F.height)):b.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,F):(f.N("WTF?!"),f.N(z),f.N(C))}h&&b.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,n)}}}}};r.prototype.Bl=function(f){var c=this.o,a=this.O,b=a.M.levels[f];if(0==b.Y)return!1;var e=!0;b.cache=!0;for(var h=0;6>h;h++)for(var m=0;m<b.sa;m++)for(var n=0;n<b.Y;n++){var q=n+m*b.Y+h*b.Y*b.sa,v=b.Ka[q];v||(v=b.Ka[q]=
new y.Og);this.Oi()?v.M||(v.xe?v.xe--:(this.qj(v,b,a.zg(h,f,n,m)),c.ob=!0)):a.Yd++;v.Hb||(e=!1,c.ob=!0)}e&&(b.loaded=!0);return e};r.prototype.Vq=function(f){f=this.O.M.levels[f];if(0==f.Y)return!1;for(var c=0;6>c;c++)for(var a=0;a<f.sa;a++)for(var b=0;b<f.Y;b++){var e=f.Ka[b+a*f.Y+c*f.Y*f.sa];if(!e||!e.Hb)return!1}return f.loaded=!0};r.prototype.ready=function(){return null!=this.Oc};r.prototype.ap=function(){for(var f=0;6>f;f++)if(!this.Ya[f].rf.complete)return!1;return!0};r.prototype.Sl=function(){for(var f=
this.o,c=this.O,a=c.M.levels,b=f.R,e=Date.now(),h=a.length-1;0<=h;h--){var m=a[h];if(!m.cache)for(var n in m.Ka)if(m.Ka.hasOwnProperty(n)){var q=m.Ka[n];0<q.lj&&q.lj--;q.visible||0<q.lj?(q.visible&&(q.Eh=e),q=this.fe.indexOf(q),-1!==q&&this.fe.splice(q,1)):-1===this.fe.indexOf(q)&&(q.level=m,this.fe.push(q))}}if(this.fe.length>1.1*c.Qp)for(this.fe.sort(function(v,t){return t.Eh-v.Eh});this.fe.length>c.Qp;)q=this.fe.pop(),q.Hb&&(b.deleteTexture(q.Hb),f.Nd--,q.Hb=0),q.M=null,q.ag&&(b.deleteBuffer(q.ag),
q.ag=0),n=q.level.Ka.indexOf(q),f.N("delete "+n+" "+(e-q.Eh)),delete q.level.Ka[n]};r.prototype.Nu=function(){var f=this.o;if(f.R){var c=this.o.R,a;for(a=0;a<f.V.length;a++){var b=f.V[a];if(!b.kd){y.ka.identity(this.za);y.ka.rotate(this.za,-f.X.m*Math.PI/180,[0,0,1]);y.ka.rotate(this.za,-f.u.m*Math.PI/180,[1,0,0]);y.ka.rotate(this.za,(180-f.pan.m)*Math.PI/180,[0,1,0]);y.ka.rotate(this.za,b.pan*Math.PI/180,[0,1,0]);y.ka.rotate(this.za,-b.u*Math.PI/180,[1,0,0]);y.ka.translate(this.za,[0,0,1]);y.ka.rotate(this.za,
b.tb*Math.PI/180,[0,0,1]);y.ka.rotate(this.za,-b.Ma*Math.PI/180,[0,1,0]);y.ka.rotate(this.za,b.Ia*Math.PI/180,[1,0,0]);var e=Math.tan(b.fov/2*Math.PI/180),h=b.aspect;h||(h=16/9);y.ka.scale(this.za,[e,e/h,1]);y.ka.translate(this.za,[0,0,-1]);c.bindBuffer(c.ARRAY_BUFFER,this.Jk);c.vertexAttribPointer(this.P.ia,3,c.FLOAT,!1,0,0);c.bindBuffer(c.ARRAY_BUFFER,this.Te);c.vertexAttribPointer(this.P.Ja,2,c.FLOAT,!1,0,0);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,b.texture);c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.td);c.uniform1i(this.P.qg,0);c.uniformMatrix4fv(this.P.Qh,!1,this.za);c.uniformMatrix4fv(this.P.ue,!1,this.xb);c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0)}}}};r.prototype.Mu=function(){var f=this.o,c;if(f.C.width!=f.da.offsetWidth||f.C.height!=
f.da.offsetHeight)f.C.width=f.da.offsetWidth,f.C.height=f.da.offsetHeight;f.he&&(f.Pc(0),f.cc());if(f.R){var a=f.R;a.useProgram(this.P);y.ka.identity(this.xb);y.ka.perspective(f.Gb(),f.wb.width/f.wb.height,.1,100,this.xb);a.uniformMatrix4fv(this.P.ue,!1,this.xb);this.tg(0);a.uniform1i(this.P.qg,0);a.uniformMatrix4fv(this.P.ue,!1,this.xb);a.uniformMatrix4fv(this.P.Qh,!1,this.za);a.enableVertexAttribArray(this.P.ia);a.enableVertexAttribArray(this.P.Ja);a.bindBuffer(a.ARRAY_BUFFER,this.Te);a.vertexAttribPointer(this.P.Ja,
2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.td);a.uniform1f(this.P.mk,1E-4);a.vertexAttribPointer(this.P.ia,3,a.FLOAT,!1,0,0);a.bindTexture(a.TEXTURE_2D,f.B.texture);for(c=0;1>c;c++)this.tg(0),a.bindBuffer(a.ARRAY_BUFFER,f.B.ek),a.vertexAttribPointer(this.P.ia,3,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,f.B.mi),a.vertexAttribPointer(this.P.Ja,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f.B.fj),a.uniform1i(this.P.qg,
0),a.uniformMatrix4fv(this.P.Qh,!1,this.za),a.uniformMatrix4fv(this.P.ue,!1,this.xb),a.drawElements(a.TRIANGLES,36,a.UNSIGNED_SHORT,0)}};r.prototype.Lu=function(){var f=this.o,c=f.R,a=f.B;if(0<f.V.length)for(var b=0;b<f.V.length;b++){var e=f.V[b];if(!e.kd&&e.isRunning&&e.rh!=e.j.currentTime&&(e.rh=e.j.currentTime,!e.aspect&&0<e.j.videoHeight&&(e.aspect=e.j.videoWidth/e.j.videoHeight),f.ui))try{e.texture&&(c.bindTexture(c.TEXTURE_2D,e.texture),c.texImage2D(c.TEXTURE_2D,0,c.RGB,c.RGB,c.UNSIGNED_BYTE,
e.j),f.update())}catch(m){f.N(m)}}if(a.j&&(b=Number(a.j.currentTime),a.rh!=b)){a.rh=b;try{var h=0<a.j.readyState;f.jj&&a.Rc&&(h=h&&0<a.j.currentTime);a.texture&&a.hg&&h&&(a.Rc=!0,a.width=a.j.videoWidth,a.height=a.j.videoHeight,c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,f.B.flipY),c.bindTexture(c.TEXTURE_2D,a.texture),c.texImage2D(c.TEXTURE_2D,0,c.RGB,c.RGB,c.UNSIGNED_BYTE,a.j),a.sm=!0,f.update())}catch(m){f.N(m)}}};r.prototype.Xo=function(){var f,c,a=this.o,b=this.o.R;a.mb.style.visibility="hidden";a.J.Dh!=
a.J.mode&&(a.J.Dh=a.J.mode);if((0<=a.J.mode||0<a.J.Lb.length)&&!a.D.pi){var e=1;0>=a.J.mode&&(e=0);3==a.J.mode&&(e=a.J.Da);for(f=0;f<a.K.length;f++){var h=a.K[f];if("poly"==h.type){var m=h.qf,n=e;2==a.J.mode&&(n=h.Da);var q=a.J.Lb.indexOf(h.id);-1!=q&&(n=a.J.vc[q]);if(0<m.length){q=[];for(c=0;c<m.length;c++)q.push(m[c].$b),q.push(m[c].Kb),q.push(0);b.useProgram(this.Sd);b.enable(b.BLEND);b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.SRC_ALPHA,b.ONE);b.disable(b.DEPTH_TEST);m=b.createBuffer();
b.bindBuffer(b.ARRAY_BUFFER,m);b.bufferData(b.ARRAY_BUFFER,new Float32Array(q),b.STATIC_DRAW);b.uniform2f(b.getUniformLocation(this.Sd,"uCanvasDimensions"),a.C.width,a.C.height);m=b.getUniformLocation(this.Sd,"uColor");c=h.Qb;b.uniform3f(m,(c>>16&255)/255,(c>>8&255)/255,(c&255)/255);var v=b.getUniformLocation(this.Sd,"uAlpha");b.uniform1f(v,h.Pb*n);b.vertexAttribPointer(this.Sd.ia,3,b.FLOAT,!1,0,0);b.drawArrays(b.LINE_LOOP,0,q.length/3);c=h.Ob;b.uniform3f(m,(c>>16&255)/255,(c>>8&255)/255,(c&255)/
255);b.uniform1f(v,h.Nb*n);b.enable(b.STENCIL_TEST);b.clearStencil(0);b.clear(b.STENCIL_BUFFER_BIT);b.colorMask(!1,!1,!1,!1);b.stencilFunc(b.ALWAYS,1,1);b.stencilOp(b.INCR,b.INCR,b.INCR);b.drawArrays(b.TRIANGLE_FAN,0,q.length/3);b.colorMask(!0,!0,!0,!0);b.stencilFunc(b.EQUAL,1,1);b.stencilOp(b.ZERO,b.ZERO,b.ZERO);b.drawArrays(b.TRIANGLE_FAN,0,q.length/3);b.disable(b.BLEND);b.enable(b.DEPTH_TEST);b.disable(b.STENCIL_TEST);b.useProgram(this.P)}}}}};r.prototype.Ku=function(){var f=this.o,c=this.O,a=
c.M;if(f.C.width!=f.da.offsetWidth||f.C.height!=f.da.offsetHeight)f.C.width=f.da.offsetWidth,f.C.height=f.da.offsetHeight;f.he&&(f.Pc(0),f.cc());if(f.R){var b=f.R;this.ak();b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT|b.STENCIL_BUFFER_BIT);b.disable(b.DEPTH_TEST);b.disable(b.CULL_FACE);b.useProgram(this.ih);var e=b.getUniformLocation(this.ih,"uRect");b.uniform2f(b.getUniformLocation(this.ih,"uCanvasDimensions"),f.C.width,f.C.height);b.activeTexture(b.TEXTURE0);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,
this.td);var h=b.getAttribLocation(this.ih,"aVertexPosition");b.disableVertexAttribArray(0);b.disableVertexAttribArray(1);b.disableVertexAttribArray(2);b.enableVertexAttribArray(h);b.bindBuffer(b.ARRAY_BUFFER,this.Te);b.vertexAttribPointer(h,2,b.FLOAT,!1,0,0);c.Yd=0;var m=100/f.fov.m;var n=a.width/a.height;h=f.C.height*m*n;m*=f.C.height;n=(f.pan.m/100/n-.5)*h+f.C.width/2;for(var q=(f.u.m/100-.5)*m+f.C.height/2,v,t,x,z=0;a.levels.length>=z+2&&a.levels[z+1].width>h;)z++;var C;var F=[];for(C=a.levels.length-
1;C>=z;){var E=a.levels[C];if(E.cache){var D={Mc:0,xd:0};D.Cd=E.Y-1;D.Dd=E.sa-1}else{D={};v=-q/m*(E.height/a.W);t=(-n+f.C.width)/h*(E.width/a.W);var A=(-q+f.C.height)/m*(E.height/a.W);D.Mc=Math.min(Math.max(0,Math.floor(-n/h*(E.width/a.W))),E.Y-1);D.xd=Math.min(Math.max(0,Math.floor(v)),E.sa-1);D.Cd=Math.min(Math.max(0,Math.floor(t)),E.Y-1);D.Dd=Math.min(Math.max(0,Math.floor(A)),E.sa-1)}F[C]=D;var G=!0;for(t=D.xd;t<=D.Dd;t++)for(v=D.Mc;v<=D.Cd;v++)x=v+t*E.Y,A=E.Ka[x],A||(A=new y.Og,E.Ka[x]=A),this.Oi()?
A.M||(this.qj(A,E,c.zg(0,C,v,t)),f.ob=!0):c.Yd++,A.M&&A.M.complete||(G=!1),A.visible=!0;D.Go=G;C--}for(C=a.levels.length-1;C>=z;){E=a.levels[C];if(F[C]&&0<=F[C].Mc)for(D=F[C],t=D.xd;t<=D.Dd;t++)for(v=D.Mc;v<=D.Cd;v++)x=v+t*E.Y,(A=E.Ka[x])&&A.M&&A.M.complete&&(f=n+(-a.$a+a.W*v)*h/E.width,b.uniform4f(e,f,q+(-a.$a+a.W*t)*m/E.height,A.M.width*h/E.width,A.M.height*m/E.height),A&&A.Hb&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.td),b.bindTexture(b.TEXTURE_2D,A.Hb),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,
b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0)));C--}this.Sl()}};r.prototype.tf=function(){var f=this.o.R;if(f&&this.Ya)for(;0<this.Ya.length;){var c=this.Ya.pop();c.Zs=!0;f.deleteTexture(c)}this.Oc&&(f.deleteTexture(this.Oc),this.Oc=null);this.Of=1E6;this.Ki=[!1,!1,!1,!1,!1,!1]};return r}();y.wq=w})(ggP2VR||
(ggP2VR={}));(function(y){var w=function(){return function(){this.Vh={kh:1,lh:1,Kh:0,Lh:0,wi:0,hk:0,scale:1};this.Fc=!0;this.Jf=[]}}();y.rq=function(){return function(){var r;this.Uf=Array(6);for(r=0;6>r;r++)this.Uf[r]=new w}}()})(ggP2VR||(ggP2VR={}));
(function(y){y.pq=function(){return function(){this.levels=[];this.Cj="0x000000";this.bp=!1;this.Io=this.Ho=.4;this.W=512;this.$a=1;this.zl=0;this.Al="";this.kp=this.height=this.width=0}}();y.Om=function(){return function(){this.height=this.width=0;this.sf=this.cache=!1;this.sa=this.Y=0;this.loaded=!1;this.Ka=[]}}();y.Og=function(){return function(){this.loaded=this.visible=!1;this.xe=this.Rl=0;this.cj=[];this.jl=0;this.hb=[];this.lj=this.Eh=this.Na=0}}()})(ggP2VR||(ggP2VR={}));
(function(y){var w=function(){function r(f,c){this.o=f;this.T=c;var a=this.__div=document.createElement("div");a.ggVisible=!0;var b=document.createElement("img");if(c.dd){var e=c.dd;b.setAttribute("style","position: absolute;width: "+c.Ue+"px; height: "+c.ud+"px;top: -"+c.ud/2+"px;left: -"+c.Ue/2+"px; "+f.eb+"user-select: none; max-width: none;")}else e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNqclmlIVFEUx997TjrplFQW2WKBBSYtRFlpWUILSSsRZRQIBdGHCFqIoKIvQRsUFRJC9LEgaSFbMMpcWi1pLzOLsjItKms0U5t5/c/wH7nc5o2jF374xrv87z33nHOPaRsRtbFgDpgJxoD+wATfwDNQDK6CyrCr5OcbhgiGIRsUAZt4QTWoIFXgp9JfAhY7rgdBl8NeBoLDYBloA+dBOagFTcDHcVEgDgwBGWA+OAcugvXgvb5wKMGJoAAMp9BpUA96EBf/Btsf8BI8AWfAErAcpHHDZeriliY2AVwDg8AucAQ0Ag+I4XhTm2Oxz8PT46KMbTx5EZjuJDgAnAVusJUm9DhYwalFcc59sIXXIaceFkowDySBPTRPL20xm+b7zYXa+N3CPrWJ6GuwGySA40HLBHc/GywFhbS5R1lEBrZy7FQwiSaX9pmnqeAYt+KUcew7BVZw/QKTq0ocpYPVvDOXItZCk2xgDIZqL8BR8Ab0VDbr4yZOgLeIwzQx6WiQxcCt1+6sld66L4yYtFSwF4yg2dU7/cEwGW9YVkAwmycp1dzdpvgm0DcCh4kHmxWzBls0uBX4qqmZJ4KzePm1IeJLgjmlC16aDKZpp5Q168B3o6wsSwTHgU+MIUs74RSj6y1d+212HKimJlUE+tFRfJpYtOKNXWmJTASqWf2Bu/R6+4TKHOrOzG4IhptjWgHbGkZvepQ6SQK7oRuCXzjX1DJavBEX1ygfT8FgBqpfm1zRDcEKbR2bsZlkJCdXieB1ZhZ5YtqVgXIPN+m9kbY6hpdb+d9fPncJRmZmqQheZkemJmgxyxykl3XWJEkcAl7N21s7PDcl5ZJ0PAa3wVwmWtVbZafPwQ7wLozYB7ATPNJO56d/LAikP9u+66KNJS1d4IOZp7wU0hfLukUyzgwm70T2N/DOxIy/eFdqawa5DL2NEGwP5k15Ja4woz9glvcomd9NzyvkFcQo5gomaLfm5c0svnKZ2k7q7+FauvR2MJKZR3+sY5WgtvkdG6JyELGhNHMTXyGfLviRJ5Tcd4Dlhle7086Sgp8CqVxDkn4OqHaqacr5ekjy3Q/W0FRNNGmoMtamdzdxsytZC0lqXKhEgWPVVgImg2NgFT1MHOoOk3yLEtgWN5TEOYvoIFI1rGM19//2wpAD7imF7lfwENwAxaASNCj90pcLLKdC2Iyw1M9gnEplMEp5kOU1f8WwKGJm8oUr9f8JMAAVMDM6HSDa9QAAAABJRU5ErkJggg%3D%3D",
b.setAttribute("style","position: absolute;width: 28px; height: 28px;top: -14px;left: -14px; "+f.eb+"user-select: none; max-width: none;");b.setAttribute("src",e);b.ondragstart=function(){return!1};a.appendChild(b);e="position:absolute;"+(f.eb+"user-select: none;");e+=f.eb+"touch-callout: none;";e+=f.eb+"tap-highlight-color: rgba(0,0,0,0);";f.Gc&&!f.pa&&(e+=f.eb+"transform: translateZ(9999999px);");a.setAttribute("style",e);a.onclick=function(){f.Ae(c);f.Gl(c.url,c.target);f.fa&&f.fa.hotspotProxyClick&&
f.fa.hotspotProxyClick(c.id,c.url)};a.ondblclick=function(){f.fa&&f.fa.hotspotProxyDoubleClick&&f.fa.hotspotProxyDoubleClick(c.id,c.url)};var h=f.J.Xj;if(h.enabled&&""!=c.title){var m=document.createElement("div");e="position:absolute;";e=c.dd?f.al()?e+("top: -"+(c.ud/2+20)+"px;"):e+("top: "+c.ud/2+"px;"):f.al()?e+"top:\t -50px;":e+"top:\t 20px;";e=h.ik?e+"white-space: pre-wrap;":e+"white-space: nowrap;";e+=f.eb+"transform-origin: 50% 50%;";m.setAttribute("style",e+"visibility: hidden;overflow: hidden;padding: 0px 1px 0px 1px;");
m.style.color=this.o.na(h.Yj,h.Wj);m.style.backgroundColor=h.background?this.o.na(h.Ob,h.Nb):"transparent";m.style.border="solid "+this.o.na(h.Qb,h.Pb)+" "+h.Di+"px";m.style.borderRadius=h.tk+"px";m.style.textAlign="center";0<h.width?(m.style.left=-h.width/2+"px",m.style.width=h.width+"px"):m.style.width="auto";m.style.height=0<h.height?h.height+"px":"auto";m.style.overflow="hidden";m.innerHTML=f.Kc(c.title);m.classList.add("ggskin");m.classList.add("ggdefaulthotspot");a.addEventListener("mouseover",
function(){0==h.width&&(m.style.left=-m.offsetWidth/2+"px");m.style.visibility="inherit";f.fa&&f.fa.hotspotProxyOver&&f.fa.hotspotProxyOver(c.id,c.url)});a.addEventListener("mouseout",function(){m.style.visibility="hidden";f.fa&&f.fa.hotspotProxyOut&&f.fa.hotspotProxyOut(c.id,c.url)});a.appendChild(m);this.Tp=m}a.addEventListener("mouseover",function(){f.Ae(c)});a.addEventListener("mouseout",function(){f.Ae(null)})}r.prototype.rs=function(){this.Tp&&(this.Tp.innerHTML=this.o.Kc(this.T.title))};return r}();
y.lq=w})(ggP2VR||(ggP2VR={}));(function(y){y.cd=function(){return function(){this.value=this.time=0;this.Dm="";this.Qe=this.Pe=this.Oe=this.Ne=this.ab=this.type=this.Cb=0;this.pd="";this.Sm=0}}();y.Lm=function(){return function(){this.Fu=this.Fq=this.length=0}}();y.Km=function(){return function(){}}()})(ggP2VR||(ggP2VR={}));
(function(y){var w=function(){function r(f){this.o=f;this.enabled=!1;this.Sg=1;this.If=0;this.type="crossdissolve";this.bd=this.ca=this.Wc=0;this.lk=20;this.jk=90;this.kk=20;this.Ng=1;this.Mg=!1;this.qm=this.pm=this.Mp=0;this.li=70;this.jq=0;this.Db=this.iq=1;this.Lg=this.Kg=.5;this.Me=!1;this.Lk=1}r.prototype.xh=function(){var f=this.o.R,c=f.createShader(f.VERTEX_SHADER);f.shaderSource(c,"attribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying vec2 vTextureCoord;\nuniform bool uZoomIn;\nuniform float uZoomFactor;\nuniform vec2 uZoomCenter;\nvoid main(void) {\n\t gl_Position = vec4(aVertexPosition, 1.0);\n\t if(!uZoomIn) {\n\t \n\t   vTextureCoord = aTextureCoord;\n\t }\n\t else {\n\t   vTextureCoord = (aTextureCoord - vec2(0.5, 0.5)) * (1.0/uZoomFactor) + uZoomCenter;\n\t }\n}\n");
f.compileShader(c);f.getShaderParameter(c,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(c)),c=null);var a=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uAlpha;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uAlpha);\n}\n");
f.compileShader(a);f.getShaderParameter(a,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(a)),a=null);this.Aa=f.createProgram();f.attachShader(this.Aa,c);f.attachShader(this.Aa,a);f.linkProgram(this.Aa);f.getProgramParameter(this.Aa,f.LINK_STATUS)||alert("Could not initialise shaders");this.Aa.ia=f.getAttribLocation(this.Aa,"aVertexPosition");f.enableVertexAttribArray(this.Aa.ia);this.Aa.Ja=f.getAttribLocation(this.Aa,"aTextureCoord");f.enableVertexAttribArray(this.Aa.Ja);a=f.createShader(f.FRAGMENT_SHADER);
f.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uColorPercent;\nuniform float uAlpha;\nuniform vec3 uDipColor;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x * (1.0 - uColorPercent) + uDipColor.x * uColorPercent, textureColor.y * (1.0 - uColorPercent) + uDipColor.y * uColorPercent, textureColor.z * (1.0 - uColorPercent) + uDipColor.z * uColorPercent, uAlpha);\n}\n");
f.compileShader(a);f.getShaderParameter(a,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(a)),a=null);this.bb=f.createProgram();f.attachShader(this.bb,c);f.attachShader(this.bb,a);f.linkProgram(this.bb);f.getProgramParameter(this.bb,f.LINK_STATUS)||alert("Could not initialise shaders");this.bb.ia=f.getAttribLocation(this.bb,"aVertexPosition");f.enableVertexAttribArray(this.bb.ia);this.bb.Ja=f.getAttribLocation(this.bb,"aTextureCoord");f.enableVertexAttribArray(this.bb.Ja);a=f.createShader(f.FRAGMENT_SHADER);
f.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform bool uRound;\nuniform float uRadius;\nuniform vec2 uRectDim;\nuniform vec2 uIrisCenter;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n float alpha = 0.0;\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n if (uRound) {\n\t  vec2 diff = uIrisCenter - gl_FragCoord.xy;\n\t   float distFromCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n\t   if (distFromCenter > uRadius) {\n      alpha = 1.0;\n    } else {\n      alpha = 1.0 - ((uRadius - distFromCenter) / uSoftEdge);\n    };\n }\n else {\n    float alphaFromLeft = 1.0 - ((gl_FragCoord.x -(uIrisCenter.x - uRectDim.x)) / uSoftEdge);\n    float alphaFromRight = 1.0 - (((uIrisCenter.x + uRectDim.x) - gl_FragCoord.x) / uSoftEdge);\n    float alphaFromTop = 1.0 - ((gl_FragCoord.y -(uIrisCenter.y - uRectDim.y)) / uSoftEdge);\n    float alphaFromBottom = 1.0 - (((uIrisCenter.y + uRectDim.y) - gl_FragCoord.y) / uSoftEdge);\n    alpha = max(max(alphaFromLeft, alphaFromRight), max(alphaFromTop, alphaFromBottom));\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
f.compileShader(a);f.getShaderParameter(a,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(a)),a=null);this.Qa=f.createProgram();f.attachShader(this.Qa,c);f.attachShader(this.Qa,a);f.linkProgram(this.Qa);f.getProgramParameter(this.Qa,f.LINK_STATUS)||alert("Could not initialise shaders");this.Qa.ia=f.getAttribLocation(this.Qa,"aVertexPosition");f.enableVertexAttribArray(this.Qa.ia);this.Qa.Ja=f.getAttribLocation(this.Qa,"aTextureCoord");f.enableVertexAttribArray(this.Qa.Ja);a=f.createShader(f.FRAGMENT_SHADER);
f.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uPercent;\nuniform int uDirection;\nuniform vec2 uCanvasDimensions;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n float alpha = 0.0;\n if (uDirection == 1) {\n\t if (gl_FragCoord.x > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.x) / uSoftEdge);\n  }\n }\n if (uDirection == 2) {\n\t if (gl_FragCoord.x < uCanvasDimensions.x - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.x - (uCanvasDimensions.x - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 3) {\n\t if (gl_FragCoord.y < uCanvasDimensions.y - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.y - (uCanvasDimensions.y - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 4) {\n\t if (gl_FragCoord.y > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.y) / uSoftEdge);\n  }\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
f.compileShader(a);f.getShaderParameter(a,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(a)),a=null);this.Va=f.createProgram();f.attachShader(this.Va,c);f.attachShader(this.Va,a);f.linkProgram(this.Va);f.getProgramParameter(this.Va,f.LINK_STATUS)||alert("Could not initialise shaders");this.Va.ia=f.getAttribLocation(this.Va,"aVertexPosition");f.enableVertexAttribArray(this.Va.ia);this.Va.Ja=f.getAttribLocation(this.Va,"aTextureCoord");f.enableVertexAttribArray(this.Va.Ja)};r.prototype.Pc=function(){var f=
this.o.R;if(!f)return!1;if(this.xc=f.createFramebuffer()){f.bindFramebuffer(f.FRAMEBUFFER,this.xc);this.xc.width=1024;this.xc.height=1024;this.zf=f.createTexture();f.bindTexture(f.TEXTURE_2D,this.zf);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,this.xc.width,this.xc.height,0,f.RGBA,f.UNSIGNED_BYTE,null);var c=f.createRenderbuffer();f.bindRenderbuffer(f.RENDERBUFFER,c);f.renderbufferStorage(f.RENDERBUFFER,
f.DEPTH_COMPONENT16,this.xc.width,this.xc.height);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,this.zf,0);f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,c);f.bindTexture(f.TEXTURE_2D,null);f.bindRenderbuffer(f.RENDERBUFFER,null);f.bindFramebuffer(f.FRAMEBUFFER,null);this.qb=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,this.qb);f.bufferData(f.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),f.STATIC_DRAW);this.qb.itemSize=3;this.qb.te=
4;this.og=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,this.og);f.bufferData(f.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),f.STATIC_DRAW);return!0}return!1};r.prototype.Il=function(f){var c=this.o.R,a=this.o.wb;if(this.Fd){c.useProgram(this.Aa);c.bindBuffer(c.ARRAY_BUFFER,this.qb);c.vertexAttribPointer(this.Aa.ia,this.qb.itemSize,c.FLOAT,!1,0,0);c.bindBuffer(c.ARRAY_BUFFER,this.og);c.vertexAttribPointer(this.Aa.Ja,2,c.FLOAT,!1,0,0);c.enableVertexAttribArray(this.Aa.ia);c.enableVertexAttribArray(this.Aa.Ja);
c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,this.zf);a=1+(this.Db-1)*f;var b=c.getUniformLocation(this.Aa,"uAlpha");c.uniform1f(b,1);b=c.getUniformLocation(this.Aa,"uZoomIn");c.uniform1i(b,1);b=c.getUniformLocation(this.Aa,"uZoomCenter");var e=.5+(this.Kg-.5)*Math.sqrt(f),h=.5+(this.Lg-.5)*Math.sqrt(f);0>e-.5/a&&(e=.5/a);0>h-.5/a&&(h=.5/a);1<e+.5/a&&(e=1-.5/a);1<h+.5/a&&(h=1-.5/a);c.uniform2f(b,e,h);e=c.getUniformLocation(this.Aa,"uZoomFactor");c.uniform1f(e,a);c.uniform1i(c.getUniformLocation(this.Aa,
"uSampler"),0);c.drawArrays(c.TRIANGLE_STRIP,0,this.qb.te);c.useProgram(this.o.ra.P)}else{this.o.si();c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.SRC_ALPHA,c.ONE);c.enable(c.BLEND);c.disable(c.DEPTH_TEST);e=.5+(this.Kg-.5);h=.5+(this.Lg-.5);0>e-.5/this.Db&&(e=.5/this.Db);0>h-.5/this.Db&&(h=.5/this.Db);1<e+.5/this.Db&&(e=1-.5/this.Db);1<h+.5/this.Db&&(h=1-.5/this.Db);if("crossdissolve"==this.type)c.useProgram(this.Aa),c.bindBuffer(c.ARRAY_BUFFER,this.qb),c.vertexAttribPointer(this.Aa.ia,
this.qb.itemSize,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,this.og),c.vertexAttribPointer(this.Aa.Ja,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,this.zf),b=c.getUniformLocation(this.Aa,"uAlpha"),c.uniform1f(b,1-f),b=c.getUniformLocation(this.Aa,"uZoomIn"),c.uniform1i(b,1==this.ca||2==this.ca||6==this.ca||7==this.ca?1:0),b=c.getUniformLocation(this.Aa,"uZoomCenter"),c.uniform2f(b,e,h),e=c.getUniformLocation(this.Aa,"uZoomFactor"),c.uniform1f(e,this.Db),c.uniform1i(c.getUniformLocation(this.Aa,
"uSampler"),0);else if("diptocolor"==this.type)c.useProgram(this.bb),c.bindBuffer(c.ARRAY_BUFFER,this.qb),c.vertexAttribPointer(this.bb.ia,this.qb.itemSize,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,this.og),c.vertexAttribPointer(this.bb.Ja,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,this.zf),c.uniform1f(c.getUniformLocation(this.bb,"uColorPercent"),Math.min(2*f,1)),b=c.getUniformLocation(this.bb,"uAlpha"),c.uniform1f(b,1-Math.max(2*(f-.5),0)),c.uniform3f(c.getUniformLocation(this.bb,
"uDipColor"),(this.If>>16&255)/255,(this.If>>8&255)/255,(this.If&255)/255),b=c.getUniformLocation(this.bb,"uZoomIn"),c.uniform1i(b,1==this.ca||2==this.ca||6==this.ca||7==this.ca?1:0),b=c.getUniformLocation(this.bb,"uZoomCenter"),c.uniform2f(b,e,h),e=c.getUniformLocation(this.bb,"uZoomFactor"),c.uniform1f(e,this.Db),c.uniform1i(c.getUniformLocation(this.bb,"uSampler"),0);else if("irisround"==this.type||"irisroundcenter"==this.type||"irisrectangular"==this.type||"irisrectangularcenter"==this.type){c.useProgram(this.Qa);
c.bindBuffer(c.ARRAY_BUFFER,this.qb);c.vertexAttribPointer(this.Qa.ia,this.qb.itemSize,c.FLOAT,!1,0,0);c.bindBuffer(c.ARRAY_BUFFER,this.og);c.vertexAttribPointer(this.Qa.Ja,2,c.FLOAT,!1,0,0);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,this.zf);if(1==this.ca||2==this.ca||6==this.ca||7==this.ca||"irisroundcenter"==this.type||"irisrectangularcenter"==this.type)var m=b=.5;else b=this.Kg,m=this.Lg;var n=b*a.width,q=m*a.height;n=Math.max(n,a.width-n);q=Math.max(q,a.height-q);"irisround"==this.type||
"irisroundcenter"==this.type?c.uniform1f(c.getUniformLocation(this.Qa,"uRadius"),(Math.sqrt(n*n+q*q)+this.Wc)*f):(n>q?(q=a.height/a.width*n+this.Wc,n+=this.Wc):(n=a.width/a.height*q+this.Wc,q+=this.Wc),c.uniform2f(c.getUniformLocation(this.Qa,"uRectDim"),n*f,q*f));f=c.getUniformLocation(this.Qa,"uSoftEdge");c.uniform1f(f,this.Wc);c.uniform1i(c.getUniformLocation(this.Qa,"uRound"),"irisround"==this.type||"irisroundcenter"==this.type?1:0);c.uniform2f(c.getUniformLocation(this.Qa,"uIrisCenter"),b*a.width,
m*a.height);b=c.getUniformLocation(this.Qa,"uZoomIn");c.uniform1i(b,1==this.ca||2==this.ca||6==this.ca||7==this.ca?1:0);b=c.getUniformLocation(this.Qa,"uZoomCenter");c.uniform2f(b,e,h);e=c.getUniformLocation(this.Qa,"uZoomFactor");c.uniform1f(e,this.Db);c.uniform1i(c.getUniformLocation(this.Qa,"uSampler"),0)}else if("wipeleftright"==this.type||"wiperightleft"==this.type||"wipetopbottom"==this.type||"wipebottomtop"==this.type||"wiperandom"==this.type)c.useProgram(this.Va),c.bindBuffer(c.ARRAY_BUFFER,
this.qb),c.vertexAttribPointer(this.Va.ia,this.qb.itemSize,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,this.og),c.vertexAttribPointer(this.Va.Ja,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,this.zf),c.uniform1f(c.getUniformLocation(this.Va,"uPercent"),3>this.Lk?f*(a.width+this.Wc):f*(a.height+this.Wc)),f=c.getUniformLocation(this.Va,"uSoftEdge"),c.uniform1f(f,this.Wc),c.uniform1i(c.getUniformLocation(this.Va,"uDirection"),this.Lk),c.uniform2f(c.getUniformLocation(this.Va,
"uCanvasDimensions"),a.width,a.height),b=c.getUniformLocation(this.Va,"uZoomIn"),c.uniform1i(b,1==this.ca||2==this.ca||6==this.ca||7==this.ca?1:0),b=c.getUniformLocation(this.Va,"uZoomCenter"),c.uniform2f(b,e,h),e=c.getUniformLocation(this.Va,"uZoomFactor"),c.uniform1f(e,this.Db),c.uniform1i(c.getUniformLocation(this.Va,"uSampler"),0);c.drawArrays(c.TRIANGLE_STRIP,0,this.qb.te);c.useProgram(this.o.ra.P);c.disable(c.BLEND);c.enable(c.DEPTH_TEST)}};return r}();y.nq=w})(ggP2VR||(ggP2VR={}));
(function(y){var w=function(){function r(f){this.ri=[];this.o=f;this.enabled=!1;this.Cb=2;this.nn=!1}r.prototype.yn=function(f){if(2==f.mode||3==f.mode||5==f.mode){var c=this.o.xa.currentTime;if(f.Fb&&f.Fb.gain&&f.Xb&&f.Vb&&f.Wb){var a=f.Xb.gain.value,b=f.Vb.gain.value,e=f.Wb.gain.value;f.Fb.gain.linearRampToValueAtTime(f.Fb.gain.value,c);f.Fb.gain.linearRampToValueAtTime(0,c+this.Cb);f.Xb.gain.linearRampToValueAtTime(a,c);f.Xb.gain.linearRampToValueAtTime(0,c+this.Cb);f.Vb.gain.linearRampToValueAtTime(b,
c);f.Vb.gain.linearRampToValueAtTime(0,c+this.Cb);f.Wb.gain.linearRampToValueAtTime(e,c);f.Wb.gain.linearRampToValueAtTime(0,c+this.Cb)}}else c=this.o.xa.currentTime,f.kc&&f.kc.gain&&(f.kc.gain.linearRampToValueAtTime(f.kc.gain.value,c),f.kc.gain.linearRampToValueAtTime(0,c+this.Cb));f.Tk=!0;setTimeout(function(){f.ye()},1E3*this.Cb+5)};r.prototype.tu=function(){for(var f=0;f<this.o.S.length;f++){var c=this.o.S[f];-1==this.o.wc.indexOf(c.id)&&(-1==this.o.wc.indexOf("_main")||-1!=this.o.Je.indexOf(c.id))&&
!this.o.isPlaying(c.id)&&-1<c.loop&&4!=c.mode&&6!=c.mode&&(c.va?c.de():(c.Hd&&c.Ef(),c.j.play(),c.j.currentTime=0))}};r.prototype.hr=function(){var f=(this.o.xa.currentTime-this.qu)/this.Cb;f=Math.min(1,f);for(var c=0;c<this.o.S.length;c++){var a=this.o.S[c];this.o.isPlaying(a.id)&&1>a.ua&&(a.ua=f)}1==f&&clearInterval(this.pu)};return r}();y.oq=w})(ggP2VR||(ggP2VR={}));
(function(y){var w=function(){function r(f){this.Ih=[];this.rd=null;this.tc=[];this.fc=[];this.uc=[];this.gm=!0;this.o=f;this.Yq()}r.prototype.xh=function(){var f=this.o.R,c=f.createShader(f.VERTEX_SHADER);f.shaderSource(c,"attribute vec3 aVertexPosition;\nvoid main(void) {\n gl_Position = vec4(aVertexPosition, 1.0);\n}\n");f.compileShader(c);f.getShaderParameter(c,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(c)),c=null);var a=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCanvasDimensions;\nuniform vec2 uFlareCenterPosition;\nuniform float uBlindingValue;\nuniform float uAspectRatio;\nvoid main(void) {\n float canvasDiag = sqrt( (uCanvasDimensions.x * uCanvasDimensions.x) + (uCanvasDimensions.y * uCanvasDimensions.y) );\n vec2 diff = uFlareCenterPosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromFlarePoint = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = (distFromFlarePoint / canvasDiag) / 10.0;\n gl_FragColor = vec4(1.0, 1.0, 1.0, pow(((1.0 - factor) * 0.8) * uBlindingValue, 2.0));\n}\n");
f.compileShader(a);f.getShaderParameter(a,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(a)),a=null);this.zc=f.createProgram();f.attachShader(this.zc,c);f.attachShader(this.zc,a);f.linkProgram(this.zc);f.getProgramParameter(this.zc,f.LINK_STATUS)||alert("Could not initialise shaders");this.zc.ia=f.getAttribLocation(this.zc,"aVertexPosition");f.enableVertexAttribArray(this.zc.ia);a=f.createShader(f.VERTEX_SHADER);c=f.createShader(f.VERTEX_SHADER);f.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
f.compileShader(a);f.getShaderParameter(a,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(a)),a=null);f.shaderSource(c,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
f.compileShader(c);f.getShaderParameter(c,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(c)),a=null);var b=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(b,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCircleTexturePosition;\nuniform vec3 uCircleColor;\nuniform float uCircleRadius;\nuniform float uCircleAlpha;\nuniform float uCircleSoftness;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 diff = uCircleTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromCircleCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float softnessDistance = uCircleRadius * (1.0 - uCircleSoftness);\n if (distFromCircleCenter > uCircleRadius)\n {\n\t  gl_FragColor = vec4(uCircleColor, 0.0);\n }\n else if (distFromCircleCenter <= (softnessDistance))\n {\n\t  float factor = distFromCircleCenter / softnessDistance;\n\t  gl_FragColor = vec4(uCircleColor, pow((1.0 - (0.2 * factor)) * uCircleAlpha, 1.8));\n }\n else\n {\n\t  float factor = (distFromCircleCenter - softnessDistance) / (uCircleRadius - softnessDistance);\n\t  gl_FragColor = vec4(uCircleColor, pow((0.8 - (0.8 * factor)) * uCircleAlpha, 1.8));\n }\n}\n");
f.compileShader(b);f.getShaderParameter(b,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(b)),b=null);this.Ba=f.createProgram();f.attachShader(this.Ba,a);f.attachShader(this.Ba,b);f.linkProgram(this.Ba);f.getProgramParameter(this.Ba,f.LINK_STATUS)||alert("Could not initialise shaders");this.Ba.ia=f.getAttribLocation(this.Ba,"aVertexPosition");f.enableVertexAttribArray(this.Ba.ia);a=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uRingTexturePosition;\nuniform float uRingRadius;\nuniform float uRingAlpha;\nuniform float uAspectRatio;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec2 diff = uRingTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromRingCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = distFromRingCenter / uRingRadius;\n if (distFromRingCenter > uRingRadius)\n {\n\t gl_FragColor = vec4(1.0, 1.0, 1.0, 0.0);\n }\n else\n {\n vec4 textureColor = texture2D(uSampler, vec2(factor / uAspectRatio, 0.5));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uRingAlpha);\n }\n}\n");
f.compileShader(a);f.getShaderParameter(a,f.COMPILE_STATUS)||(alert(f.getShaderInfoLog(a)),a=null);this.Ab=f.createProgram();f.attachShader(this.Ab,c);f.attachShader(this.Ab,a);f.linkProgram(this.Ab);f.getProgramParameter(this.Ab,f.LINK_STATUS)||alert("Could not initialise shaders");this.Ab.ia=f.getAttribLocation(this.Ab,"aVertexPosition")};r.prototype.Pc=function(){var f=this.o.R;this.Md=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,this.Md);f.bufferData(f.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,
-1,0,1,1,0,-1,1,0]),f.STATIC_DRAW);this.Md.itemSize=3;this.Md.te=4;this.Yf=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,this.Yf);for(var c=[0,0,0],a=2*Math.PI/6,b=Math.PI/180*35,e=1,h=b;h<=b+2*Math.PI;h+=a)c.push(Math.sin(h)),c.push(-Math.cos(h)),c.push(0),e++;f.bufferData(f.ARRAY_BUFFER,new Float32Array(c),f.STATIC_DRAW);this.Yf.itemSize=3;this.Yf.te=e;this.np=f.createTexture();f.bindTexture(f.TEXTURE_2D,this.np);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,
f.TEXTURE_MAG_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);c=document.createElement("canvas");c.width=100;c.height=1;a=c.getContext("2d");a.width=100;a.height=1;b=a.createLinearGradient(0,0,100,0);b.addColorStop(0,this.o.na(0,0));b.addColorStop(.88,this.o.na(0,0));b.addColorStop(.9,this.o.na(16654848,1));b.addColorStop(.92,this.o.na(16776448,1));b.addColorStop(.94,this.o.na(4849466,1));b.addColorStop(.96,
this.o.na(131071,1));b.addColorStop(.98,this.o.na(8190,1));b.addColorStop(1,this.o.na(0,0));a.fillStyle=b;a.fillRect(0,0,100,1);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,c)};r.prototype.zt=function(){for(;0<this.Ih.length;)this.Ih.pop()};r.prototype.Yq=function(){var f=[],c=[],a=[];var b={radius:14,alpha:.2,color:11390415,A:.27};f.push(b);b={radius:20,alpha:.25,color:11390415,A:.4};f.push(b);b={radius:10,alpha:.2,color:12442332,A:.6};f.push(b);b={radius:15,alpha:.2,color:11390415,
A:.8};f.push(b);b={radius:10,alpha:.2,color:12442332,A:1.5};f.push(b);b={radius:15,alpha:.2,color:11390415,A:1.8};f.push(b);b={radius:8,alpha:.2,color:12575203,G:.8,A:.7};c.push(b);b={radius:7,alpha:.4,color:12575203,G:.5,A:1.6};c.push(b);b={radius:5,alpha:.4,color:12575203,G:.6,A:.9};c.push(b);b={radius:8,alpha:.3,color:12575203,G:.4,A:1.1};c.push(b);this.tc.push(f);this.fc.push(c);this.uc.push(a);f=[];c=[];a=[];b={radius:30,alpha:.3,color:11390415,A:.5};f.push(b);b={radius:10,alpha:.3,color:11390415,
A:1};f.push(b);b={radius:20,alpha:.3,color:11390415,A:1.3};f.push(b);b={radius:10,alpha:.3,color:11390415,A:1.5};f.push(b);b={radius:15,alpha:.3,color:11390415,A:1.8};f.push(b);b={radius:10,alpha:.3,color:15506856,G:.8,A:.7};c.push(b);b={radius:20,alpha:.5,color:15506856,G:.5,A:1.6};c.push(b);b={radius:5,alpha:.5,color:15506856,G:.6,A:.9};c.push(b);b={radius:60,alpha:.4,color:15506856,G:.2,A:1.1};c.push(b);a.push({radius:220,alpha:.035,A:2});this.tc.push(f);this.fc.push(c);this.uc.push(a);f=[];c=
[];a=[];b={radius:30,alpha:.5,color:15465727,A:.5};f.push(b);b={radius:40,alpha:.28,color:15726842,A:.8};f.push(b);b={radius:25,alpha:.32,color:15726842,A:1.1};f.push(b);b={radius:15,alpha:.25,color:15726842,A:1.35};f.push(b);b={radius:10,alpha:.28,color:15465727,A:1.65};f.push(b);b={radius:10,alpha:.45,color:15465727,G:.8,A:.7};c.push(b);b={radius:7,alpha:.5,color:15465727,G:.4,A:.9};c.push(b);b={radius:40,alpha:.4,color:15465727,G:.3,A:.38};c.push(b);b={radius:50,alpha:.4,color:15465727,G:.5,A:1.25};
c.push(b);b={radius:18,alpha:.2,color:15465727,G:.5,A:1.25};c.push(b);b={radius:10,alpha:.34,color:15726842,G:.8,A:1.5};c.push(b);b={radius:38,alpha:.37,color:15465727,G:.3,A:-.5};c.push(b);this.tc.push(f);this.fc.push(c);this.uc.push(a);f=[];c=[];a=[];b={radius:16,alpha:.5,color:16363159,A:.1};f.push(b);b={radius:26,alpha:.3,color:16091819,A:.32};f.push(b);b={radius:29,alpha:.2,color:16091819,A:1.32};f.push(b);b={radius:20,alpha:.18,color:16363159,A:1.53};f.push(b);b={radius:27,alpha:.13,color:16425092,
A:1.6};f.push(b);b={radius:20,alpha:.1,color:16091819,A:1.75};f.push(b);b={radius:12,alpha:.45,color:16312238,G:.45,A:.2};c.push(b);b={radius:8,alpha:.25,color:16434209,G:.7,A:.33};c.push(b);b={radius:9,alpha:.25,color:16091819,G:.4,A:.7};c.push(b);b={radius:7,alpha:.2,color:16091819,G:.4,A:.85};c.push(b);b={radius:60,alpha:.23,color:16091819,G:.55,A:1.05};c.push(b);b={radius:37,alpha:.1,color:16091819,G:.55,A:1.22};c.push(b);b={radius:10,alpha:.25,color:16363159,G:.65,A:1.38};c.push(b);b={radius:7,
alpha:.2,color:16434209,G:.5,A:1.45};c.push(b);b={radius:3,alpha:.2,color:16416033,G:.5,A:1.78};c.push(b);b={radius:6,alpha:.18,color:16434209,G:.45,A:1.9};c.push(b);b={radius:4,alpha:.14,color:16766514,G:.45,A:2.04};c.push(b);b={radius:30,alpha:.14,color:16766514,G:.8,A:.04};c.push(b);this.tc.push(f);this.fc.push(c);this.uc.push(a);f=[];c=[];a=[];b={radius:9,alpha:.3,color:14346999,G:.3,A:.3};c.push(b);b={radius:5,alpha:.5,color:14148072,G:.8,A:.6};c.push(b);b={radius:3,alpha:.37,color:14346999,
G:.66,A:.8};c.push(b);b={radius:45,alpha:.2,color:14346999,G:.36,A:1.2};c.push(b);b={radius:13,alpha:.2,color:14346999,G:.36,A:1.23};c.push(b);b={radius:11,alpha:.2,color:14148072,G:.36,A:1.28};c.push(b);b={radius:27,alpha:.16,color:14346999,G:.36,A:1.55};c.push(b);b={radius:6,alpha:.36,color:14148072,G:.8,A:1.7};c.push(b);this.tc.push(f);this.fc.push(c);this.uc.push(a);f=[];c=[];a=[];b={radius:24,alpha:.2,color:15186464,A:.2};f.push(b);b={radius:7,alpha:.26,color:15186464,A:.35};f.push(b);b={radius:23,
alpha:.18,color:15186464,A:.65};f.push(b);b={radius:13,alpha:.2,color:15186464,A:.8};f.push(b);b={radius:11,alpha:.15,color:15186464,A:1.4};f.push(b);b={radius:15,alpha:.11,color:15451904,A:1.6};f.push(b);b={radius:6,alpha:.45,color:15579138,G:.45,A:.22};c.push(b);b={radius:3,alpha:.3,color:15451904,G:.25,A:.4};c.push(b);b={radius:4,alpha:.2,color:15451904,G:.25,A:.45};c.push(b);b={radius:65,alpha:.17,color:15186464,G:.25,A:.5};c.push(b);b={radius:5,alpha:.45,color:15579138,G:.45,A:.88};c.push(b);
b={radius:140,alpha:.18,color:15579138,G:.32,A:.95};c.push(b);b={radius:12,alpha:.22,color:15579138,G:.32,A:1.1};c.push(b);b={radius:8,alpha:.32,color:15451904,G:.72,A:1.2};c.push(b);b={radius:55,alpha:.2,color:15451904,G:.45,A:1.33};c.push(b);b={radius:4,alpha:.3,color:15451904,G:.25,A:1.42};c.push(b);this.tc.push(f);this.fc.push(c);this.uc.push(a);f=[];c=[];a=[];b={radius:16,alpha:.4,color:10933495,A:.32};f.push(b);b={radius:14,alpha:.3,color:11007484,A:.36};f.push(b);b={radius:10,alpha:.3,color:4037331,
A:.58};f.push(b);b={radius:14,alpha:.22,color:8835068,A:.68};f.push(b);b={radius:10,alpha:.27,color:11007484,A:.82};f.push(b);b={radius:11,alpha:.27,color:10867450,A:1};f.push(b);b={radius:9,alpha:.2,color:6158332,A:1.05};f.push(b);b={radius:10,alpha:.17,color:10867450,A:1.78};f.push(b);b={radius:10,alpha:.3,color:4037331,A:-.23};f.push(b);b={radius:8,alpha:.45,color:8835068,G:.45,A:.175};c.push(b);b={radius:7,alpha:.4,color:12574715,G:.55,A:.46};c.push(b);b={radius:3,alpha:.3,color:10867450,G:.35,
A:.5};c.push(b);b={radius:60,alpha:.37,color:4031699,G:.75,A:.75};c.push(b);b={radius:3,alpha:.25,color:4031699,G:.25,A:.75};c.push(b);b={radius:3,alpha:.2,color:6158332,G:.25,A:.9};c.push(b);b={radius:7,alpha:.45,color:8835068,G:.45,A:1.3};c.push(b);b={radius:32,alpha:.22,color:8835068,G:.75,A:1.62};c.push(b);b={radius:9,alpha:.45,color:4031699,G:.65,A:1.6};c.push(b);b={radius:8,alpha:.25,color:4031699,G:.65,A:1.83};c.push(b);b={radius:7,alpha:.4,color:12574715,G:.55,A:-.18};c.push(b);this.tc.push(f);
this.fc.push(c);this.uc.push(a);f=[];c=[];a=[];b={radius:16,alpha:.4,color:16389120,A:.32};f.push(b);b={radius:26,alpha:.22,color:16389120,A:.4};f.push(b);b={radius:26,alpha:.25,color:16389120,A:.65};f.push(b);b={radius:18,alpha:.3,color:16389120,A:1.23};f.push(b);b={radius:14,alpha:.26,color:16389120,A:1.33};f.push(b);b={radius:17,alpha:.18,color:16389120,A:1.7};f.push(b);b={radius:30,alpha:.16,color:16389120,A:2.15};f.push(b);b={radius:100,alpha:.25,color:16389120,G:.22,A:1.45};c.push(b);b={radius:7,
alpha:.5,color:15628151,G:.3,A:1.5};c.push(b);b={radius:3,alpha:.5,color:15628151,G:.3,A:1.52};c.push(b);b={radius:4,alpha:.5,color:16389120,G:.3,A:1.745};c.push(b);b={radius:9,alpha:.22,color:16389120,G:.3,A:1.8};c.push(b);this.tc.push(f);this.fc.push(c);this.uc.push(a);f=[];c=[];a=[];b={radius:16,alpha:.4,color:10933495,A:.32};f.push(b);b={radius:14,alpha:.3,color:11007484,A:.36};f.push(b);b={radius:10,alpha:.3,color:4037331,A:.58};f.push(b);b={radius:14,alpha:.22,color:8835068,A:.68};f.push(b);
b={radius:10,alpha:.27,color:11007484,A:.82};f.push(b);b={radius:11,alpha:.27,color:10867450,A:1};f.push(b);b={radius:9,alpha:.2,color:6158332,A:1.05};f.push(b);b={radius:10,alpha:.17,color:10867450,A:1.78};f.push(b);b={radius:10,alpha:.3,color:4037331,A:-.23};f.push(b);b={radius:8,alpha:.45,color:8835068,G:.45,A:.175};c.push(b);b={radius:7,alpha:.4,color:12574715,G:.55,A:.46};c.push(b);b={radius:3,alpha:.3,color:10867450,G:.35,A:.5};c.push(b);b={radius:60,alpha:.37,color:4031699,G:.75,A:.75};c.push(b);
b={radius:3,alpha:.25,color:4031699,G:.25,A:.75};c.push(b);b={radius:3,alpha:.2,color:6158332,G:.25,A:.9};c.push(b);b={radius:7,alpha:.45,color:8835068,G:.45,A:1.3};c.push(b);b={radius:32,alpha:.22,color:8835068,G:.75,A:1.62};c.push(b);b={radius:9,alpha:.45,color:4031699,G:.65,A:1.6};c.push(b);b={radius:8,alpha:.25,color:4031699,G:.65,A:1.83};c.push(b);b={radius:7,alpha:.4,color:12574715,G:.55,A:-.18};c.push(b);this.tc.push(f);this.fc.push(c);this.uc.push(a);f=[];c=[];a=[];b={radius:16,alpha:.4,color:16389120,
A:.32};f.push(b);b={radius:26,alpha:.22,color:16389120,A:.4};f.push(b);b={radius:26,alpha:.25,color:16389120,A:.65};f.push(b);b={radius:18,alpha:.3,color:16389120,A:1.23};f.push(b);b={radius:14,alpha:.26,color:16389120,A:1.33};f.push(b);b={radius:17,alpha:.18,color:16389120,A:1.7};f.push(b);b={radius:30,alpha:.16,color:16389120,A:2.15};f.push(b);b={radius:100,alpha:.25,color:16389120,G:.22,A:1.45};c.push(b);b={radius:7,alpha:.5,color:15628151,G:.3,A:1.5};c.push(b);b={radius:3,alpha:.5,color:15628151,
G:.3,A:1.52};c.push(b);b={radius:4,alpha:.5,color:16389120,G:.3,A:1.745};c.push(b);b={radius:9,alpha:.22,color:16389120,G:.3,A:1.8};c.push(b);this.tc.push(f);this.fc.push(c);this.uc.push(a);f=[];c=[];a=[];b={radius:24,alpha:.2,color:15186464,A:.2};f.push(b);b={radius:7,alpha:.26,color:15186464,A:.35};f.push(b);b={radius:23,alpha:.18,color:15186464,A:.65};f.push(b);b={radius:13,alpha:.2,color:15186464,A:.8};f.push(b);b={radius:11,alpha:.15,color:15186464,A:1.4};f.push(b);b={radius:15,alpha:.11,color:15451904,
A:1.6};f.push(b);b={radius:6,alpha:.45,color:15579138,G:.45,A:.22};c.push(b);b={radius:3,alpha:.3,color:15451904,G:.25,A:.4};c.push(b);b={radius:4,alpha:.2,color:15451904,G:.25,A:.45};c.push(b);b={radius:65,alpha:.17,color:15186464,G:.25,A:.5};c.push(b);b={radius:5,alpha:.45,color:15579138,G:.45,A:.88};c.push(b);b={radius:140,alpha:.18,color:15579138,G:.32,A:.95};c.push(b);b={radius:12,alpha:.22,color:15579138,G:.32,A:1.1};c.push(b);b={radius:8,alpha:.32,color:15451904,G:.72,A:1.2};c.push(b);b={radius:55,
alpha:.2,color:15451904,G:.45,A:1.33};c.push(b);b={radius:4,alpha:.3,color:15451904,G:.25,A:1.42};c.push(b);this.tc.push(f);this.fc.push(c);this.uc.push(a)};r.prototype.kt=function(){if(this.gm){var f=this.o.R,c,a=new y.Ra(0,0,-100),b=this.o.Ye(),e=0,h=0,m=!1;if(this.o.pa){var n=this.o.wb.width;var q=this.o.wb.height;this.o.D.pi&&(n=this.o.D.xc.width,q=this.o.D.xc.height)}else{this.aa||(this.aa=this.rd.getContext("2d"));if(this.aa.width!==this.o.C.width||this.aa.height!==this.o.C.height)this.aa.width=
this.o.C.width,this.aa.height=this.o.C.height;this.aa.clear?this.aa.clear():this.aa.clearRect(0,0,this.rd.width,this.rd.height);n=this.aa.width;q=this.aa.height}var v=Math.sqrt(n*n+q*q),t=v/800;for(c=0;c<this.Ih.length;c++){var x=this.Ih[c];a.init(0,0,-100);a.Ia(-x.u*Math.PI/180);a.Ma(x.pan*Math.PI/180);a.Ma(-this.o.pan.m*Math.PI/180);a.Ia(this.o.u.m*Math.PI/180);a.tb(this.o.X.m*Math.PI/180);if(-.01>a.z){h=-b/a.z;e=a.x*h;h*=a.y;var z=Math.max(n,q);Math.abs(e)<z/2+100&&Math.abs(h)<z/2+100&&(m=!0,e+=
n/2,h+=q/2)}if(m){this.o.pa&&(f.blendFunc(f.SRC_ALPHA,f.ONE),f.enable(f.BLEND),f.disable(f.DEPTH_TEST));z=n/2;var C=q/2;var F=Math.sqrt((z-e)*(z-e)+(C-h)*(C-h));var E=v/2;C=n>q?n:q;z=x.$m/100*((E-F)/E);0>z&&(z=0);if(this.o.pa){f.useProgram(this.zc);f.bindBuffer(f.ARRAY_BUFFER,this.o.D.qb);f.vertexAttribPointer(this.zc.ia,this.o.D.qb.itemSize,f.FLOAT,!1,0,0);var D=f.getUniformLocation(this.zc,"uCanvasDimensions");f.uniform2f(D,f.drawingBufferWidth,f.drawingBufferHeight);f.uniform2f(f.getUniformLocation(this.zc,
"uFlareCenterPosition"),f.drawingBufferWidth/n*e,q-f.drawingBufferHeight/q*h);f.uniform1f(f.getUniformLocation(this.zc,"uBlindingValue"),z);D=f.getUniformLocation(this.zc,"uAspectRatio");f.uniform1f(D,this.o.D.pi?f.drawingBufferWidth/f.drawingBufferHeight:f.drawingBufferWidth/f.drawingBufferHeight/(n/q));f.drawArrays(f.TRIANGLE_STRIP,0,this.o.D.qb.te)}else D=this.aa.createRadialGradient(e,h,1,e,h,C),D.addColorStop(0,"rgba(255, 255, 255, "+z+")"),D.addColorStop(.5,"rgba(255, 255, 255, "+.8*z+")"),
D.addColorStop(1,"rgba(255, 255, 255, "+.6*z+")"),this.aa.fillStyle=D,this.aa.fillRect(0,0,this.aa.width,this.aa.height);if(0!=Number(x.type)&&!this.o.D.pi){z=n/2-e;C=q/2-h;var A=1,G=Number(x.type)-1;F<.35*E&&(A=F/(.35*E),A*=A);F>.7*E&&(A=(E-F)/(.3*E));A*=x.alpha/100;if(0<this.tc[G].length)for(F=0;F<this.tc[G].length;F++){var J=this.tc[G][F];E=J.radius*t;var H=J.alpha*A;0>H&&(H=0);var I=J.color;if(8==G||9==G||10==G)I=x.color;if(this.o.pa)f.useProgram(this.Ba),f.bindBuffer(f.ARRAY_BUFFER,this.Yf),
f.vertexAttribPointer(this.Ba.ia,this.Yf.itemSize,f.FLOAT,!1,0,0),D=f.getUniformLocation(this.Ba,"uCanvasDimensions2"),f.uniform2f(D,f.drawingBufferWidth,f.drawingBufferHeight),f.uniform2f(f.getUniformLocation(this.Ba,"uCirclePosition"),f.drawingBufferWidth/n*(e+z*J.A),f.drawingBufferWidth/n*(q-(h+C*J.A))),f.uniform2f(f.getUniformLocation(this.Ba,"uCircleTexturePosition"),f.drawingBufferWidth/n*(e+z*J.A),q-(h+C*J.A)),f.uniform1f(f.getUniformLocation(this.Ba,"uCircleRadius"),E),f.uniform3f(f.getUniformLocation(this.Ba,
"uCircleColor"),(I>>16&255)/255,(I>>8&255)/255,(I&255)/255),f.uniform1f(f.getUniformLocation(this.Ba,"uCircleAlpha"),H),f.uniform1f(f.getUniformLocation(this.Ba,"uCircleSoftness"),.1),D=f.getUniformLocation(this.Ba,"uAspectRatio"),f.uniform1f(D,f.drawingBufferWidth/f.drawingBufferHeight/(n/q)),f.drawArrays(f.TRIANGLE_FAN,0,this.Yf.te);else{this.aa.save();this.aa.translate(e+z*J.A,h+C*J.A);D=this.aa.createRadialGradient(0,0,1,0,0,1.1*E);D.addColorStop(0,this.o.na(I,H));D.addColorStop(.65,this.o.na(I,
.9*H));D.addColorStop(.8,this.o.na(I,.7*H));D.addColorStop(1,this.o.na(I,.2*H));this.aa.beginPath();I=2*Math.PI/6;J=Math.PI/180*35;var M=!0;for(H=J;H<=J+2*Math.PI;H+=I)M?(this.aa.moveTo(E*Math.sin(H),E*Math.cos(H)),M=!1):this.aa.lineTo(E*Math.sin(H),E*Math.cos(H));this.aa.closePath();this.aa.fillStyle=D;this.aa.fill();this.aa.restore()}}if(0<this.fc[G].length)for(F=0;F<this.fc[G].length;F++){J=this.fc[G][F];E=J.radius*t;H=J.alpha*A;0>H&&(H=0);I=J.color;if(8==G||9==G||10==G)I=x.color;this.o.pa?(f.useProgram(this.Ba),
f.bindBuffer(f.ARRAY_BUFFER,this.Md),f.vertexAttribPointer(this.Ba.ia,this.Md.itemSize,f.FLOAT,!1,0,0),D=f.getUniformLocation(this.Ba,"uCanvasDimensions2"),f.uniform2f(D,f.drawingBufferWidth,f.drawingBufferHeight),D=f.getUniformLocation(this.Ba,"uCirclePosition"),f.uniform2f(D,f.drawingBufferWidth/n*(e+z*J.A),f.drawingBufferWidth/n*(q-(h+C*J.A))),D=f.getUniformLocation(this.Ba,"uCircleTexturePosition"),f.uniform2f(D,f.drawingBufferWidth/n*(e+z*J.A),q-(h+C*J.A)),D=f.getUniformLocation(this.Ba,"uCircleRadius"),
f.uniform1f(D,E),f.uniform3f(f.getUniformLocation(this.Ba,"uCircleColor"),(I>>16&255)/255,(I>>8&255)/255,(I&255)/255),f.uniform1f(f.getUniformLocation(this.Ba,"uCircleAlpha"),H),f.uniform1f(f.getUniformLocation(this.Ba,"uCircleSoftness"),J.G),D=f.getUniformLocation(this.Ba,"uAspectRatio"),f.uniform1f(D,f.drawingBufferWidth/f.drawingBufferHeight/(n/q)),f.drawArrays(f.TRIANGLE_FAN,0,this.Md.te)):(this.aa.save(),this.aa.translate(e+z*J.A,h+C*J.A),D=this.aa.createRadialGradient(0,0,1,0,0,E),D.addColorStop(0,
this.o.na(I,H)),D.addColorStop(1-J.G,this.o.na(I,.8*H)),D.addColorStop(1,this.o.na(I,0)),this.aa.beginPath(),this.aa.arc(0,0,E,0,2*Math.PI,!1),this.aa.closePath(),this.aa.fillStyle=D,this.aa.fill(),this.aa.restore())}if(0<this.uc[G].length)for(F=0;F<this.uc[G].length;F++)x=this.uc[G][F],E=x.radius*t,H=x.alpha*A,0>H&&(H=0),this.o.pa?(f.useProgram(this.Ab),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,this.np),f.bindBuffer(f.ARRAY_BUFFER,this.Md),f.vertexAttribPointer(this.Ab.ia,this.Md.itemSize,
f.FLOAT,!1,0,0),D=f.getUniformLocation(this.Ab,"uCanvasDimensions2"),f.uniform2f(D,n,q),D=f.getUniformLocation(this.Ab,"uCirclePosition"),f.uniform2f(D,e+z*x.A,q-(h+C*x.A)),D=f.getUniformLocation(this.Ab,"uRingTexturePosition"),f.uniform2f(D,f.drawingBufferWidth/n*(e+z*x.A),q-(h+C*x.A)),D=f.getUniformLocation(this.Ab,"uCircleRadius"),f.uniform1f(D,E),f.uniform2f(f.getUniformLocation(this.Ab,"uRingPosition"),e+z*x.A,q-(h+C*x.A)),f.uniform1f(f.getUniformLocation(this.Ab,"uRingRadius"),E),f.uniform1f(f.getUniformLocation(this.Ab,
"uRingAlpha"),H),D=f.getUniformLocation(this.Ab,"uAspectRatio"),f.uniform1f(D,f.drawingBufferWidth/f.drawingBufferHeight/(n/q)),f.uniform1i(f.getUniformLocation(this.Ab,"uSampler"),0),f.drawArrays(f.TRIANGLE_FAN,0,this.Md.te)):(this.aa.save(),this.aa.translate(e+z*x.A,h+C*x.A),D=this.aa.createRadialGradient(0,0,0,0,0,E),D.addColorStop(0,this.o.na(16777215,0)),D.addColorStop(.88,this.o.na(0,0)),D.addColorStop(.9,this.o.na(16654848,H)),D.addColorStop(.92,this.o.na(16776448,H)),D.addColorStop(.94,this.o.na(4849466,
H)),D.addColorStop(.96,this.o.na(131071,H)),D.addColorStop(.98,this.o.na(8190,H)),D.addColorStop(1,this.o.na(0,0)),this.aa.beginPath(),this.aa.arc(0,0,E,0,2*Math.PI,!1),this.aa.closePath(),this.aa.fillStyle=D,this.aa.fill(),this.aa.restore())}this.o.pa&&(f.useProgram(this.o.ra.P),f.disable(f.BLEND),f.enable(f.DEPTH_TEST))}}}};return r}();y.mq=w})(ggP2VR||(ggP2VR={}));var THREE;
(function(y){var w=function(){function r(f){this.pb=[];this.yj=[];this.la={x:0,y:0};this.Vc={x:0,y:0};this.Oh=0;this.session=null;this.Vk=!1;this.Hm=this.Gm=this.mf=0;this.pl=this.Hg=!1;this.hm=0;this.ug=-5;this.vm=0;this.Qi=this.Vf=this.sj=!1;this.o=null;this.Ul=!0;this.Zf=1;this.dj=[];this.frustumCulled=!1;this.vh=0;this.Fm=null;this.vk=this.fq=!1;this.pe=[-1,-1,-1,-1];this.qe=[-1,-1,-1,-1];this.hf=[!1,!1,!1,!1];this.Cc=[];this.nj=[];this.gf=[];this.o=f;var c=this;setTimeout(function(){if(window.WebXRPolyfill&&
window.Promise){var a={cardboardConfig:{BUFFER_SCALE:1}};try{new window.WebXRPolyfill(a),f.N("WebXR Polyfill loaded!")}catch(b){f.Sc(b)}}c.Cs()},0);THREE?this.Zm():console.log("Three.js not available!")}r.prototype.Zq=function(){this.init();this.animate()};r.prototype.Zm=function(){this.rm=new THREE.Matrix4;this.So=new THREE.Euler};r.prototype.init=function(){"xr"in navigator||console.log("no WebXR support");if(THREE)if(this.sb)console.log("already set up!");else{this.rm||this.Zm();var f=this,c=this.hc=
this.o.hc,a=this.Ht=new THREE.Scene,b=this.camera=new THREE.PerspectiveCamera(100,window.innerWidth/window.innerHeight,.001,2E4);a.add(b);108>THREE.REVISION&&(this.frustumCulled=!0);b.position.z=-.01;b.position.y=0;b.position.x=0;this.sb=b=new THREE.WebGLRenderer({depth:!0,logarithmicDepthBuffer:!0,alpha:!0,antialias:!0,stencil:!0});b.setClearColor(new THREE.Color(0),1);b.setPixelRatio(window.devicePixelRatio);b.setSize(window.innerWidth,window.innerHeight);b.outputEncoding=THREE.sRGBEncoding;b.shadowMap.enabled=
!1;c.appendChild(b.domElement);"xr"in navigator&&(b.xr.enabled=!0,b.xr.setReferenceSpaceType("local"));var e=this.Gk=new THREE.Group;e.name="controllerGroup";c=this.Ek=b.xr.getController(0);c.addEventListener("selectstart",function(q){f.Uo(q)});c.addEventListener("selectend",function(q){f.To(q)});c.visible=!0;c.userData.Mf=0;e.add(c);var h=this.Fk=b.xr.getController(1);h.addEventListener("selectstart",function(q){f.Uo(q)});h.addEventListener("selectend",function(q){f.To(q)});h.visible=!0;h.userData.Mf=
1;e.add(h);e.visible=!1;a.add(e);e=this.Ce=new THREE.Group;e.name="skinGroup";e.translateZ(this.ug);e.visible=!1;a.add(e);e=this.um=new THREE.Group;e.name="toggleSkinGroup";e.translateZ(this.ug+.1);a.add(e);var m=(new THREE.TextureLoader).load("webxr/vrSkinShow.svg"),n=(new THREE.TextureLoader).load("webxr/vrSkinHide.svg");e=new THREE.PlaneBufferGeometry(.3,.3);m=new THREE.MeshBasicMaterial({map:m});m.transparent=!0;n=new THREE.MeshBasicMaterial({map:n});n.transparent=!0;e=new THREE.Mesh(e,m);e.name=
"SkinToggleButton";e.position.y=3.12;e.gv=!1;e.userData.Ns=m;e.userData.Ms=n;e.userData.onclick=function(){f.ci()};this.bc=e;this.um.add(e);e=(new THREE.BufferGeometry).setFromPoints([new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,-1)]);m=new THREE.LineBasicMaterial({color:14737632});e=new THREE.Line(e,m);e.name="line";e.scale.z=5;c.add(e.clone());h.add(e.clone());this.$h=new THREE.Raycaster;this.la=new THREE.Vector2;this.nf=new THREE.Group;this.nf.name="panoGroup";this.ef=new THREE.Group;this.ef.name=
"imageGroup";this.zd=new THREE.Group;this.zd.name="hotspotGroup";this.Pi=new THREE.Group;this.Pi.name="elementGroup";this.Ei=new THREE.Group;this.Ei.name="centerGroup";this.nf.add(this.zd);this.nf.add(this.Pi);this.nf.add(this.ef);a.add(this.nf);a.add(this.Ei);c=document.createElement("canvas");c.width=64;c.height=64;h=c.getContext("2d");h.fillStyle="black";h.lineWidth=3;h.beginPath();h.arc(32,32,10,0,2*Math.PI);h.stroke();c=new THREE.Texture(c);c.encoding=THREE.sRGBEncoding;e=new THREE.PlaneBufferGeometry(2,
2,8);h=new THREE.MeshBasicMaterial({map:c});h.transparent=!0;h=new THREE.Mesh(e,h);h.position.z=-50;this.Ei.add(h);c.needsUpdate=!0;window.addEventListener("resize",function(){f.ht()},!1);document.addEventListener("mouseup",function(){f.dt()},!1);document.addEventListener("mousedown",function(q){f.bt(q)},!1);document.addEventListener("mousemove",function(q){f.ct(q)},!1);S&&"undefined"!==typeof __THREE_DEVTOOLS__&&(__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:a})),__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",
{detail:b})))}else console.log("Three.js not available!")};r.prototype.Fp=function(){var f=this.o;f.N("VR not found");f.I("vrchanged",{});f.I("playerstatechanged",{})};r.prototype.lu=function(){this.pl=!0;var f=this.o;f.N("XR found");f.I("vrchanged",{});f.I("playerstatechanged",{})};r.prototype.Cs=function(){if(!this.fq){this.fq=!0;var f=this;if("xr"in navigator)navigator.xr.isSessionSupported("immersive-vr").then(function(c){c?f.lu():f.Fp()})["catch"](f.Fp)}};r.prototype.el=function(){return this.Ce};
r.prototype.gg=function(){return null!=this.session?this.sb.xr.isPresenting:this.o.$d?!0:!1};r.prototype.cf=function(){return this.pl&&THREE};r.prototype.ft=function(f){var c=this;this.zi();f.addEventListener("end",function(){c.et()});console.log("XR Session started.");this.sb.xr.setSession(f);this.Vk=!0;this.session=f;c.o.I("entervr",{session:f})};r.prototype.et=function(){console.log("XR Session ended.");this.Vk=!1;this.session=null;this.Dk()};r.prototype.Rf=function(){var f=this.o;if(this.pl){if(null===
this.session){var c=this;navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor"]}).then(function(b){c.ft(b)})["catch"](function(b){console.log(b);console.warn("'immersive-vr' isn't supported, or an error occurred activating VR!");c.Dk()})}this.zd&&this.zd.translateY(-this.vh);this.vh=0;if(1==this.Zf){var a=navigator.userAgent;0<=a.indexOf("OculusBrowser")&&(0<=a.indexOf("Pacific")&&(this.Zf=1.7),0<=a.indexOf("Quest")&&(this.Zf=1.5))}this.sb.xr.setFramebufferScaleFactor(this.Zf);
f.Sc("Enter VR - scaled "+this.Zf)}else this.zi(),this.o.I("entervr",{session:null})};r.prototype.it=function(){if(THREE&&this.sb){var f=this.o;f.$d=!0;f.$.style.display="none";f.Wa.style.display="none";this.sb.domElement.style.display="inline";f.I("vrchanged",{});f.I("playerstatechanged",{})}};r.prototype.Dk=function(){if(THREE&&this.sb){var f=this.o;f.$d=!1;f.$.style.display="inline";f.Wa.style.display="inline";this.sb.domElement.style.display="none";f.sg(0);f.cc();f.update();f.I("vrchanged",{});
f.I("playerstatechanged",{});this.o.I("exitvr",{session:null});this.Bk()}};r.prototype.Sf=function(){null!=this.session&&this.session.end()};r.prototype.Sp=function(){this.gg()?this.Sf():this.Rf()};r.prototype.ir=function(){var f=0,c=this.o,a=c.O.M;var b=1536;this.sb&&c.N("Canvas: "+b);b*=Math.pow(2,0);if(0<a.levels.length){for(;a.levels.length>=f+2&&!a.levels[f+1].sf&&a.levels[f+1].width>b;)f++;c.N("Level "+f+" - width: "+a.levels[f].width);c.N(a.levels)}return f};r.prototype.eo=function(f){var c=
this.o,a=c.O.M,b=c.Ie[f];f="";if(b){b=b.firstChild;for(var e;b;)"input"==b.nodeName&&(e=b)&&(e=0<a.levels.length?e.getAttributeNode("leveltileurl"):e.getAttributeNode("tilevrurl"))&&(f=e.nodeValue),b=b.nextSibling}else f=0<a.levels.length?a.Al:c.Ik;a=f;f=c.lp;for(b=0;3>b;b++)a=f(a,"c","vr"),a=f(a,"s","vr"),a=f(a,"r",0),a=f(a,"l",0),a=f(a,"x",0),a=f(a,"y",0),a=f(a,"v",0),a=f(a,"h",0);return c.vb(a)};r.prototype.ceilPowerOfTwo=function(f){return Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))};r.prototype.loadTexture=
function(f,c,a){var b=new THREE.ImageLoader;b.setCrossOrigin(this.o.crossOrigin);var e=this;b.load(c,function(h){var m=e.ceilPowerOfTwo(h.width),n=e.ceilPowerOfTwo(h.height);f.encoding=THREE.sRGBEncoding;if(m==h.width&&n==h.height||!a)f.image=h;else{e.o.N("resizing "+h.width+"/"+h.height+" -> "+m+"/"+n);var q=document.createElement("canvas");q.width=m;q.height=n;q.getContext("2d").drawImage(h,0,0,m,n);f.image=q}f.needsUpdate=!0;f.lo=!0;f.le&&f.le.lo&&(f.qh.visible=!0,f.le.qh.visible=!0)});this.dj.push(f)};
r.prototype.zi=function(){if(THREE){var f=this.o;if(this.vk)f.N("vr panorama aleady added!");else{var c=this.ef,a=this;f.N("add vr panorama");this.tf();this.camera.layers.enable(1);c.setRotationFromEuler(this.So);c.rotateX(f.Sa.pitch*Math.PI/180);c.rotateZ(-f.Sa.X*Math.PI/180);var b=new THREE.SphereBufferGeometry(2E4/3*1.5,16,16),e=new THREE.Texture,h=new THREE.ImageLoader;h.setCrossOrigin(this.o.crossOrigin);h.load(this.eo(f.Vi()),function(m){e.encoding=THREE.sRGBEncoding;e.image=m;e.needsUpdate=
!0});h=new THREE.MeshBasicMaterial({map:e,side:THREE.DoubleSide});b=new THREE.Mesh(b,h);b.scale.x=-1;b.rotateZ(f.Sa.X*Math.PI/180);b.rotateX(-f.Sa.pitch*Math.PI/180);b.rotateY(-90*Math.PI/180);c.add(b);a.Dj=b;a.vk=!0;setTimeout(function(){f.N("Adding Main Pano");a.vk=!1;a.Bq();f.B.j?a.Eq():a.Cq();a.zq()});this.Bt();this.Ul=!0}}};r.prototype.Eq=function(){var f=this.o,c=this.ef,a=2E4/3;if(f.Ad){var b=new THREE.VideoTexture(f.B.j);b.wrapS=THREE.ClampToEdgeWrapping;b.wrapT=THREE.ClampToEdgeWrapping;
b.minFilter=THREE.LinearFilter;b.encoding=THREE.sRGBEncoding;var e=new THREE.SphereBufferGeometry(a,60,40);e.scale(-1,1,1);for(var h=e.attributes.uv.array,m=1;m<h.length;m+=2)h[m]*=.5;h=new THREE.MeshBasicMaterial({map:b});e=new THREE.Mesh(e,h);e.rotateY(-90*Math.PI/180);e.layers.set(f.wg?1:2);c.add(e);e=new THREE.SphereBufferGeometry(a,60,40);e.scale(-1,1,1);h=e.attributes.uv.array;for(m=1;m<h.length;m+=2)h[m]*=.5,h[m]+=.5;h=new THREE.MeshBasicMaterial({map:b});e=new THREE.Mesh(e,h);e.rotateY(-90*
Math.PI/180);e.layers.set(f.wg?2:1)}else e=new THREE.SphereBufferGeometry(a,60,40),e.scale(-1,1,1),b=new THREE.VideoTexture(f.B.j),b.encoding=THREE.sRGBEncoding,b.wrapS=THREE.ClampToEdgeWrapping,b.wrapT=THREE.ClampToEdgeWrapping,b.minFilter=THREE.LinearFilter,h=new THREE.MeshBasicMaterial({map:b}),e=new THREE.Mesh(e,h),e.rotateY(-90*Math.PI/180);c.add(e);try{f.B.j.play()}catch(n){f.Sc(n)}};r.prototype.Cq=function(){var f=this.o,c=this.o.O.M,a=[],b=this.ir(),e=this.ef,h=2E4/3,m=f.Ad?2:1;if(c.levels.length>
b)for(var n=c.levels[b],q=0;6>q;q++){a[q]=new THREE.Group;for(var v=0;v<n.sa;v++)for(var t=0;t<n.Y;t++)for(var x=0;x<m;x++){var z=new THREE.Texture;z.encoding=THREE.sRGBEncoding;this.loadTexture(z,f.O.zg(q,b,t,v,1==x),!0);z.wrapS=THREE.ClampToEdgeWrapping;z.wrapT=THREE.ClampToEdgeWrapping;z.minFilter=THREE.LinearMipMapLinearFilter;z.anisotropy=1;var C=c.W+2*c.$a,F=c.W+2*c.$a;t==n.Y-1&&(C=n.width-c.W*(n.Y-1)+2*c.$a);v==n.sa-1&&(F=n.width-c.W*(n.sa-1)+2*c.$a);var E=new THREE.PlaneBufferGeometry(h*C/
n.width,h*F/n.width,8),D=new THREE.MeshBasicMaterial({map:z});E=new THREE.Mesh(E,D);D.transparent=!0;D.side=THREE.FrontSide;D=1*c.W;E.position.x=h*(t*D+C/2-c.$a-n.width/2)/n.width;E.position.y=h*-(v*D+F/2-c.$a-n.width/2)/n.width;E.position.z=-.5*h;if(f.Ad)if(E.visible=!1,E.layers.set(1==x?1:2),z.qh=E,0==x)var A=E;else C=A.material.map,z.le=C,C.le=z;a[q].add(E);E.frustumCulled=this.frustumCulled}4>q?a[q].rotation.y=-q*Math.PI/2:a[q].rotation.x=(4==q?1:-1)*Math.PI/2;e.add(a[q])}else for(c=f.Ag,q=0;6>
q;q++)for(a[q]=new THREE.Group,x=0;x<m;x++)b=q,f.Ad&&(b=q+(1==x?6:0)),z=new THREE.Texture,z.encoding=THREE.sRGBEncoding,this.loadTexture(z,f.vb(f.Yg[b]),!1),z.wrapS=THREE.ClampToEdgeWrapping,z.wrapT=THREE.ClampToEdgeWrapping,z.minFilter=THREE.LinearFilter,E=new THREE.PlaneBufferGeometry(c*h/2,c*h/2,64),D=new THREE.MeshBasicMaterial({map:z}),E=new THREE.Mesh(E,D),D.transparent=!0,D.side=THREE.FrontSide,E.position.x=0,E.position.y=0,E.position.z=-.25*h,f.Ad&&(E.layers.set(1==x?1:2),E.visible=!1,z.qh=
E,0==x?A=E:(C=A.material.map,z.le=C,C.le=z)),a[q].add(E),4>q?a[q].rotation.y=-q*Math.PI/2:a[q].rotation.x=(4==q?1:-1)*Math.PI/2,e.add(a[q])};r.prototype.Bq=function(){var f=this.o,c=this.zd;new y.Ra(0,0,-100);for(var a=f.J.Xj,b=0;b<f.K.length;b++){var e=f.K[b],h=null,m=e.wu(),n=e.Af?100:5;if(f.gk&&f.gk.addSkinHotspot)(h=f.gk.addSkinHotspot(e))&&h.userData.dv&&(n=100);else{var q=.2;if(!1!==m){n=!e.distance||0>=e.distance?5:1>e.distance?1:5>e.distance?e.distance:5;if(e.dd){m=.005;var v=(new THREE.TextureLoader).load(e.dd);
v.encoding=THREE.sRGBEncoding;var t=new THREE.MeshBasicMaterial({map:v});if(e.Af){h=2*n*Math.tan(e.fov/2*Math.PI/180);var x=new THREE.PlaneBufferGeometry(h,h*e.ud/e.Ue,1,1);t.transparent=!0;t.opacity=1}else x=new THREE.PlaneBufferGeometry(m*e.Ue,m*e.ud,1,1),t.transparent=!0,t.opacity=.25;q=m*e.ud/2;t.side=THREE.DoubleSide}else x=new THREE.SphereBufferGeometry(.2,16,16),v=(new THREE.TextureLoader).load(this.eo(m)),v.encoding=THREE.sRGBEncoding,t=new THREE.MeshBasicMaterial({map:v}),t.transparent=!0,
t.opacity=.25;h=new THREE.Mesh(x,t);m=e.title;if(a.enabled&&""!=m){x=document.createElement("canvas");x.width=256;x.height=32;v=x.getContext("2d");this.oi||(this.oi=document.createElement("canvas"),this.oi.width=x.width,this.oi.height=x.height);var z=this.oi.getContext("2d");z.clearRect(0,0,x.width,x.height);z.font="16px Helvetica";z.textAlign="center";z.textBaseline="top";t=z.measureText(m);var C=t.width;0<a.height&&(C=Math.min(a.width,x.width-6),C=Math.max(C,t.width));t=C+6;a.background&&(z.fillStyle=
this.o.na(a.Ob,a.Nb),z.fillRect((x.width-C)/2-3,2,C+6,24));0<a.Di&&(z.strokeStyle=this.o.na(a.Qb,a.Pb),z.strokeRect((x.width-C)/2-3,2,C+6,24));z.fillStyle=this.o.na(a.Yj,a.Wj);z.fillText(m,x.width/2,5,x.width-6);v.drawImage(this.oi,(x.width-t)/2,2,t,24,0,0,x.width,x.height);v=new THREE.Texture(x);v.encoding=THREE.sRGBEncoding;v.needsUpdate=!0;m=1.5;x=new THREE.PlaneBufferGeometry(1*m*t/x.width,3*m/x.height,1,1);t=new THREE.MeshBasicMaterial({map:v,side:THREE.DoubleSide});x=new THREE.Mesh(x,t);x.translateY(-q-
.125*m/2);x.frustumCulled=this.frustumCulled;h.add(x);t.transparent=!0;t.opacity=.5}h.userData={T:e}}}h&&(h.rotateY(e.pan*Math.PI/180),h.rotateX(e.u*Math.PI/180),h.translateZ(-n),h.castShadow=!1,h.receiveShadow=!1,h.frustumCulled=this.frustumCulled,c.add(h))}};r.prototype.zq=function(){for(var f=this.o,c=this.Pi,a=0;a<f.V.length;a++){var b=f.V[a];if(b.j&&"_videopanorama"!=b.id&&!b.kd){b.j.play();var e=new THREE.VideoTexture(b.j);e.encoding=THREE.sRGBEncoding;e.wrapS=THREE.ClampToEdgeWrapping;e.wrapT=
THREE.ClampToEdgeWrapping;e.minFilter=THREE.LinearFilter;var h=5E3*Math.tan(b.fov*Math.PI/360);var m=0<b.lc?h*b.Nc/b.lc:h;b.Ec&&1!=b.Ec&&(m*=b.Ec);h=new THREE.PlaneBufferGeometry(h,m,5,5);e=new THREE.MeshBasicMaterial({map:e,side:THREE.DoubleSide});e=new THREE.Mesh(h,e);e.rotateY(b.pan*Math.PI/180);e.rotateX(b.u*Math.PI/180);e.translateY(-0);e.translateZ(-2500);e.rotateZ(-b.tb*Math.PI/180);e.rotateY(-b.Ma*Math.PI/180);e.rotateX(-b.Ia*Math.PI/180);e.userData=b;e.castShadow=!1;e.receiveShadow=!1;c.add(e)}}};
r.prototype.eh=function(f){for(var c=f.children.length-1;0<=c;c--){var a=f.children[c];this.eh(a);f.remove(a)}f.geometry&&f.geometry.dispose();f.material&&(f.material.texture&&(f.material.texture.dispose(),f.material.texture.le=null,f.material.texture.qh=null),f.material.map&&(f.material.map.dispose(),f.material.map.le=null,f.material.map.qh=null),f.material.dispose())};r.prototype.tf=function(){THREE&&(this.dj=[],this.eh(this.ef),this.eh(this.zd),this.eh(this.Pi),10<this.sb.info.memory.textures&&
this.o.Im(this.sb.info.memory))};r.prototype.ht=function(){if(THREE){var f=this.camera;f.aspect=window.innerWidth/window.innerHeight;f.updateProjectionMatrix();this.sb.setSize(window.innerWidth,window.innerHeight)}};r.prototype.Uo=function(f){if(THREE){f=f.target;this.Bk();var c=this.$k(f);0<c.length&&(this.Pg(c,f.userData.Mf),0<this.pb.length&&(f=this.pb[0],c=f.userData,c.T&&!c.fromSkin?(f=c.T,this.o.ld(f.url,f.target)):(this.ce(f,"onclick"),this.ce(f,"onmousedown"))))}};r.prototype.To=function(f){if(THREE){f=
f.target;var c=this.$k(f);0<c.length&&this.Pg(c,f.userData.Mf)}};r.prototype.$k=function(f){this.rm.identity().extractRotation(f.matrixWorld);this.$h.ray.origin.setFromMatrixPosition(f.matrixWorld);this.$h.ray.direction.set(0,0,-1).applyMatrix4(this.rm);return this.ql(this.$h)};r.prototype.ql=function(f){var c=[];if(this.zd.visible){var a=f.intersectObjects(this.zd.children,!0);c=c.concat(a)}this.Ce.visible&&(a=f.intersectObjects(this.Ce.children,!0),c=c.concat(a));a=f.intersectObjects(this.um.children,
!0);return c=c.concat(a)};r.prototype.Pg=function(f,c){void 0===c&&(c=-1);for(var a=0;a<f.length;a++)if(void 0!==f[a].object.userData.isVisible&&f[a].object.userData.isVisible()||void 0===f[a].object.userData.isVisible&&f[a].object.visible||f[a].object.userData.av){var b=f[a].object;b.selected=!0;b.distance=f[a].distance;b.Mf=c;this.pb.push(b)}};r.prototype.intersectObjects=function(f){var c=f.getObjectByName("line"),a=this.$k(f);0<a.length&&this.Pg(a,f.userData.Mf);c.scale.z=0<this.pb.length?this.pb[0].distance:
5};r.prototype.Bk=function(){for(;this.pb.length;)this.pb.pop().selected=!1};r.prototype.ct=function(f){f.preventDefault();var c=this.la,a=this.sb;c.x=f.clientX/a.domElement.clientWidth*2-1;c.y=2*-(f.clientY/a.domElement.clientHeight)+1;1==f.buttons&&(this.Oh=this.Vc.x-c.x)};r.prototype.Ds=function(){var f=this.$h;f.setFromCamera(this.la,this.camera);f=this.ql(f);0<f.length&&this.Pg(f)};r.prototype.Es=function(){var f=this.$h;f.setFromCamera({x:0,y:0},this.camera);f=this.ql(f);0<f.length&&this.Pg(f)};
r.prototype.dt=function(){this.Oh=0;if(0<this.pb.length){var f=this.pb[0];f.userData.T||this.ce(f,"onmouseup")}};r.prototype.ce=function(f,c,a){void 0===a&&(a=!1);var b=f;do if(b.userData[c])if(a){var e=f.Mf;0<=e&&this.Cc&&this.Cc[e]&&(e=this.Cc[e],e.hapticActuators&&0<e.hapticActuators.length&&e.hapticActuators[0].pulse(.8,5))}else b.userData[c]();while(!b.userData.stopPropagation&&(b=b.parent))};r.prototype.an=function(f,c){do if(f.userData.onclick||f.userData.T&&!f.userData.fromSkin)c?f.userData.gi=
-1:f.userData.gi&&-1!=f.userData.gi?Date.now()>f.userData.gi+1E3&&(f.userData.onclick?(f.userData.onclick(),f.userData.gi=-1):f.userData.T&&f.userData.T.url&&this.o.ld(f.userData.T.url,f.userData.T.target)):f.userData.gi=Date.now();while(!f.userData.stopPropagation&&(f=f.parent))};r.prototype.bt=function(f){50>f.clientX&&50>f.clientY&&this.o.Sf();if(0<this.pb.length){f=this.pb[0];for(var c=1;c<this.pb.length;c++)this.pb[c].position.z>f.position.z&&(f=this.pb[c]);c=f.userData;c.T?(f=c.T,this.o.ld(f.url,
f.target)):(this.ce(f,"onclick"),this.ce(f,"onmousedown"))}else this.Vc.x=this.la.x,this.Vc.y=this.la.y};r.prototype.animate=function(){var f=this.Ko=this;this.sb&&this.sb.setAnimationLoop(function(){f.render()})};r.prototype.render=function(){if(THREE){var f=null;try{f=this.sb.xr.getCamera(this.camera)}catch(t){}this.Fm=f;0==this.vh&&f&&(this.vh=f.position.y,this.zd.translateY(this.vh));var c=this.Ko,a=c.o;if(a.$d){c.Hg=c.Ek.visible||c.Fk.visible?!1:!0;var b=this.vs();this.ws();this.Dj&&0<this.dj.length&&
this.dj.every(function(t){return t.lo})&&(this.eh(this.Dj),this.ef.remove(this.Dj),this.Dj=null,a.N("unload Preview Sphere"));for(var e=this.zd,h=e.children.length-1;0<=h;h--){var m=e.children[h],n=1,q=1;m.selected?(n=1.5,q=1):b?(n=.6,q=.7):(n=.4,q=.5);var v=m.scale.x;v+=.1*(n-v);m.userData.fromSkin?m.userData.ggUse3d&&(v=10):(m.material.opacity+=.1*(q-m.material.opacity),m.userData&&m.userData.T&&m.userData.T.dd?(m.userData.T.Af&&(v=1,m.material.opacity=1),0<m.children.length&&(m.children[0].material.opacity=
m.material.opacity)):(m.rotateY(1*Math.PI/180),0<m.children.length&&(m.children[0].rotateY(-1*Math.PI/180),m.children[0].material.opacity=m.material.opacity)));m.scale.x=m.scale.y=m.scale.z=v}b=c.camera.rotation.clone();b.reorder("YXZ");this.Gm=180*b.y/Math.PI;this.Hm=180*b.x/Math.PI;this.Ce.visible||(10<this.Hm?this.sj||(this.sj=!0,this.Ks=new Date):(this.sj=!1,!this.Vf&&!this.bc.visible||this.Qi||(this.Qi=!0,this.Sk=new Date),this.Vf=!1),!this.sj||this.Vf||this.bc.visible||(e=new Date,500<e.getTime()-
this.Ks.getTime()&&(this.Vf=!0,this.Sk=new Date)),this.Vf?(this.bc.visible=!0,e=new Date,e=(e.getTime()-this.Sk.getTime())/5,100<=e?(this.bc.material.opacity=1,this.Vf=!1):this.bc.material.opacity=e/100):this.Qi&&(e=new Date,e=(e.getTime()-this.Sk.getTime())/5,100<=e?(this.bc.material.opacity=0,this.Qi=this.bc.visible=!1):this.bc.material.opacity=1-e/100));this.Ul&&(this.bi(this.Gm-a.pan.m),this.Ul=!1);a.Ap(this.Gm-this.mf,this.Hm,180*b.z/Math.PI);a=this.Ei;c.Hg?f&&(a.setRotationFromEuler(f.rotation),
a.visible=!0):a.visible=!1;a=this.um;f&&!this.Ce.visible&&(a.translateZ(-(this.ug+.1)),a.rotateY(-this.vm),b=new THREE.Vector3(0,0,1),b.applyEuler(f.rotation),this.vm=Math.atan2(b.x,b.z),a.rotateY(this.vm),a.translateZ(this.ug+.1));c.sb.render(c.Ht,c.camera);0==this.Oh||isNaN(this.Oh)||this.bi(this.Oh)}}};r.prototype.vs=function(){var f=this,c=this;this.Cc=[];var a=!0;this.session?this.session.inputSources.forEach(function(q){var v=q.profiles;"gaze"==q.targetRayMode?c.Hg=!0:(f.Cc.push(q.gamepad),
0<=v.indexOf("oculus-go")&&(a=!1),0<=v.indexOf("generic-trigger-squeeze-thumbstick")&&(a=!0),0<=v.indexOf("oculus-touch")&&(a=!0))}):this.Cc=navigator.getGamepads&&navigator.getGamepads();var b=!1;if(this.Cc)for(var e=0;e<this.Cc.length;e++){var h=this.Cc[e];if(h&&0<h.buttons.length)if(2<=h.axes.length&&2<h.buttons.length&&!a)if(h.buttons[2].pressed)this.hf[e]||(this.hf[e]=!0,this.ci());else if(h.buttons[2].touched){b=!0;this.hf[e]=!1;var m=h.axes[0],n=h.axes[1];-1==this.pe[e]?this.pe[e]=m:(h=this.pe[e]-
m,-.3>h&&(this.bi(20),this.pe[e]=m,this.qe[e]=n),.3<h&&(this.bi(-20),this.pe[e]=m,this.qe[e]=n));-1==this.qe[e]?this.qe[e]=n:(h=this.qe[e]-n,-.5>h&&(this.ci(!0),this.qe[e]=n,this.pe[e]=m),.5<h&&(this.ci(!1),this.qe[e]=n,this.pe[e]=m))}else this.pe[e]=-1,this.qe[e]=-1,this.hf[e]=!1;else 4<=h.axes.length&&(m=h.axes[2],n=h.axes[3],.8<m?(b=!0,1!=this.gf[e]&&(this.gf[e]=1,this.nj[e]=Date.now()-1E4)):-.8>m?(b=!0,-1!=this.gf[e]&&(this.gf[e]=-1,this.nj[e]=Date.now()-1E4)):this.gf[e]=0,0!=this.gf[e]&&400<
Date.now()-this.nj[e]&&(this.nj[e]=Date.now(),this.bi(20*this.gf[e])),h.buttons[1].pressed?this.hf[e]||(this.hf[e]=!0,this.ci()):this.hf[e]=!1)}c.Gk.visible==(!this.Cc||0==this.Cc.length)&&(c.Gk.visible=!c.Gk.visible);return b};r.prototype.Zo=function(f){for(f=f.parent;f;){if(f.selected)return!0;f=f.parent}return!1};r.prototype.ws=function(){var f=this.Ko;f.yj=f.pb.slice();f.Bk();f.Ek.visible&&f.intersectObjects(f.Ek);f.Fk.visible&&f.intersectObjects(f.Fk);f.Vk||f.Ds();f.Hg&&f.Es();for(var c=0;c<
f.pb.length;c++){var a=f.pb[c];f.Hg&&this.an(a,!1);-1!=f.yj.indexOf(a)||this.Zo(a)||(this.ce(a,"onmouseover"),this.Cc&&0<this.Cc.length&&this.ce(a,"onclick",!0))}for(c=0;c<f.yj.length;c++)a=f.yj[c],-1==f.pb.indexOf(a)&&(this.Zo(a)||this.ce(a,"onmouseout"),f.Hg&&this.an(a,!0))};r.prototype.ci=function(f){var c=this.Ce;void 0===f&&(f=!c.visible);var a=this.Fm;f?(c.translateZ(-this.ug),c.rotateY(-this.hm),a&&(f=new THREE.Vector3(0,0,1),f.applyEuler(a.rotation),this.hm=Math.atan2(f.x,f.z)),c.rotateY(this.hm),
c.translateZ(this.ug),this.Ce.visible=!0,this.bc.material=this.bc.userData.Ms,this.bc.visible=!0,this.bc.material.opacity=1):(this.Ce.visible=!1,this.bc.material=this.bc.userData.Ns,this.bc.visible=!1)};r.prototype.Bt=function(){this.mf=0;this.nf.setRotationFromEuler(this.So)};r.prototype.bi=function(f){this.mf+=f;this.nf.rotateY(f*Math.PI/180)};return r}();y.xq=w})(ggP2VR||(ggP2VR={}));
(function(y){var w=function(){return function(){this.fov=this.u=this.pan=0}}();y.Yu=w;var r=function(){function f(c){this.pan={m:0,Ga:0,min:0,max:360,d:0,Rh:0,Sb:0,open:0};this.u={m:0,Ga:0,min:-90,max:90,d:0,Sb:0,open:0};this.X={m:0,Ga:0,min:-180,max:180,d:0,open:0};this.jc={pan:0,u:-90,X:0,fov:170,Jb:9};this.fov={m:70,Ga:70,min:1,Nh:0,max:170,Cl:360,Dl:270,prev:0,d:0,Lc:{enabled:!1,x:0,y:0},mode:0,Jp:0,qn:0,open:0};this.cube=new y.rq;this.ra=null;this.Sa={X:0,pitch:0};this.wg=this.Ad=!1;this.zj=
this.Wo=4;this.Vo=this.Hl=0;this.M=new y.pq;this.lg=200;this.ni=0;this.tm=5;this.Yd=0;this.Qp=50;this.As=0;this.B={src:[],Re:4,width:640,height:480,Rc:!1,hg:!1,Sj:!0,lm:!1,ge:"loop",Vj:"",j:HTMLVideoElement=null,sm:!1,texture:WebGLTexture=null,ek:WebGLBuffer=null,mi:WebGLBuffer=null,fj:WebGLBuffer=null,format:1,rh:0,flipY:1,nb:function(){return 0},Xl:function(){},loop:function(){return!1}};this.jf={pan:-1,u:-1,fov:-1};this.xl=0;this.Yg=[];this.Ik="";this.Zg=[];this.Ag=this.Ge=1;this.Kl=new w;this.o=
c}f.prototype.ma=function(){this.o.ma()};f.prototype.update=function(){this.o.update()};f.prototype.$e=function(){return this.pan.m};f.prototype.cl=function(){for(var c=this.pan.m;-180>c;)c+=360;for(;180<c;)c-=360;return c};f.prototype.je=function(){for(var c=this.pan.m-this.pan.Rh;-180>c;)c+=360;for(;180<c;)c-=360;return c};f.prototype.Ud=function(c){this.ma();isNaN(c)||(this.pan.m=Number(c));this.update()};f.prototype.Oj=function(c){this.ma();isNaN(c)||(this.pan.m=Number(c)+this.pan.Rh);this.update()};
f.prototype.Gi=function(c,a){isNaN(c)||(this.Ud(this.$e()+c),a&&(this.pan.d=c))};f.prototype.dn=function(c,a){this.Gi(c*this.Xe(),a)};f.prototype.Xe=function(){return Math.min(1,2*Math.tan(Math.PI*Math.min(this.fov.m,90)/360))};f.prototype.$f=function(){return this.u.m};f.prototype.Vd=function(c){this.ma();isNaN(c)||(this.u.m=Number(c));this.update()};f.prototype.Hi=function(c,a){this.Vd(this.$f()+c);a&&(this.u.d=c)};f.prototype.fn=function(c,a){this.Hi(c*this.Xe(),a)};f.prototype.sg=function(c){this.ma();
isNaN(c)||(this.X.m=Number(c));this.update()};f.prototype.aj=function(){return this.X.m};f.prototype.yd=function(){return this.fov.m};f.prototype.ub=function(c){this.ma();switch(this.Z()){case 4:var a=170;break;case 12:a=360;break;case 9:a=355;break;default:a=170}this.kj()&&(a=9999999999);return!isNaN(c)&&0<c&&c<a&&(a=this.fov.m,this.fov.m=1*c,this.Se(),a!=this.fov.m)?(this.update(),!0):!1};f.prototype.$l=function(c){0<=c&&4>c&&(this.fov.mode=Number(c),this.Se(),this.update())};f.prototype.kj=function(){return 2==
this.o.yb};f.prototype.xk=function(c,a){this.ub(this.yd()+c);a&&(this.fov.d=c)};f.prototype.Fi=function(c,a){if(!isNaN(c)){var b=c/90*Math.cos(Math.min(this.fov.m,90)*Math.PI/360);b=this.fov.m*Math.exp(b);this.ub(b);a&&(this.fov.d=c)}};f.prototype.em=function(c,a){this.ma();isNaN(c)||(this.pan.m=c);isNaN(a)||(this.u.m=a);this.update()};f.prototype.Ap=function(c,a,b){this.ma();!isNaN(c)&&1E7>c&&-1E7<c&&(this.pan.m=c);!isNaN(a)&&1E7>a&&-1E7<a&&(this.u.m=a);!isNaN(b)&&1E7>b&&-1E7<b&&(this.X.m=b);this.update()};
f.prototype.rg=function(c,a,b){this.ma();isNaN(c)||(this.pan.m=c);isNaN(a)||(this.u.m=a);isNaN(b)||this.ub(b);this.update()};f.prototype.rp=function(){this.rg(this.pan.Ga,this.u.Ga,this.fov.Ga)};f.prototype.lb=function(c,a,b){var e=a?Number(a):0;if(0!=c&&4!=c&&12!=c&&9!=c)this.o.Sc("Unsupported projection type: "+c);else if(a&&0!==e&&4!==e&&12!==e&&9!==e)this.o.Sc("Unsupported projection2 type: "+e);else if(c==e&&(e=0),this.Vo=b?Number(b):1,this.zj!=c||this.Hl!=e)this.zj=c,this.Hl=e,this.ra.gj()};
f.prototype.Z=function(){return 0==this.zj?4:this.zj};f.prototype.Dc=function(){return this.Hl};f.prototype.oh=function(){return this.Wo};f.prototype.$i=function(){return this.Vo};f.prototype.aspect=function(){return this.o.C.width/this.o.C.height};f.prototype.xo=function(){return 4==this.Z()&&0==this.Dc()};f.prototype.Gb=function(c,a){c||(c=this.fov.m);a||(a=this.Z());return this.Nf(a,1/this.Cn(this.o.C),c)};f.prototype.Nf=function(c,a,b){return this.kj()?a*b:4==c?360*Math.atan(a*Math.tan(b/2*Math.PI/
180))/Math.PI:9==c?720*Math.atan(a*Math.tan(b/4*Math.PI/180))/Math.PI:a*b};f.prototype.Yk=function(c,a){c||(c=this.Gb());a||(a=this.Z());return this.Nf(a,this.aspect(),c)};f.prototype.Xk=function(c,a){c||(c=this.Gb());a||(a=this.Z());var b=this.aspect();b=Math.sqrt(1+b*b);return this.Nf(a,b,c)};f.prototype.bn=function(c){var a;a||(a=this.Z());return this.Nf(a,this.Cn(this.o.C),c)};f.prototype.Cn=function(c){var a=1;switch(this.fov.mode){case 0:a=1;break;case 1:a=c.width/c.height;break;case 2:a=Math.sqrt(c.width*
c.width+c.height*c.height)/c.height;break;case 3:a=4*c.height/3>c.width?1:3*c.width/(4*c.height)}return a};f.prototype.ei=function(c){this.ub(this.bn(c))};f.prototype.am=function(c){var a=this.Z(),b=1/this.aspect();this.ei(this.Nf(a,b,c))};f.prototype.Yl=function(c){var a=this.Z(),b=this.aspect();b=1/Math.sqrt(1+b*b);this.ei(this.Nf(a,b,c))};f.prototype.Se=function(){if(!this.o.$d){var c=this.Kl;c.pan=this.pan.m;c.u=this.u.m;c.fov=this.fov.m;this.Lf(c);this.Lf(c);this.Lf(c);this.pan.m=c.pan;this.u.m=
c.u;this.fov.m!=c.fov&&(this.o.N("fov "+this.fov.m),this.fov.m=c.fov)}};f.prototype.Lf=function(c){var a=this.aspect();var b=this.o.C;var e=this.o,h=e.v;if(this.kj()){if(0<this.fov.Nh){var m=this.Ge;this.M.levels&&0<this.M.levels.length&&(m=this.M.levels[0].height);10<m&&(this.fov.min=100*b.height/(m*this.fov.Nh))}m=c.fov/2;b=m*a;var n=this.M.width/this.M.height*50;a=e.H.qp?2*Math.min(50,n/a):2*Math.max(50,n/a);c.fov<this.fov.min&&(c.fov=this.fov.min);c.fov>a&&(c.fov=a);50<m?c.u=0:(50<c.u+m&&(c.u=
50-m),-50>c.u-m&&(c.u=-50+m));b>n?c.pan=0:(c.pan+b>n&&(c.pan=n-b,e.v.active&&(e.v.speed=-e.v.speed,this.pan.d=0)),c.pan-b<-n&&(c.pan=-n+b,h.active&&(h.speed=-h.speed,this.pan.d=0)))}else{0<this.fov.Nh&&(m=this.Ge,this.M.levels&&0<this.M.levels.length&&(m=this.M.levels[0].height),10<m&&(this.fov.min=360*Math.atan2(b.height/2,m/2*this.fov.Nh)/Math.PI));c.fov<this.fov.min&&(c.fov=this.fov.min);n=this.fov.max;var q=179;m=this.Gb()/2;b=a*m;4==this.Z()?b=180*Math.atan(a*Math.tan(m*Math.PI/180))/Math.PI:
9==this.Z()?(n=this.fov.Dl,q=355):12==this.Z()&&(n=this.fov.Cl,q=360);e.pa||(n=Math.max(160,n));c.fov>n&&(c.fov=n);12==this.Z()&&(2*b>q&&(c.fov=q/a),m=this.Gb()/2,2*m>q&&(c.fov=q),m=this.Gb()/2,b=a*m);2*m>this.u.max-this.u.min&&180>this.u.max-this.u.min&&(m=(this.u.max-this.u.min)/2,c.fov=this.bn(2*m));90>this.u.max?c.u+m>this.u.max&&(c.u=this.u.max-m):c.u>this.u.max&&(c.u=this.u.max);-90<this.u.min?c.u-m<this.u.min&&(c.u=this.u.min+m):c.u<this.u.min&&(c.u=this.u.min);e=this.pan.max-this.pan.min;
359.99>e&&(a=90,n=Math.tan(m*Math.PI/180),q=Math.tan((Math.abs(c.u)+m)*Math.PI/180),q=Math.sqrt(q*q+1)/Math.sqrt(n*n+1),m=180*Math.atan(q*Math.tan(b*Math.PI/180))/Math.PI,2*m>e&&(q=Math.tan(e*Math.PI/360)/Math.tan(b*Math.PI/180),e=q*Math.sqrt(n*n+1),q=Math.sqrt(e*e-1),a=180/Math.PI*Math.atan(q)),c.pan+m>this.pan.max&&(c.pan=this.pan.max-m,h.active&&(h.speed=-h.speed,this.pan.d=0)),c.pan-m<this.pan.min&&(c.pan=this.pan.min+m,h.active&&(h.speed=-h.speed,this.pan.d=0)),c.u+b>a&&(c.u=a-b),c.u-b<-a&&(c.u=
-a+b))}};f.prototype.zg=function(c,a,b,e,h){var m=this.M.zl-1-a,n=this.M.Al,q="x";switch(c){case 0:q="f";break;case 1:q="r";break;case 2:q="b";break;case 3:q="l";break;case 4:q="u";break;case 5:q="d";break;case "vr":q="vr"}h&&(c+="l",q+="l");h=this.o.lp;for(var v=0;3>v;v++)n=h(n,"c",c),n=h(n,"s",q),n=h(n,"r",a),n=h(n,"l",m),n=h(n,"x",b),n=h(n,"y",e),n=h(n,"v",e),n=h(n,"h",b);return this.o.vb(n)};f.prototype.cs=function(c,a,b){b.Mc=c.width/this.M.W*a.kh;b.xd=c.height/this.M.W*a.lh;b.Cd=c.width/this.M.W*
a.Kh;b.Dd=c.height/this.M.W*a.Lh;b.Mc=Math.min(Math.max(0,Math.floor(b.Mc)),c.Y-1);b.xd=Math.min(Math.max(0,Math.floor(b.xd)),c.sa-1);b.Cd=Math.min(Math.max(0,Math.floor(b.Cd)),c.Y-1);b.Dd=Math.min(Math.max(0,Math.floor(b.Dd)),c.sa-1)};f.prototype.Ju=function(){if(!(6>this.cube.Uf.length))for(var c=0;6>c;c++){var a=this.cube.Uf[c];var b=[];b.push(new y.Ra(-1,-1,-1,0,0));b.push(new y.Ra(1,-1,-1,1,0));b.push(new y.Ra(1,1,-1,1,1));b.push(new y.Ra(-1,1,-1,0,1));for(var e=0;4>e;e++)4>c?b[e].Ma(-Math.PI/
2*c):b[e].Ia(Math.PI/2*(4==c?-1:1)),this.Sa&&(b[e].tb(this.Sa.X*Math.PI/180),b[e].Ia(-this.Sa.pitch*Math.PI/180)),b[e].uf(-this.pan.m),b[e].Td(this.u.m),b[e].vf(this.X.m);b=this.o.Ck(b);a.Fc=0<b.length;if(a.Fc){a=a.Vh;a.kh=b[0].Gd;a.Kh=b[0].Gd;a.lh=b[0].dc;a.Lh=b[0].dc;for(e=1;e<b.length;e++)a.kh=Math.min(a.kh,b[e].Gd),a.Kh=Math.max(a.Kh,b[e].Gd),a.lh=Math.min(a.lh,b[e].dc),a.Lh=Math.max(a.Lh,b[e].dc);a.wi=a.Kh-a.kh;a.hk=a.Lh-a.lh;a.scale=Math.max(a.wi,a.hk)}else a.Vh.wi=-1,a.Vh.hk=-1}};f.prototype.Jo=
function(){for(var c=0;c<this.M.levels.length;c++){var a=this.M.levels[c],b;for(b in a.Ka)a.Ka.hasOwnProperty(b)&&(a.Ka[b].visible=!1)}};f.prototype.An=function(){var c=0,a=this.o.C,b=Math.tan(Math.min(this.Gb(),175)*Math.PI/360),e=a.height/(2*b);e*=1+a.width/a.height*b/2;for(e*=Math.pow(2,1<this.o.devicePixelRatio?this.M.Io:this.M.Ho);this.M.levels.length>=c+2&&!this.M.levels[c+1].sf&&this.M.levels[c+1].width>e;)c++;return c};f.prototype.pt=function(){if(this.o.H.pp&&this.o.H.Pd){var c=this.Kl;c.pan=
this.pan.m;c.u=this.u.m;c.fov=this.fov.m;this.Lf(c);this.Lf(c);this.Lf(c);var a=c.pan-this.pan.m,b=c.u-this.u.m;c=c.fov-this.fov.m;if(0!=a||0!=b||0!=c){var e=.2+.9*Math.min((Math.abs(a)+Math.abs(b)+Math.abs(c))/Math.abs(Math.min(this.fov.m,90))*.3,1);this.pan.m+=a*e;this.u.m+=b*e;this.fov.m+=c*e;this.o.ja.Vl=.3;this.update()}else this.o.ja.Vl=0}else this.Se();if(isNaN(this.pan.m)||1E7<this.pan.m||-1E7>this.pan.m)this.pan.m=0;if(isNaN(this.u.m)||1E7<this.u.m||-1E7>this.u.m)this.u.m=0;if(isNaN(this.X.m)||
1E7<this.X.m||-1E7>this.X.m)this.X.m=0;if(!this.kj()){for(;360<this.pan.m;)this.pan.m-=360;for(;-360>this.pan.m;)this.pan.m+=360}};return f}();y.qq=r})(ggP2VR||(ggP2VR={}));var S=!1;
(function(y){var w=function(){return function(){this.fov=this.u=this.pan=0}}(),r=function(){return function(){this.kn=-1E7;this.qo=!1}}(),f=function(){function c(a,b){this.Is="TGljZW5zZTogTGFudHl4IFRlY25vbG9naWEgRWlyZWxp";this.O=new y.qq(this);this.pan=this.O.pan;this.u=this.O.u;this.X=this.O.X;this.jc=this.O.jc;this.fov=this.O.fov;this.yb=0;this.Sa=this.O.Sa;this.C={width:10,height:10};this.Kk=new y.Ra;this.crossOrigin="anonymous";this.Nd=this.Cf=0;this.Gf=1;this.gq={};this.wg=this.Ad=!1;this.Pa={};this.Fj=this.$g="";this.wl=!1;this.ha=
{start:{x:0,y:0},oa:{x:0,y:0},Rd:{x:0,y:0},m:{x:0,y:0},ga:{x:0,y:0}};this.U={Vc:!1,ed:!1,ij:function(){return this.ed||this.Vc},Bn:0,startTime:0,start:{x:0,y:0},oa:{x:0,y:0},Rd:{x:0,y:0},m:{x:0,y:0},ga:{x:0,y:0},Wh:!1,xg:HTMLElement=null};this.Xf=this.Wf=!0;this.ja={enabled:!0,oa:{x:0,y:0},ga:{x:0,y:0},Vl:0,fov:{active:!1,ic:0,center:{enabled:!1,x:0,y:0}}};this.ib={alpha:0,beta:0,gamma:0,orientation:0,mf:0,ai:!0,fadeIn:0};this.th={alpha:0,beta:0,gamma:0,orientation:0};this.B={src:[],Re:4,width:640,
height:480,Rc:!1,hg:!1,Sj:!0,lm:!1,ge:"loop",Vj:"",j:HTMLVideoElement=null,sm:!1,texture:WebGLTexture=null,ek:WebGLBuffer=null,mi:WebGLBuffer=null,fj:WebGLBuffer=null,format:1,rh:0,flipY:1,nb:function(){return 0},Xl:function(){},loop:function(){return!1}};this.mj=0;this.control=this.mb=this.Ha=this.$=this.Bc=this.Wa=this.da=null;this.sd=[];this.ob=!1;this.bh=1;this.ta=null;this.ae=this.Ke=this.bf=!1;this.Qg=0;this.Id=.02;this.qk=0;this.rk=!1;this.pk=this.Ai=this.Rg=this.Ff=this.Xm=0;this.Vm=-1;this.rc=
"";this.Tl=this.ze=!1;this.Uh=0;this.Yg=[];this.Ik="";this.Zg=[];this.Ag=this.Ge=1;this.pg=!1;this.v={enabled:!1,timeout:5,active:!1,vg:!1,speed:.4,Zj:0,po:!1,wj:0,Ro:!0,mg:"",Qo:!1,Ig:!1,od:!1,Bi:"",hn:!1,Jd:"Animation01",Hf:!1,tj:!1,om:!1,startTime:0,gd:0,jh:!1,Li:!1,pj:0,Bd:0,Gh:0,Hh:0,Fh:0,Eo:0};this.F={active:!1,aborted:!1,speed:.1,pan:0,u:0,X:0,fov:70,li:70,Gh:0,Hh:0,Fo:0,Fh:0,Jb:0,Yh:0,yl:0,Cm:!1,Ph:!1,Um:0,Tm:0,ej:!1};this.Em=null;this.jf={pan:-1,u:-1,fov:-1};this.xl=0;this.gk=this.fa=null;
this.Jg={};this.vi={};this.Bf={};this.jb={};this.fb={};this.ee=[];this.Wm={};this.Uc={};this.Tc={};this.kg={};this.J={mode:1,Dh:-1,Da:0,cb:0,qd:.05,Qb:255,Pb:1,Ob:255,Nb:.3,cg:!0,Xj:{enabled:!0,width:180,height:20,Yj:0,Wj:1,background:!0,Ob:16777215,Nb:1,Qb:0,Pb:1,tk:3,Di:1,ik:!0},Lb:[],vc:[],nd:[],Qj:[]};this.Ea=null;this.K=[];this.Gp=!1;this.S=[];this.V=[];this.kb=[];this.Mb=[];this.Ie=[];this.Ua=[];this.ya=[];this.wc=[];this.Je=[];this.xf=[];this.dg=this.Ed=!1;this.ba=1;this.ra=this.we=this.Rb=
this.hc=null;this.gh={};this.ac={};this.Op=this.yg="";this.Np=-1;this.jt={target:0,current:0,qd:.01,delay:2,Pk:0,Mi:!1,Jq:!1};this.margin={left:0,top:0,right:0,bottom:0};this.H={Jh:!1,Js:!1,mc:!1,re:!1,Pd:!0,to:!1,km:1,pp:!1,Df:!0,Mk:!0,Wg:!0,Xg:!0,Ji:!1,eg:!1,qp:!0,sensitivity:8};this.Mh=[];this.dh=!0;this.la={x:0,y:0};this.ui=this.Fg=this.Eg=this.$d=this.pa=!1;this.dk=this.Pu=!0;this.nl=!1;this.he=!0;this.Gg=this.kl=this.ml=!1;this.aq=!0;this.uh=!1;this.eb=this.be="";this.Tb="transition";this.wd=
"transform";this.Pf="perspective";this.er="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC";this.wb={width:0,height:0};this.Gn=new y.Ra;this.Fn=new y.Ra;this.Hn=new y.Ra;this.In=new y.Ra;this.En=new y.Ra;this.ff=!1;this.Do=this.wa="";this.fk=[];this.Fl=[];this.Ah=this.uo=this.yh=this.vo=this.tl=this.Qd=this.yo=this.rl=this.Wl=this.Gc=this.jj=this.fg=this.sl=this.wo=this.ul=this.Ao=
this.il=!1;this.ti=!0;this.Ij=this.hj=!1;this.wh=[];this.devicePixelRatio=1;this.ea=this.D=null;this.Tg=!1;this.Ta=null;this.Ub={enabled:!1,speed:1,running:!1,finished:!0};this.El=!1;this.rj="<<LOG>>";this.Bm=!1;this.Vg=function(h,m){if(0==h.length)return h;var n;var q=[];var v=m.Ej(h[0])-0;for(n=0;n<h.length;n++){var t=n;var x=n+1;x==h.length&&(x=0);var z=m.Ej(h[x])-0;if(0<=v&&0<=z)q.push(h[t]);else if(0<=v||0<=z){var C=z/(z-v);0>C&&(C=0);1<C&&(C=1);var F=new y.Ra;F.Od(h[t],h[x],C);0>v||q.push(h[t]);
q.push(F)}v=z}return q};this.Kl=new w;this.jm=0;this.sc=!1;this.oj=-1;this.Nr=function(h){return h?this.zh()&&(h.clientX||h.clientY)?{x:h.clientX,y:h.clientY}:h.pageX||h.pageY?{x:h.pageX,y:h.pageY}:h.clientX||h.clientY?{x:h.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:h.clientY+document.body.scrollTop+document.documentElement.scrollTop}:h.touches&&h.touches[0]?{x:h.touches[0].pageX,y:h.touches[0].pageY}:{x:0,y:0}:{x:0,y:0}};this.ie=function(h){h=this.Nr(h);var m=this.ph();
return{x:h.x-m.x,y:h.y-m.y}};this.vj=1;this.Ui=this.Bo=this.Qk=this.Pl=this.Gj=0;this.Co=!1;this.Ld=!0;this.jn=[5,0,0];this.gb=new y.yi(this);this.gb.cg=!1;this.tn();if(7<this.rj.length){var e=c.ah("bG9n");window[c.ah("Y29uc29sZQ==")][e](c.rn(this.rj))}this.Ae(this.gb);this.checkLoaded=this.sd;this.isLoaded=!1;b&&b.hasOwnProperty("webGLFlags")&&b.webGLFlags&&(this.gq=b.webGLFlags);this.ma();this.Oa=new y.mq(this);this.mn(a);this.Iq();this.userdata=this.Jg=this.hh();this.emptyHotspot=this.gb;this.mouse=
this.la;this.D=new y.nq(this);this.Ta=new y.oq(this);this.ra=new y.wq(this);this.O.ra=this.ra;this.Fa=new y.xq(this);this.cc()}c.prototype.jo=function(a){return-99991===a?this.Is:"7.0 beta 3a/19375"};c.prototype.mr=function(){return this.Gf};c.prototype.It=function(a){0<a&&(this.Gf=a)};c.prototype.nk=function(a){if(""!=a){a=JSON.parse(a);if("object"===typeof a)for(var b in a)if("translations"==b&&this.Pa.hasOwnProperty("translations")){var e=a[b],h;for(h in e)if(this.Pa.translations.hasOwnProperty(h))for(var m=
0;m<e[h].length-1;m++)""!=e[h][m]&&(this.Pa.translations[h][m]=e[h][m]);else this.Pa.translations[h]=e[h]}else this.Pa[b]=a[b];this.Pa.hasOwnProperty("projectLanguage")&&(this.Fj=this.Pa.projectLanguage);this.I("languagechanged",{language:this.$g})}};c.prototype.Kc=function(a,b){var e=a;if(""!=e&&"object"===typeof this.Pa&&this.Pa.hasOwnProperty("languages")&&this.Pa.hasOwnProperty("translations")){var h=this.Pa.languages.indexOf(this.$g);-1!=h&&this.Pa.translations.hasOwnProperty(a)&&(a=this.Pa.translations[a],
Array.isArray(a)&&a.length>h&&""!=a[h]&&(e=a[h]))}if(b&&0<b.length)for(h=0;h<b.length;h++)e=e.replace(new RegExp("%"+String(h+1),"g"),b[h]);return e};c.prototype.cm=function(a){this.wl=!0;a=a.replace("_","-");if("object"===typeof this.Pa&&this.Pa.hasOwnProperty("languages")&&this.Pa.hasOwnProperty("translations")&&this.Fj!=a){for(var b=-1,e=-1,h="",m=-1,n=-1,q=a.substring(0,2).toUpperCase(),v=0;v<this.Pa.languages.length;v++)if(this.Pa.languages[v].toUpperCase()==a.toUpperCase()){b=v;break}else if(!this.Fj.toUpperCase().startsWith(q)&&
this.Pa.languages[v].toUpperCase().startsWith(q)){if(""==h||-1!=h.indexOf("-"))e=v,h=this.Pa.languages[v]}else for(var t=window.navigator.languages,x=0;x<t.length;x++)!this.Fj.toUpperCase().startsWith(q)&&this.Pa.languages[v].toUpperCase().startsWith(t[x].substring(0,2).toUpperCase())&&(-1==n||x<n)&&(m=v,n=x);b=-1!=b?b:-1!=e?e:m;-1!=b&&(a=this.Pa.languages[b])}this.$g!=a&&(this.$g=a,this.Oq(),this.Pq(),this.$.setAttribute("lang",a),this.I("languagechanged",{language:a}))};c.prototype.Er=function(){return this.$g};
c.prototype.Hk=function(){this.D.enabled=this.ea.enabled;this.D.type=this.ea.type;this.D.ca=this.ea.zoomin;this.D.bd=this.ea.zoomout;this.D.Sg=this.ea.blendtime;this.D.Mg=this.ea.zoomoutpause;this.D.lk=this.ea.zoomfov;this.D.jk=this.ea.zoomafterinfov;this.D.kk=this.ea.zoomafteroutfov;this.D.Ng=this.ea.zoomspeed;this.D.If=this.ea.blendcolor;this.D.Wc=this.ea.softedge;this.ea=null};c.prototype.bu=function(a){this.ea={};this.ea.enabled=!0;this.ea.type=this.D.type;this.ea.zoomin=this.D.ca;this.ea.zoomout=
this.D.bd;this.ea.blendtime=this.D.Sg;this.ea.zoomoutpause=this.D.Mg;this.ea.zoomfov=this.D.lk;this.ea.zoomafterinfov=this.D.jk;this.ea.zoomafteroutfov=this.D.kk;this.ea.zoomspeed=this.D.Ng;this.ea.blendcolor=this.D.If;this.ea.softedge=this.D.Wc;if(a.hasOwnProperty("type")){var b=a.type;if("cut"==b||"crossdissolve"==b||"diptocolor"==b||"irisround"==b||"irisrectangular"==b||"wipeleftright"==b||"wiperightleft"==b||"wipetopbottom"==b||"wipebottomtop"==b||"wiperandom"==b)this.ea.type=b}a.hasOwnProperty("before")&&
(b=Number(a.before),0==b||2==b)&&(this.ea.zoomin=b);a.hasOwnProperty("after")&&(b=Number(a.after),0==b||2==b||3==b||4==b)&&(this.ea.zoomout=b);a.hasOwnProperty("transitiontime")&&(b=Number(a.transitiontime),0<=b&&50>=b&&(this.ea.blendtime=b));a.hasOwnProperty("waitfortransition")&&(this.ea.zoomoutpause=1==a.waitfortransition);a.hasOwnProperty("zoomedfov")&&(b=Number(a.zoomedfov),.01<=b&&50>=b&&(this.ea.zoomfov=b));a.hasOwnProperty("zoomafterinfov")&&(b=Number(a.zoomafterinfov),70<=b&&120>=b&&(this.ea.zoomafterinfov=
b));a.hasOwnProperty("zoomafteroutoutfov")&&(b=Number(a.zoomafteroutfov),.01<=b&&70>=b&&(this.ea.zoomafteroutfov=b));a.hasOwnProperty("zoomspeed")&&(b=Number(a.zoomspeed),.01<=b&&99>=b&&(this.ea.zoomspeed=b));a.hasOwnProperty("dipcolor")&&(this.ea.blendcolor=a.dipcolor);a.hasOwnProperty("softedge")&&(a=Number(a.softedge),0<=a&&1E3>=a&&(this.ea.softedge=a));this.Tg||this.Hk()};c.prototype.lb=function(a,b,e){this.O.lb(a,b,e)};c.prototype.Z=function(){return this.O.Z()};c.prototype.oh=function(){return this.O.oh()};
c.prototype.Dc=function(){return this.O.Dc()};c.prototype.$i=function(){return this.O.$i()};c.prototype.zk=function(a,b){if(0!=a&&4!=a&&12!=a&&9!=a)this.Sc("Unsupported projection type: "+a);else if(this.pa||0==a||4==a||this.Sc("Projection changes require WebGL!"),this.Z()!=a){var e={};e.pan=this.pan.m;e.tilt=this.u.m;e.fov=this.fov.m;e.projection=a;e.timingFunction=3;e.speed=b;a=this.mh(a);e.fov=Math.min(a,e.fov);this.uj(e)}};c.prototype.addListener=function(a,b){(this.gh[a]=this.gh[a]||[]).push(b)};
c.prototype.I=function(a,b){if(a=this.gh[a])for(var e=a.length,h=0;h<e;h++)try{a[h].apply(null,[b])}catch(m){this.Sc(m)}};c.prototype.removeEventListener=function(a,b){var e=this.gh[a];if(e){var h;var m=0;for(h=e.length;m<h;m++)if(e[m]===b){1===h?delete this.gh[a]:e.splice(m,1);break}}};c.prototype.At=function(){this.ob=!0};c.prototype.os=function(){return this.R};c.prototype.Dq=function(a,b,e,h){if(!this.ac.hasOwnProperty(a)){var m=new r;this.ac[a]=m;m.type=b;"undefined"!==typeof e&&this.Be(a,e);
"object"===typeof h&&this.Bp(a,h);return!0}return!1};c.prototype.Pn=function(a){var b=document.cookie.indexOf(a+"="),e="";-1!=b&&(b=b+a.length+1,a=document.cookie.indexOf(";",b),-1==a&&(a=document.cookie.length),e=decodeURIComponent(document.cookie.substring(b,a)));return e};c.prototype.eu=function(a,b){0==a.type?a.value="string"===typeof b?b:b.toString():1==a.type?a.value="string"===typeof b?parseFloat(b):"number"===typeof b?b:b?1:0:2==a.type&&(a.value="string"===typeof b?"false"!==b&&""!==b&&"0"!==
b:"number"===typeof b?0!=b:b)};c.prototype.Bp=function(a,b){if(this.ac.hasOwnProperty(a)&&"object"===typeof b){var e=this.ac[a];b.hasOwnProperty("cookiePath")&&(e.ln=String(b.cookiePath));b.hasOwnProperty("cookieExpireDays")&&(e.kn=parseFloat(b.cookieExpireDays));if(b.hasOwnProperty("keep")&&(e.vl=!!b.keep,e.vl&&0<document.cookie.length))if(""!=this.yg){if(-1!=document.cookie.indexOf(this.yg+"=")){var h=JSON.parse(this.Pn(this.yg));h.hasOwnProperty(a)&&this.Be(a,h[a])}}else h="ggvar_"+a,-1!=document.cookie.indexOf(h+
"=")&&(h=this.Pn(h),this.Be(a,h));b.hasOwnProperty("ignoreInState")&&(e.qo=b.ignoreInState);b.hasOwnProperty("customProperty")&&"object"===typeof b.customProperty&&(b=b.customProperty,this.fb.hasOwnProperty(a)?(this.fb[a].variabletype!=b.variableType||this.fb[a].propertytype!=b.propertyType)&&console.log("Custom property added as variable has different types than custom property from project."):this.fb[a]={xi:b.variableType,Zh:b.propertyType,Ok:b.defaultValue});return!0}return!1};c.prototype.au=function(a,
b){this.yg=a;b&&"object"===typeof b&&(b.hasOwnProperty("cookiePath")&&(this.Op=String(b.cookiePath)),b.hasOwnProperty("cookieExpireDays")&&(this.Np=parseFloat(b.cookieExpireDays)))};c.prototype.Ym=function(a,b,e){-1<=b&&(a+="; max-age="+86400*b);""!=e&&(a+="; path="+e);return a};c.prototype.rr=function(a,b){switch(b){case 0:return a;case 1:return a.toString();case 2:return a?"true":"false"}};c.prototype.Qn=function(a,b){switch(b){case 0:return a;case 1:return Number(a);case 2:return"true"==a}};c.prototype.Be=
function(a,b,e){void 0===e&&(e=!0);if(this.fb.hasOwnProperty(a)){var h=this.rr(b,this.fb[a].xi);0==this.fb[a].Zh?this.zp(this.wa,a,h):1==this.fb[a].Zh&&this.T&&this.bm(this.wa,this.T.id,a,h)}if(this.ac.hasOwnProperty(a)){h=this.ac[a];if(h.value!=b){this.eu(h,b);if(h.vl&&e){if(""!=this.yg){e={};for(var m=0,n=Object.keys(this.ac);m<n.length;m++)h=n[m],this.ac[h].vl&&(e[h]=encodeURIComponent(this.ac[h].value.toString()));e=this.yg+"="+JSON.stringify(e);e=this.Ym(e,this.Np,this.Op)}else e="ggvar_"+a+
"="+encodeURIComponent(b.toString()),e=this.Ym(e,h.kn,h.ln?h.ln:"");document.cookie=e}this.I("varchanged_"+a,{value:b})}return!0}return!1};c.prototype.fl=function(a,b){void 0===b&&(b="");if(this.fb.hasOwnProperty(a)){if(0==this.fb[a].Zh)return b=this.$n(this.wa,a),this.Qn(b,this.fb[a].xi);if(1==this.fb[a].Zh){if(""!=b||this.T&&this.T!=this.gb)return b=this.Zk(this.wa,""!=b?b:this.T.id,a),this.Qn(b,this.fb[a].xi);switch(this.fb[a].xi){case 0:return"";case 1:return 0;case 2:return!1}}}if(this.ac.hasOwnProperty(a))return this.ac[a].value};
c.ah=function(a){var b="",e=0;a=a.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(e++));var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(e++));var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(e++));var q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(e++));h=h<<2|m>>4;m=(m&15)<<4|n>>2;var v=(n&3)<<6|
q;b+=String.fromCharCode(h);64!=n&&(b+=String.fromCharCode(m));64!=q&&(b+=String.fromCharCode(v))}while(e<a.length);return b};c.vu=function(a){for(var b=[1,1,1,1,2,2,3,0],e=a.length,h="",m=0;m<e;){var n=a.charCodeAt(m++);if(n&128){var q=b[n>>3&7];if(!(n&64&&q)||m+q>e)return null;for(n&=63>>q;0<q;--q){var v=a.charCodeAt(m++);if(128!=(v&192))return null;n=n<<6|v&63}}h+=String.fromCharCode(n)}return h};c.rn=function(a){return c.vu(c.ah(a))};c.prototype.tn=function(){this.devicePixelRatio=window.devicePixelRatio||
1;this.Ao=!!navigator.userAgent.match(/(Windows|Win)/g);this.ul=!!navigator.userAgent.match(/(Mac|Macintosh|Mac_powerpc)/g)&&!navigator.userAgent.match(/(like Mac)/g);this.wo=!!navigator.userAgent.match(/(Linux|Ubuntu)/g);this.sl=!!navigator.userAgent.match(/(MSIE)/g);this.fg=!!navigator.userAgent.match(/(Edge|EdgA|Edg)/g);this.jj=!!navigator.userAgent.match(/(Firefox)/g);if(this.Gc=!!navigator.userAgent.match(/(Safari)/g)){var a=navigator.userAgent.indexOf("Safari");this.md=navigator.userAgent.substring(a+
7);a=navigator.userAgent.indexOf("Version");-1!=a&&(this.md=navigator.userAgent.substring(a+8));this.md=this.md.substring(0,this.md.indexOf(" "));this.md=this.md.substring(0,this.md.indexOf("."));this.Wl=!0}this.yo=!!navigator.userAgent.match(/(SamsungBrowser)/g);if(this.rl=!!navigator.userAgent.match(/(Chrome)/g))this.Gc=!1;this.Qd=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g);this.tl=!!navigator.userAgent.match(/(iPad)/g)||this.ul&&2<navigator.maxTouchPoints;this.vo=!!navigator.userAgent.match(/(iPhone|iPod)/g);
this.yh=!!navigator.userAgent.match(/(android)/i);this.uo=!!navigator.userAgent.match(/(IEMobile)/i);this.Ah=this.Qd||this.yh||this.uo||this.tl;/iP(hone|od|ad)/.test(navigator.platform)&&(a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),this.wh=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||"0",10)]);this.hj=!window.requestAnimationFrame;a=["Webkit","Moz","O","ms","Ms"];this.eb="";this.Tb="transition";this.wd="transform";this.Pf="perspective";for(var b=0;b<a.length;b++)"undefined"!==typeof document.documentElement.style[a[b]+
"Transform"]&&(this.eb="-"+a[b].toLowerCase()+"-",this.Tb=a[b]+"Transition",this.wd=a[b]+"Transform",this.Pf=a[b]+"Perspective");this.nl=ma();this.pa=na();this.Eg=this.nl;this.pa&&(this.Eg=!1);this.ze=!0;this.Tl=!1;if(this.Qd||this.yh)this.yp(80),this.O.tm=2;this.Sc("Pano2VR player "+this.jo()+" - Prefix:"+this.eb+", "+(this.nl?"CSS 3D available":"CSS 3D not available")+", "+(this.pa?"WebGL available":"WebGL not available"));S&&this.N("Pano2VR Debug version!");try{window.AudioContext=window.AudioContext||
window.webkitAudioContext,this.xa=new AudioContext}catch(e){this.xa=null}this.Gc&&(!this.Wl||9>Number(this.md))&&(this.xa=null);this.Gc&&!this.Qd&&12<=Number(this.md)&&13>Number(this.md)&&(this.xa=null);this.Gc&&this.Qd&&13==Number(this.wh[0])&&(1==Number(this.wh[1])||2<=Number(this.wh[1]))&&(this.xa=null);this.ti=this.vo?this.Gc&&this.Wl&&10<=Number(this.md)?!0:!1:!0};c.prototype.N=function(a){if(S){var b=document.getElementById("gg_debug");b&&(b.innerHTML=a.toString()+"<br />");window.console&&
window.console.log(a)}};c.prototype.Im=function(a){if(S){var b=document.getElementById("gg_debug");b&&(b.innerHTML=a.toString()+"<br />");window.console&&window.console.warn(a)}};c.prototype.Sc=function(a){var b=document.getElementById("gg_debug");b&&(b.innerHTML=a+"<br />");window.console&&window.console.log(a)};c.prototype.yp=function(a){this.O.lg=a};c.prototype.setCrossOrigin=function(a){this.crossOrigin=a};c.prototype.Mt=function(a){this.oe=a};c.prototype.Wr=function(){return this.Uh};c.prototype.Kt=
function(a){this.be=a};c.prototype.On=function(){return this.be};c.prototype.al=function(){return this.Ah};c.prototype.Sn=function(){return this.uh};c.prototype.Dr=function(){return this.ff};c.prototype.Tr=function(){return this.ff?this.Zn().length:1};c.prototype.Ar=function(){return this.v.active};c.prototype.Ot=function(a){this.Ah=!!a};c.prototype.Xi=function(){return this.isLoaded};c.prototype.Cr=function(){return!this.isLoaded};c.prototype.Ye=function(){return Number(this.C.height)/(2*Math.tan(Math.PI/
180*(this.Gb()/2)))};c.prototype.Cp=function(a,b){try{this.isFullscreen&&(a=window.innerWidth,b=window.innerHeight);var e=a-this.margin.left-this.margin.right,h=b-this.margin.top-this.margin.bottom;if(!(10>e||10>h)){var m=window.devicePixelRatio||1;this.pg&&(m=1);this.da.style.width=e+"px";this.da.style.height=h+"px";this.da.style.left=this.margin.left+"px";this.da.style.top=this.margin.top+"px";if(this.pa)try{this.Wa&&(this.Wa.style.position="absolute",this.Wa.style.display="inline",this.Wa.style.width=
e+"px",this.Wa.style.height=h+"px",this.Wa.width=e*m,this.Wa.height=h*m),this.R&&(this.wb.width=e*m,this.wb.height=h*m,this.R.viewport(0,0,this.R.drawingBufferWidth,this.R.drawingBufferHeight))}catch(t){alert(t)}this.Bc&&(this.Bc.style.width=a+"px",this.Bc.style.height=b+"px",this.Bc.width=a,this.Bc.height=b);this.Ha&&(this.Ha.style.width=a+"px",this.Ha.style.height=b+"px",this.mb.style.width=a+"px",this.mb.style.height=b+"px",this.mb.width=a,this.mb.height=b,this.mb.style.left=this.margin.left+"px",
this.mb.style.top=this.margin.top+"px",this.ta&&this.ta!=this.Ha&&(this.ta.style.width=a+"px",this.ta.style.height=b+"px"));if(this.Oa){var n=this.Oa.rd;n.style.width=a+"px";n.style.height=b+"px";n.width=a;n.height=b;n.style.left=this.margin.left+"px";n.style.top=this.margin.top+"px"}this.bf&&(this.ob=!0);var q=this.da.offsetWidth,v=this.da.offsetHeight;if(this.C.width!=q||this.C.height!=v)this.C.width=q,this.C.height=v;this.Ou();this.ta&&this.ta.ggUpdateSize&&this.ta.ggUpdateSize(a,b);this.I("sizechanged",
{w:a,h:b});this.I("playerstatechanged",{})}}catch(t){this.Im(t)}};c.prototype.Zd=function(){this.Bm=!0};c.prototype.cc=function(){this.Cp(this.hc.offsetWidth,this.hc.offsetHeight)};c.prototype.ns=function(){var a={width:0,height:0};a.width=this.C.width;a.height=this.C.height;return a};c.prototype.ph=function(){var a={x:0,y:0},b=this.da.getBoundingClientRect();a.x=b.left;a.y=b.top;return a};c.prototype.Zt=function(a){this.fa=a};c.prototype.Pt=function(a,b,e,h){this.margin.left=a;this.margin.top=b;
this.margin.right=e;this.margin.bottom=h;this.fa=this.skinObj;this.gk=this.vrSkinObj;this.Zd()};c.prototype.Sq=function(a){0==a&&(this.H.Pd=!1);1==a&&(this.H.Pd=!0);2==a&&(this.H.Pd=!this.H.Pd);this.I("viewmodechanged",{});this.I("playerstatechanged",{})};c.prototype.ls=function(){return 1==this.H.Pd?1:0};c.prototype.en=function(a,b){this.J.mode=1==b&&0<this.J.mode?0:Math.round(a);this.update();this.I("polymodechanged",{})};c.prototype.Si=function(a){var b=[];a="#"==a.substr(0,1)?a.substr(1):"^"+
a+"$";a=new RegExp(a,"");for(var e=0;e<this.K.length;e++)"poly"==this.K[e].type&&a.test(this.K[e].id)&&b.push(this.K[e]);return b};c.prototype.Ep=function(a){a=this.Si(a);for(var b=0;b<a.length;b++){var e=this.J.Lb.indexOf(a[b].id);-1==e?(this.J.Lb.push(a[b].id),this.J.vc.push(0),this.J.nd.push(1)):this.J.nd[e]=1}this.update()};c.prototype.no=function(a){a=this.Si(a);for(var b=0;b<a.length;b++){var e=this.J.Lb.indexOf(a[b].id);-1!=e&&(this.J.nd[e]=0,this.J.Qj.push(a[b].id),this.update())}};c.prototype.Au=
function(a){a=this.Si(a);for(var b=0;b<a.length;b++){var e=this.J.Lb.indexOf(a[b].id);-1==e||-1!=e&&0==this.J.nd[e]?this.Ep(a[b].id):this.no(a[b].id);this.update()}};c.prototype.Rq=function(a,b,e,h,m){var n=""==a?this.K:this.Si(a);for(var q=0;q<n.length;q++){var v=n[q];"poly"==v.type&&(v.Ob=b,v.Nb=e,v.Qb=h,v.Pb=m)}""==a&&(this.J.Ob=b,this.J.Nb=e,this.J.Qb=h,this.J.Pb=m);this.update()};c.prototype.Qq=function(a){this.Oa&&(this.Oa.gm=0==a?!0:1==a?!1:!this.Oa.gm,this.update())};c.prototype.Zr=function(){return this.J.mode};
c.prototype.Tq=function(){this.I("viewstatechanged",{})};c.prototype.ms=function(){return 0};c.prototype.Kr=function(a){return"_firstmap"==a?"web":"_firstfloorplan"==a?"file":(a=this.Uc[a])?a.type:"web"};c.prototype.Jr=function(a){"_firstmap"==a?a=this.Rn():"_firstfloorplan"==a&&(a=this.Wi());return(a=this.Uc[a])?a:{}};c.prototype.Rn=function(){var a="",b;for(b in this.Uc){var e=this.Uc[b];"web"==e.type&&1E4>e.index&&(a=b)}return a};c.prototype.Wi=function(){var a="",b;for(b in this.Uc){var e=this.Uc[b];
"file"==e.type&&1E4>e.index&&(a=b)}return a};c.prototype.Qr=function(a,b){"_firstfloorplan"==b&&(b=this.Wi());var e=[];a||(a=this.wa);var h=this.ee[a];h&&(a=h);""===a&&0<Object.keys(this.Tc).length&&(a=Object.keys(this.Tc)[0]);this.Tc[a]&&this.Tc[a][b]&&(e.push(this.Tc[a][b].y),e.push(this.Tc[a][b].x));return e};c.prototype.Rr=function(a,b){"_firstfloorplan"==b&&(b=this.Wi());var e=[];a||(a=this.wa);var h=this.ee[a];h&&(a=h);""===a&&0<Object.keys(this.Tc).length&&(a=Object.keys(this.Tc)[0]);this.kg[a]&&
this.kg[a][b]&&(e.push(this.kg[a][b].x),e.push(this.kg[a][b].y));return e};c.prototype.Wn=function(a){var b=this.ee[a];b&&(a=b);b=this.Vn();for(var e=[],h=0;h<b.length;h++)this.Tc[a][b[h]]&&e.push(b[h]);return e};c.prototype.Ir=function(a){a=this.Wn(a);return 0<a.length?a[0]:""};c.prototype.Vn=function(){var a=[],b;for(b in this.Uc)a.push(b);return a};c.prototype.ys=function(){for(var a in this.Uc)if("web"==this.Uc[a].type)return!0;return!1};c.prototype.xs=function(){for(var a in this.Uc)if("file"==
this.Uc[a].type)return!0;return!1};c.prototype.lp=function(a,b,e){var h=(new RegExp("%0*"+b,"i")).exec(a.toString());if(h){h=h.toString();var m=e.toString();h.charAt(h.length-1)!=b&&(m=(1+e).toString());if(!isNaN(parseFloat(e)))for(;m.length<h.length-1;)m="0"+m;a=a.replace(h,m)}return a};c.prototype.Bs=function(a,b,e){a=Math.atan2(a+1,e);var h=Math.atan2(b+1,e);b=Math.sin(a);e=Math.sin(h);a=Math.cos(a);h=Math.cos(h);this.Gn.init(0,0,-1);this.Fn.init(a,0,-b);this.Hn.init(-a,0,-b);this.In.init(0,h,
-e);this.En.init(0,-h,-e)};c.prototype.Ck=function(a){a=this.Vg(a,this.Gn);a=this.Vg(a,this.Fn);a=this.Vg(a,this.Hn);a=this.Vg(a,this.In);return a=this.Vg(a,this.En)};c.prototype.Yp=function(a){if(!this.ze&&this.Hs!=a){this.Hs=a;var b=this.margin.left+this.C.width/2+"px ";b+=this.margin.top+this.C.height/2+"px ";this.Ha.style[this.Pf]=a+"px";this.Ha.style[this.Pf+"Origin"]=b;this.da.style[this.Pf]=a+"px";this.da.style[this.Pf+"Origin"]=b}};c.prototype.Zk=function(a,b,e){""==a&&(a="node1");return this.jb.hasOwnProperty(a)&&
this.jb[a].hasOwnProperty(b)&&this.jb[a][b].hasOwnProperty(e)?this.jb[a][b][e]:this.fb.hasOwnProperty(e)?this.fb[e].Ok:null};c.prototype.bm=function(a,b,e,h){this.jb.hasOwnProperty(a)||(this.jb[a]={});this.jb[a].hasOwnProperty(b)||(this.jb[a][b]={});this.jb[a][b].hasOwnProperty(e)&&this.jb[a][b][e]==h||(this.jb[a][b][e]=h,this.I("varchanged_"+e,{}))};c.prototype.sr=function(a){return this.fb.hasOwnProperty(a)?this.fb[a].Ok:null};c.prototype.Tn=function(){return this.D.yf||this.D.Fd||this.pa&&(4!=
this.Z()||0!=this.Dc())?!1:!0};c.prototype.xm=function(){var a=new y.Ra(0,0,-100),b=this.Ye(),e=this.O.M;var h=100/this.fov.m;var m=e.width/e.height;e=this.C.height*h*m;h*=this.C.height;for(var n=this.Tn(),q=0;q<this.K.length;q++){var v=this.K[q];if("point"==v.type){var t=!1;if(2==this.yb){var x=(this.pan.m-v.pan)/100/m*e;var z=(this.u.m-v.u)/100*h;Math.abs(x)<this.C.width/2+500&&Math.abs(z)<this.C.height/2+500&&(t=!0)}else a.init(0,0,-100),a.Ia(-v.u*Math.PI/180),a.Ma(v.pan*Math.PI/180),a.Ma(-this.pan.m*
Math.PI/180),a.Ia(this.u.m*Math.PI/180),a.tb(this.X.m*Math.PI/180),.01>a.z?(z=-b/a.z,x=a.x*z,z*=a.y,Math.abs(x)<this.C.width/2+5E3&&Math.abs(z)<this.C.height/2+5E3&&(t=!0)):z=x=0;v.$b=x+this.C.width/2;v.Kb=z+this.C.height/2;v.Ll=v.$b/this.C.width*100;v.Ml=v.Kb/this.C.height*100;v.visible=t;v.px=v.$b;v.py=v.Kb;v.pxp=v.Ll;v.pyp=v.Ml;v.visible=v.visible;if(v.j&&v.j.onUpdatePosition)v.j.onUpdatePosition(this,v);else v.j&&v.j.__div&&("none"!=v.j.__div.style[this.Tb]&&(v.j.__div.style[this.Tb]="none"),
t&&n?(v.j.ggUse3d?(this.ze||this.Yp(b),2==this.yb?(v.j.__div.style[this.wd]="scale("+(100/this.fov.m*500/v.j.gg3dDistance).toFixed(10)+")",v.j.__div.style.left=this.margin.left+x+this.C.width/2+"px",v.j.__div.style.top=this.margin.top+z+this.C.height/2+"px"):(v.j.__div.style.width="1px",v.j.__div.style.height="1px",x="",this.ze&&(x+="perspective("+b+"px) "),x+="translate3d(0px,0px,"+b+"px) ",x+="rotateZ("+this.X.m.toFixed(10)+"deg) ",x+="rotateX("+this.u.m.toFixed(10)+"deg) ",x+="rotateY("+(-this.pan.m).toFixed(10)+
"deg) ",x+="rotateY("+v.pan.toFixed(10)+"deg) ",x+="rotateX("+(-v.u).toFixed(10)+"deg) ",x+="translate3d(0px,0px,"+(-1*v.j.gg3dDistance).toFixed(10)+"px) ",v.j.__div.style[this.wd+"Origin"]="0% 0%",v.j.__div.style[this.wd]=x,v.j.__div.style.left=this.margin.left+this.C.width/2+"px",v.j.__div.style.top=this.margin.top+this.C.height/2+"px")):this.Gp?(v.j.__div.style.left=this.margin.left+this.C.width/2+"px",v.j.__div.style.top=this.margin.top+this.C.height/2+"px",v.j.__div.style[this.wd]="translate3d(0px,0px,-1000px) rotateY(0.1deg) translate3d("+
x+"px,"+z+"px, 0.5px)",v.j.__div.style["transform-style"]="preserve-3d"):(v.j.__div.style.left=this.margin.left+x+this.C.width/2+"px",v.j.__div.style.top=this.margin.top+z+this.C.height/2+"px"),v.j.__div.ggVisible&&(v.j.__div.style.visibility="visible")):(v.j.ggUse3d&&(v.j.__div.style[this.wd]=""),v.j.__div.style.left="-1000px",v.j.__div.style.top="-1000px",v.j.__div.style.visibility="hidden"))}if("poly"==v.type){var C=[];if(2==this.yb)for(v.qf=[],t=0;t<v.vertices.length;t++)z=v.vertices[t],x=(this.pan.m-
z.pan)/100/m*e,z=(this.u.m-z.u)/100*h,x+=this.margin.left+this.C.width/2,z+=this.margin.top+this.C.height/2,v.qf.push({$b:x,Kb:z});else{for(t=0;t<v.vertices.length;t++)z=v.vertices[t],a.init(0,0,-100),a.Ia(-z.u*Math.PI/180),a.Ma(z.pan*Math.PI/180),a.Ma(-this.pan.m*Math.PI/180),a.Ia(this.u.m*Math.PI/180),a.tb(this.X.m*Math.PI/180),C.push(a.clone());C=this.Ck(C);if(0<C.length)for(t=0;t<C.length;t++)a=C[t],.1>a.z?(z=-b/a.z,x=this.C.width/2+a.x*z,z=this.C.height/2+a.y*z):z=x=0,a.$b=x,a.Kb=z;v.qf=C}}}this.I("hotspotsupdated",
{})};c.prototype.qr=function(){for(var a=[],b=0;b<this.K.length;b++){var e=this.K[b];"point"==e.type&&e.j&&e.j.__div&&a.push(e.j.__div)}return a};c.prototype.na=function(a,b){a=Number(a);isNaN(b)&&(b=0);0>b&&(b=0);1<b&&(b=1);return"rgba("+(a>>16&255)+","+(a>>8&255)+","+(a&255)+","+b+")"};c.prototype.lt=function(){var a;if(this.mb&&(this.J.Dh!=this.J.mode&&(this.J.Dh=this.J.mode,this.mb.style.visibility=0<this.J.mode?"inherit":"hidden"),0<=this.J.mode||0<this.J.Lb.length)){this.Eb||(this.Eb=this.mb.getContext("2d"));
if(this.Eb.width!=this.C.width||this.Eb.height!=this.C.height)this.Eb.width=this.C.width,this.Eb.height=this.C.height;this.Eb.clear?this.Eb.clear():this.Eb.clearRect(0,0,this.mb.width,this.mb.height);var b=1;0>=this.J.mode&&(b=0);3==this.J.mode&&(b=this.J.Da);for(a=0;a<this.K.length;a++){var e=this.K[a];var h=b;if("poly"==e.type){var m=e.qf;2==this.J.mode&&(h=e.Da);var n=this.J.Lb.indexOf(e.id);-1!=n&&(h=this.J.vc[n]);this.Eb.fillStyle=this.na(e.Ob,e.Nb*h);this.Eb.strokeStyle=this.na(e.Qb,e.Pb*h);
if(0<m.length){this.Eb.beginPath();for(e=0;e<m.length;e++)h=m[e],0==e?this.Eb.moveTo(h.$b,h.Kb):this.Eb.lineTo(h.$b,h.Kb);this.Eb.closePath();this.Eb.stroke();this.Eb.fill()}}}}};c.prototype.oo=function(a,b,e){var h,m=!1;var n=0;for(h=a.length-1;n<a.length;h=n++){var q=a[n];h=a[h];q.Kb>e!=h.Kb>e&&b<(h.$b-q.$b)*(e-q.Kb)/(h.Kb-q.Kb)+q.$b&&(m=!m)}return m};c.prototype.Ii=function(a,b){var e=-1;if((0<=this.J.mode||0<this.J.Lb.length)&&this.xo())for(var h=0;h<this.K.length;h++){var m=this.K[h];"poly"==
m.type&&m.qf&&0<m.qf.length&&(-1!=this.J.mode||-1!=this.J.Lb.indexOf(m.id))&&this.oo(m.qf,a,b)&&(e=h,m.$b=a,m.Kb=b)}return 0<=e?this.K[e]:!1};c.prototype.xo=function(){return 4==this.Z()&&0==this.Dc()};c.prototype.aspect=function(){return this.C.width/this.C.height};c.prototype.Se=function(){this.O.Se()};c.prototype.update=function(a){void 0===a&&(a=0);this.ob=!0;a&&(this.bh=Math.max(1*a,this.bh))};c.prototype.Un=function(){return 0<this.O.ni||0<this.O.Yd};c.prototype.si=function(){var a=Date.now();
if(2===this.yb)this.xm(),this.pa&&(this.ra.Ku(),this.ra.Xo());else if(0===this.yb)if(!this.pa||4==this.Z()&&0==this.Dc()){var b=this.Ye();this.Bs(this.C.width/2,this.C.height/2,b);this.xm();this.ui?this.ra.Nu():this.Pu&&this.$p();this.ym();this.pa?(this.B.Rc?14==this.B.format?this.ra.Mu():this.ra.hq():0<this.O.M.levels.length?this.ra.Uu():this.ra.Wu(),this.ra.Xo()):(this.Fg&&this.Hu(),this.lt());this.Oa&&this.Oa.kt()}else this.ra.hq(),this.xm(),this.zs();b=Date.now();50<b-a?(this.N("Time between frames: "+
(b-a)),this.pg||(2<this.jm?(this.pg=!0,this.N("disabling HighDPI rendering"),this.cc()):this.jm++)):this.jm=0;this.bf&&this.O.M.kp++};c.prototype.Hu=function(){this.Se();var a;this.Bc&&(a=this.Bc.getContext("2d"));if(this.C.width!==this.da.offsetWidth||this.C.height!==this.da.offsetHeight)this.C.width=this.da.offsetWidth,this.C.height=this.da.offsetHeight;if(a){var b=a.canvas.width/2,e=a.canvas.height/2,h=a.createRadialGradient(b,e,5,b,e,Math.max(b,e));h.addColorStop(0,"#333");h.addColorStop(1,"#fff");
a.rect(0,0,a.canvas.width,a.canvas.height);a.fillStyle=h;a.fill();a.fillStyle="#f00";a.font="20px Helvetica";a.textAlign="center";a.fillText("Pan: "+this.pan.m.toFixed(1),b,e-60);a.fillText("Tilt: "+this.u.m.toFixed(1),b,e-30);a.fillText("Fov: "+this.fov.m.toFixed(1),b,e+0);a.fillText("Node: "+this.Vi(),b,e+30);a.fillText("Title: "+this.Jg.title,b,e+60)}};c.prototype.St=function(a){a=Math.round(a);this.ze=0<(a&1);this.Tl=0<(a&2);this.dk=0<(a&4);this.pg=0<(a&8);4096<=a&&(this.Eg=0<(a&4096),this.pa=
0<(a&8192),this.Fg=0<(a&32768))};c.prototype.bs=function(){var a=0;this.ze&&(a|=1);this.Tl&&(a|=2);this.dk&&(a|=4);this.Eg&&(a|=4096);this.pa&&(a|=8192);this.Fg&&(a|=32768);return a};c.prototype.ym=function(){var a=Math.round(this.Ye());this.ze||this.Yp(a);for(var b=0;b<this.kb.length;b++){var e=this.kb[b];e.zm(a);e.j.hidden=!1}for(b=0;b<this.Mb.length;b++)e=this.Mb[b],e.zm(a),e.j.hidden=!1};c.prototype.$p=function(){for(var a=Math.round(this.Ye()),b=0;b<this.V.length;b++){var e=this.V[b];e.kd||(e.zm(a),
e.j.hidden=!1)}};c.prototype.zs=function(){for(var a=0;a<this.kb.length;a++){var b=this.kb[a];b.wf(!1)}for(a=0;a<this.V.length;a++)b=this.V[a],b.kd||b.wf(!1);for(a=0;a<this.Mb.length;a++)b=this.Mb[a],b.wf(!1)};c.prototype.Ou=function(){try{for(var a=0;a<this.bj();a++){var b=this.hl(a);b.kd||b.Zd()}}catch(e){this.Im(e)}};c.prototype.Pc=function(a){this.he=!1;try{this.Wa=a?a:document.createElement("canvas");var b=this.hc.offsetWidth-this.margin.left-this.margin.right,e=this.hc.offsetHeight-this.margin.top-
this.margin.bottom;if(100>b||100>e)e=b=100;var h=window.devicePixelRatio||1;this.pg&&(h=1);this.da.style.width=b+"px";this.da.style.height=e+"px";this.Wa.style.width=b+"px";this.Wa.style.height=e+"px";this.Wa.width=b*h;this.Wa.height=e*h;this.Wa.style.display="none";this.Wa.style.touchAction="none";this.da.insertBefore(this.Wa,this.da.firstChild);var m=this.gq;m.stencil=!0;m.depth=!0;m.powerPreference="high-performance";m.alpha=this.Gc?!0:!1;this.Qd&&10<=this.wh[0]&&(m.antialias=!1,m.alpha=!1);a=
{};a.flags=m;a.canvas=this.Wa;this.I("beforewebglcontext",a);this.R=this.Wa.getContext("webgl",m);this.R||(this.R=this.Wa.getContext("experimental-webgl",m));if(this.R){var n=this.R;this.wb.width=b*h;this.wb.height=e*h;n.clearColor(0,0,0,0);n.enable(this.R.DEPTH_TEST);n.viewport(0,0,500,500);n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT);4096<=n.getParameter(n.MAX_TEXTURE_SIZE)&&!this.Ah&&(this.O.lg=1<h?4*this.O.lg:2*this.O.lg);this.N("Max tile cnt: "+this.O.lg);this.ra.xh();this.ra.gj();this.ra.ro(this.Ag);
this.ra.so();this.D&&(this.D.xh(),this.D.Pc());this.Oa&&(this.Oa.xh(),this.Oa.Pc())}}catch(q){this.N(q)}this.R?(this.pa=!0,this.I("webglready",{gl:this.R})):alert("Could not initialise WebGL!")};c.prototype.vb=function(a){return a?"{"==a.charAt(0)||"/"==a.charAt(0)||0<a.indexOf("://")||0==a.indexOf("javascript:")?a:this.be+a:this.be};c.prototype.$e=function(){return this.pan.m};c.prototype.Vr=function(){return this.F.pan};c.prototype.cl=function(){for(var a=this.pan.m;-180>a;)a+=360;for(;180<a;)a-=
360;return a};c.prototype.je=function(){for(var a=this.pan.m-this.pan.Rh;-180>a;)a+=360;for(;180<a;)a-=360;return a};c.prototype.Ud=function(a){this.ma();isNaN(a)||(this.pan.m=Number(a));this.update()};c.prototype.Oj=function(a){this.ma();isNaN(a)||(this.pan.m=Number(a)+this.pan.Rh);this.update()};c.prototype.Gi=function(a,b){isNaN(a)||(this.Ud(this.$e()+a),b&&(this.pan.d=a))};c.prototype.dn=function(a,b){this.Gi(a*this.Xe(),b)};c.prototype.$f=function(){return this.u.m};c.prototype.ds=function(){return this.F.u};
c.prototype.Vd=function(a){this.ma();isNaN(a)||(this.u.m=Number(a));this.update()};c.prototype.Hi=function(a,b){this.Vd(this.$f()+a);b&&(this.u.d=a)};c.prototype.fn=function(a,b){this.Hi(a*this.Xe(),b)};c.prototype.sg=function(a){this.O.sg(a)};c.prototype.aj=function(){return this.O.aj()};c.prototype.yd=function(){return this.O.yd()};c.prototype.Gb=function(){return this.O.Gb()};c.prototype.Yk=function(a,b){return this.O.Yk(a,b)};c.prototype.Xk=function(a,b){return this.O.Xk(a,b)};c.prototype.tr=
function(){return this.F.li};c.prototype.ub=function(a){return this.O.ub(a)};c.prototype.$l=function(a){this.O.$l(a)};c.prototype.ei=function(a){this.O.ei(a)};c.prototype.am=function(a){this.O.am(a)};c.prototype.Yl=function(a){this.O.Yl(a)};c.prototype.Zl=function(a,b){if(120<this.yd())this.ub(a);else{var e=this.Zi(b.x,b.y,!0);if(this.ub(a)){b=this.Zi(b.x,b.y,!0);a=e.pan-b.pan;b=e.tilt-b.tilt;if(15<Math.abs(a)||10<Math.abs(b))b=a=0;a*=Math.cos(e.tilt*Math.PI/180);this.pan.Sb-=a;this.u.Sb+=b;this.em(this.pan.m-
a,this.u.m+b)}}};c.prototype.xk=function(a,b){return this.ub(this.yd()+a)?(b&&(this.fov.d=a),!0):!1};c.prototype.Nq=function(a,b){this.Zl(this.yd()+a,b)};c.prototype.Fi=function(a,b){if(!isNaN(a)){var e=a/90*Math.cos(Math.min(this.fov.m,90)*Math.PI/360);e=this.fov.m*Math.exp(e);this.ub(e);b&&(this.fov.d=a)}};c.prototype.cn=function(a,b,e){if(!isNaN(a)){var h=a/90*Math.cos(Math.min(this.fov.m,90)*Math.PI/360);h=this.fov.m*Math.exp(h);this.Zl(h,b);e&&(this.fov.d=a,this.fov.Lc.enabled=!0,this.fov.Lc.x=
b.x,this.fov.Lc.y=b.y)}};c.prototype.em=function(a,b){this.ma();isNaN(a)||(this.pan.m=a);isNaN(b)||(this.u.m=b);this.update()};c.prototype.Ap=function(a,b,e){this.ma();!isNaN(a)&&1E7>a&&-1E7<a&&(this.pan.m=a);!isNaN(b)&&1E7>b&&-1E7<b&&(this.u.m=b);!isNaN(e)&&1E7>e&&-1E7<e&&(this.X.m=e);this.update()};c.prototype.rg=function(a,b,e){this.ma();isNaN(a)||(this.pan.m=a);isNaN(b)||(this.u.m=b);isNaN(e)||this.ub(e);this.update()};c.prototype.rp=function(){this.rg(this.pan.Ga,this.u.Ga,this.fov.Ga)};c.prototype.setLocked=
function(a){this.wp(a);this.xp(a);this.vp(a)};c.prototype.wp=function(a){this.H.mc=!!a};c.prototype.vp=function(a){this.H.Jh=!!a};c.prototype.Hr=function(){return this.H.Jh};c.prototype.xp=function(a){this.H.re=!!a};c.prototype.zr=function(){return this.ja.enabled};c.prototype.Nt=function(a){var b=this.ja;a&&(b.ga.x=0,b.ga.y=0);b.enabled=!!a};c.prototype.ps=function(){return this.H.Df};c.prototype.hu=function(a){this.H.Df=a};c.prototype.Lj=function(a){this.sc=!!a};c.prototype.ur=function(){return this.ol()?
!0:this.kl};c.prototype.cu=function(a,b){void 0===b&&(b=!0);this.aq=b;this.Gg==!a&&(a&&this.ol()?this.mp():((this.Gg=!!a)?this.ib.ai=!0:this.X.m=0,this.I("gyrochanged",{}),this.I("playerstatechanged",{})))};c.prototype.ol=function(){return window.hasOwnProperty("DeviceOrientationEvent")&&DeviceOrientationEvent.hasOwnProperty("requestPermission")&&"function"===typeof DeviceOrientationEvent.requestPermission?!0:!1};c.prototype.mp=function(){var a=this;if(this.ol())try{DeviceOrientationEvent.requestPermission().then(function(b){"granted"===
b&&(a.ib.ai=!0,a.Gg=!0,a.I("gyrochanged",{}),a.I("playerstatechanged",{}))})["catch"](console.error)}catch(b){console.log(b)}};c.prototype.es=function(){return this.Gg};c.prototype.Ur=function(){return this.yh?5:this.tl?6:this.Qd?4:this.Ao?1:this.ul?2:this.wo?3:0};c.prototype.nr=function(){return this.sl?5:this.fg?4:this.jj?2:this.Gc?3:this.rl?1:0};c.prototype.pr=function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?1:0};c.prototype.moveTo=function(a,b,e,h,
m,n){this.ma();if("_blank"!==a&&""!==a){this.F.active=!0;this.F.aborted=!1;this.F.Cm=!1;var q=a.toString().split("/");1<q.length&&(a=Number(q[0]),h=Number(b),b=Number(q[1]),2<q.length&&(e=Number(q[2])));this.F.pan=isNaN(a)?this.pan.m:Number(a);this.F.u=isNaN(b)?this.u.m:Number(b);this.F.fov=!isNaN(e)&&0<e&&180>e?Number(e):this.fov.m;this.F.speed=!isNaN(h)&&0<h?Number(h):1;this.F.X=isNaN(m)?this.X.m:Number(m);void 0!==n?!a||4!=n&&12!=n&&9!=n||(this.F.Jb=n):this.F.Jb=this.Z()}};c.prototype.uj=function(a){this.ma();
var b=0,e=0,h=70,m=4,n=0,q=1;a.hasOwnProperty("pan")&&(b=Number(a.pan),this.F.pan=b);a.hasOwnProperty("tilt")&&(e=Number(a.tilt),this.F.u=e);a.hasOwnProperty("fov")&&(h=Number(a.fov),this.F.fov=h);a.hasOwnProperty("projection")&&(m=Number(a.projection),this.F.Jb=m);a.hasOwnProperty("timingFunction")&&(n=Number(a.timingFunction));a.hasOwnProperty("speed")&&(q=Number(a.speed));0>=q?(this.rg(b,e,h),this.lb(m)):(a=new y.Km,a.Xa="__AutoMove",a.De=this.cl(),a.ii=this.u.m,a.Wd=this.fov.m,a.hi=this.Z(),a.Xd=
b,a.Fe=e,a.ki=h,a.Ee=m,a.Qf=!1,a.Ve=!1,a.We=!1,0==n&&(a.Ve=!0),1==n&&(a.Qf=!0,a.Ve=!0),2==n&&(a.We=!0),a.speed=q,this.F.Tm=this.L,this.L=this.Jn(a),this.F.Um=(new Date).getTime(),this.F.Cm=!0,this.F.active=!0,this.F.aborted=!1,this.F.pan=b,this.F.u=e,this.F.fov=h,this.ae=!1)};c.prototype.Rs=function(a){this.moveTo(this.pan.Ga,this.u.Ga,this.fov.Ga,a)};c.prototype.Ss=function(a,b){var e={};e.pan=this.pan.Ga;e.tilt=this.u.Ga;e.fov=this.fov.Ga;e.projection=this.oh();e.timingFunction=b;e.speed=a;this.uj(e)};
c.prototype.Aq=function(a,b,e,h){var m=new y.yi(this);m.type="point";m.pan=b;m.u=e;m.id=a;m.j={};m.j.player=this;m.Tf();m.j.hotspot=m;m.j.__div=document.createElement("div");m.j.__div.appendChild(h);this.K.push(m);m.j.__div.style.position="absolute";m.j.__div.style.left="-1000px";m.j.__div.style.top="-1000px";m.j.__div.ggVisible=!0;this.Ha.insertBefore(m.j.__div,this.Ha.firstChild);this.ob=!0};c.prototype.Iu=function(a,b,e){for(var h=0;h<this.K.length;h++){var m=this.K[h];m.id==a&&(m.pan=b,m.u=e,
m.Tf())}this.ob=!0};c.prototype.yt=function(a){for(var b=-1,e,h=0;h<this.K.length;h++)e=this.K[h],e.id==a&&(b=h);-1<b&&(e=this.K.splice(b,1).pop(),e.j&&e.j.__div&&this.Ha.removeChild(e.j.__div))};c.prototype.Yr=function(){for(var a=[],b=0;b<this.K.length;b++){var e=this.K[b];"point"==e.type&&a.push(String(e.id))}return a};c.prototype.yr=function(a){for(var b=0;b<this.K.length;b++){var e=this.K[b];if(e.id==a)return b={},b.id=a,b.pan=e.pan,b.tilt=e.u,b.pxp=e.Ll,b.pyp=e.Ml,b.url=e.url,b.target=e.target,
b.distance=e.distance,b.title=e.title,b.description=e.description,b.skinid=e.im,e.dd&&(b.customimage=e.dd,b.customimagewidth=e.Ue,b.customimageheight=e.ud,b.use3D=e.Af,b.distance3D=e.Ni),e.j&&e.j.__div&&(b.div=e.j.__div),b}};c.prototype.eq=function(a,b){this.ha.start.x=a;this.ha.start.y=b;this.ha.oa.x=a;this.ha.oa.y=b;this.ja.oa.x=a;this.ja.oa.y=b;this.Pl++;this.pan.Sb=this.pan.m;this.u.Sb=this.u.m};c.prototype.bq=function(a,b){var e=this.Gb();this.pan.Sb+=a*e/this.C.height;this.u.Sb+=b*e/this.C.height;
this.pan.m=this.pan.Sb;this.u.m=this.u.Sb};c.prototype.cq=function(a,b){this.ha.m.x=a;this.ha.m.y=b;this.ha.ga.x=this.ha.m.x-this.ha.oa.x;this.ha.ga.y=this.ha.m.y-this.ha.oa.y;this.H.Pd&&(this.ha.oa.x=this.ha.m.x,this.ha.oa.y=this.ha.m.y,this.update())};c.prototype.ma=function(){this.v.active&&(this.v.active=!1,this.I("autorotatechanged",{}),this.pan.d=0,this.u.d=0,this.fov.d=0,this.fov.Lc.enabled=!1);this.F.active&&(this.F.active=!1,this.pan.d=0,this.u.d=0,this.fov.d=0,this.fov.Lc.enabled=!1);this.Ke=
this.F.aborted=!1;this.v.tj=!1;this.Id=.02;this.Qg=0;this.v.od&&(this.v.enabled=this.v.Hf,this.v.od=this.v.Ig);this.ig=(new Date).getTime()};c.prototype.Fr=function(){return this.ig};c.prototype.bo=function(a,b){a||(a=this.la.x,b=this.la.y);var e=this.C.height/(2*Math.tan(this.Gb()*Math.PI/360));a-=this.C.width/2;b-=this.C.height/2;var h={};h.pan=180*Math.atan(a/e)/Math.PI;h.tilt=180*Math.atan(-b/Math.sqrt(a*a+e*e))/Math.PI;return h};c.prototype.Zi=function(a,b,e){a||(a=this.la.x,b=this.la.y);if(2===
this.yb){var h=this.fov.m/this.C.height;a=-(a-this.C.width/2)*h+this.pan.m;b=-(b-this.C.height/2)*h+this.u.m}else{h=new y.Ra(0,0,1);b=this.bo(a,b);h.Td(-b.tilt);h.uf(b.pan);h.Td(-this.u.m);h.uf(-this.pan.m);e||(h.Td(-this.Sa.pitch),h.vf(this.Sa.X));for(a=h.Gq()-180;-180>a;)a+=360;b=h.Hq()}h={};h.pan=a;h.tilt=b;return h};c.prototype.Qc=function(a){return a==this.control||a&&void 0!==a.ggPermeableMap&&1==a.ggPermeableMap?!0:a&&void 0!==a.ggPermeable&&0==a.ggPermeable?!1:a&&a.ggType&&("container"==a.ggType||
"cloner"==a.ggType||"timer"==a.ggType)?!0:!1};c.prototype.Ak=function(a,b){var e=this.Ye(),h,m;for(h=0;h<this.bj();h++){var n=this.hl(h);if(n.La)return n}for(h=0;h<this.bj();h++)if(n=this.hl(h),!n.kd){var q=[],v=new y.Ra,t;var x=m=void 0;0<n.fov&&(m=Math.tan(n.fov/2*Math.PI/180),x=0<n.lc?m*n.Nc/n.lc:m,n.Ec&&1!=n.Ec&&(x*=n.Ec));for(t=0;4>t;t++){switch(t){case 0:v.init(-m,-x,0);break;case 1:v.init(m,-x,0);break;case 2:v.init(m,x,0);break;case 3:v.init(-m,x,0)}v.Ia(n.Ia*Math.PI/180);v.Ma(-n.Ma*Math.PI/
180);v.tb(n.tb*Math.PI/180);--v.z;v.Ia(-n.u*Math.PI/180);v.Ma(n.pan*Math.PI/180);v.Ma(-this.pan.m*Math.PI/180);v.Ia(this.u.m*Math.PI/180);v.tb(this.X.m*Math.PI/180);q.push(v.clone())}q=this.Ck(q);if(0<q.length){for(t=0;t<q.length;t++)v=q[t],.1>v.z?(x=-e/v.z,m=this.C.width/2+v.x*x,x=this.C.height/2+v.y*x):x=m=0,v.$b=m,v.Kb=x;if(this.oo(q,a,b))return n}}return null};c.prototype.bj=function(){return this.V.length+this.kb.length+this.Mb.length};c.prototype.hl=function(a){return a<this.V.length?this.V[a]:
a<this.V.length+this.kb.length?this.kb[a-this.V.length]:this.Mb[a-(this.V.length+this.kb.length)]};c.prototype.zh=function(){return document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement&&null!=document.msFullscreenElement||document.fullScreen};c.prototype.Qs=function(a){this.Zp(a);window.focus();if(this.vd)this.vd.onclick();(this.Wf||this.Xf&&this.fg)&&this.Ti();this.Rb=null;if(!this.H.mc&&!this.sc){a=a?a:window.event;if(a.which||0==a.which||1==a.which){var b=(new Date).getTime();
if(this.we){this.Rb=this.we;this.U.Vc=!0;this.U.startTime=b;a.stopPropagation();return}if(this.Qc(a.target)){var e;if((e=this.Ak(this.la.x,this.la.y))&&e.me&&(this.Rb=e,void 0!==e.code&&""!==e.code))return;this.eq(a.pageX,a.pageY);this.U.Vc=!0;this.U.startTime=b;a.preventDefault();this.ma()}}this.ha.ga.x=0;this.ha.ga.y=0}};c.prototype.Dg=function(a,b,e){var h=this.J.Xj;h.enabled&&(this.T!=this.gb&&0<=a&&0<=b&&""!=this.T.title?(this.Ea.innerHTML=this.Kc(this.T.title),this.Ea.style.color=this.na(h.Yj,
h.Wj),this.Ea.style.backgroundColor=h.background?this.na(h.Ob,h.Nb):"transparent",this.Ea.style.border="solid "+this.na(h.Qb,h.Pb)+" "+h.Di+"px",this.Ea.style.borderRadius=h.tk+"px",this.Ea.style.textAlign="center",0<h.width?(this.Ea.style.left=a-h.width/2+this.margin.left+"px",this.Ea.style.width=h.width+"px"):(this.Ea.style.width="auto",this.Ea.style.left=a-this.Ea.offsetWidth/2+this.margin.left+"px"),this.Ea.style.height=0<h.height?h.height+"px":"auto",this.Ea.style.top=b+(e?-60:25)+this.margin.top+
"px",this.Ea.style.visibility="inherit",this.Ea.style.overflow="hidden"):(this.Ea.style.visibility="hidden",this.Ea.innerHTML=""))};c.prototype.Zp=function(a){var b=this.ph();this.zh()?(this.la.x=a.clientX-this.margin.left,this.la.y=a.clientY-this.margin.top):(this.la.x=a.clientX-b.x,this.la.y=a.clientY-b.y);return b};c.prototype.Ae=function(a){if("string"==typeof a)for(var b=0;b<this.K.length;b++)if(this.K[b].id==a){a=this.K[b];break}this.T=a&&null!==a&&"object"==typeof a?a:this.gb;this.T==this.gb&&
(a=this.Ii(this.la.x,this.la.y))&&(a.cb=0);this.T.Tf&&this.T.Tf();this.hotspot=this.T;this.I("activehotspotchanged",{hotspot:this.T})};c.prototype.Ps=function(a){a=a?a:window.event;var b=this.Zp(a);if(!this.H.mc&&!this.sc&&!this.we){this.v.active&&(this.v.pj=(new Date).getTime());0==a.buttons&&(this.U.Vc=!1);this.U.Vc&&(a.preventDefault(),(a.which||0==a.which||1==a.which)&&this.cq(a.pageX,a.pageY),this.ma());var e=!1;if(this.T==this.gb||"poly"==this.T.type){var h=this.gb;0<this.K.length&&this.Qc(a.target)&&
(h=this.Ii(this.la.x,this.la.y));this.Jj(h);this.Dg(a.pageX-b.x,a.pageY-b.y,!1);0!=h&&h!=this.gb&&(e=!0)}b=null;!e&&this.Qc(a.target)&&(b=this.Ak(this.la.x,this.la.y));this.v.Li&&(this.v.Li=!1);this.Ha.style.cursor=this.T!=this.gb&&this.T.cg&&e||b&&b.bg?"pointer":"default"}};c.prototype.Jj=function(a){!1===a&&(a=this.gb);this.T!=a&&(this.T!=this.gb&&(0<this.J.mode&&(this.T.cb=0),this.fa&&this.fa.hotspotProxyOut&&this.fa.hotspotProxyOut(this.T.id,this.T.url),this.I("hsproxyout",{id:this.T.id,url:this.T.url})),
a!=this.gb?(this.Ae(a),this.fa&&this.fa.hotspotProxyOver&&this.fa.hotspotProxyOver(this.T.id,this.T.url),this.I("hsproxyover",{id:this.T.id,url:this.T.url}),0<this.J.mode&&(this.J.cb=1,this.T.cb=1)):(this.Ae(this.gb),0<this.J.mode&&(this.J.cb=0)))};c.prototype.Os=function(a){a=a?a:window.event;this.oj=-1;(this.Wf||this.Xf&&this.fg)&&this.Ti();if(!this.H.mc&&!this.sc&&(this.Rb&&(this.Rb.me(),this.we=this.Rb.La?this.Rb:null),this.U.Vc)){this.ma();a.preventDefault();this.U.Vc=!1;a=(new Date).getTime();
var b=Math.abs(this.ha.start.x-this.ha.oa.x)+Math.abs(this.ha.start.y-this.ha.oa.y);if(400>a-this.U.startTime&&0<=b&&20>b){var e=this.Ii(this.la.x,this.la.y);e&&this.Up(e);b=Math.abs(this.ha.Rd.x-this.ha.oa.x)+Math.abs(this.ha.Rd.y-this.ha.oa.y);var h=this.Zi(this.la.x,this.la.y,!0);700>a-this.Ch&&0<=b&&20>b?(e?this.Vp(e):this.H.Mk&&this.$j(),this.I("doubleclick",{pan:-Math.round(100*h.pan)/100,tilt:Math.round(100*h.tilt)/100}),this.Ch=0):(this.I("panoclick",{pan:-Math.round(100*h.pan)/100,tilt:Math.round(100*
h.tilt)/100}),this.Ch=a);this.ha.Rd.x=this.ha.oa.x;this.ha.Rd.y=this.ha.oa.y}}};c.prototype.Lo=function(a){if(!this.H.re&&!this.sc&&(a=a?a:window.event,this.Qc(a.target))){var b=a.detail?-1*a.detail:a.wheelDelta/40;this.H.to&&(b=-b);a.axis&&(-1==this.oj?this.oj=a.axis:this.oj!=a.axis&&(b=0));var e=0<b?1:-1;a.wheelDeltaX&&a.wheelDeltaY&&Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)&&(b=0);0!=b&&(this.H.Df?this.cn(e*this.H.km,this.ie(a),!0):this.Fi(e*this.H.km,!0),this.update());a.preventDefault();
this.ma()}};c.prototype.Eu=function(a){a||(a=window.event);var b=a.touches,e=this.ph();this.la.x=b[0].pageX-e.x;this.la.y=b[0].pageY-e.y;this.He=this.Rb=null;window.focus();this.uh||(this.uh=!0,this.I("hastouch",{}),this.I("playerstatechanged",{}));!this.yo&&(this.Wf||this.Xf&&this.fg)&&this.Ti();if(!this.H.mc&&!this.sc)if(e=(new Date).getTime(),this.we)this.Rb=this.we,this.U.ed=!0,this.U.startTime=e,a.preventDefault(),this.U.Wh=!0;else{if(!this.U.ed&&b[0]){this.U.startTime=e;this.U.start.x=b[0].pageX;
this.U.start.y=b[0].pageY;this.U.oa.x=b[0].pageX;this.U.oa.y=b[0].pageY;e=this.Bb=b[0].target;if(this.Qc(e)){var h;(h=this.Ak(this.la.x,this.la.y))&&h.me&&(this.Rb=h);if(h=this.Ii(this.la.x,this.la.y))this.N(h),this.He=h,this.Jj(h),h=this.ie(a),this.Dg(h.x,h.y,!0);this.eq(b[0].pageX,b[0].pageY);this.U.Bn=b[0].identifier;this.U.ed=!0;a.preventDefault();this.U.Wh=!0;this.ma()}if(e){h=!1;if(null!=this.U.xg)for(var m=this.U.xg;m&&m!=this.control;){if(m.onmouseout)m.onmouseout(a);m=m.parentNode}m=e;for(var n=
!0;m&&m!=this.control;)e!=this.U.xg&&m.onmouseover&&(m.onmouseover(a),7<=this.Gf&&(h=!0)),m.onmousedown&&(m.onmousedown(a),n=!1,h=!0),m.onclick&&(n=!1),m=m.parentNode;this.U.xg=n&&7<=this.Gf&&e!=this.U.xg?e:null;h&&(a.preventDefault(),this.U.Wh=!0)}}1<b.length&&(this.U.ed=!1);!this.ml&&2==b.length&&b[0]&&b[1]&&this.Qc(this.Bb)&&(a=b[0].pageX-b[1].pageX,b=b[0].pageY-b[1].pageY,this.fov.Jp=Math.sqrt(a*a+b*b),this.fov.prev=this.fov.m);this.ha.ga.x=0;this.ha.ga.y=0}};c.prototype.Ti=function(){try{this.ti&&
this.B.j&&(!this.B.Rc&&this.B.Sj&&this.B.j.play(),this.B.j.muted=!1);if(this.xa&&(this.xa.resume(),"suspended"==this.xa.state))return;if(this.Qd&&this.xa&&this.xa.createOscillator){var a=this.xa.createOscillator(),b=this.xa.createGain();a.frequency.value=30;a.type="sine";a.connect(b);b.connect(this.xa.destination);b.gain.value=.01;a.start(0);setTimeout(function(){a.stop()},1E4)}for(b=0;b<this.S.length;b++){var e=this.S[b];(!this.isPlaying(e.id)||e.va)&&0<=e.loop&&e.autoplay&&!this.Ed&&(e.va&&e.Kf(),
this.ve(e.id,e.loop))}for(b=0;b<this.V.length;b++){var h=this.V[b];!this.isPlaying(h.id)&&h.autoplay&&this.ti&&!this.Ed&&this.ve(h.id,h.loop);this.isPlaying(h.id)&&h.autoplay&&this.ti&&!this.Ed&&(h.Hd&&h.Ef(),h.j.muted=!1)}this.Xf=this.Wf=!1}catch(m){this.N(m)}};c.prototype.Du=function(a){a||(a=window.event);var b=a.touches,e=this.ph();this.la.x=b[0].pageX-e.x;this.la.y=b[0].pageY-e.y;if(this.H.mc||this.sc)(this.D.Fd||this.D.yf||this.D.Xc)&&a.preventDefault();else{b[0]&&(this.U.oa.x=b[0].pageX,this.U.oa.y=
b[0].pageY);if(this.Bb){e=this.Bb;for(var h=!1;e&&e!=this.control&&!h;)"scrollarea"==e.ggType&&(h=!0),"map"==e.ggType&&(h=!0),"text"==e.ggType&&(h=!0),e=e.parentNode;h||a.preventDefault()}if(this.U.ed){a.preventDefault();for(e=0;e<b.length;e++)if(b[e].identifier==this.U.Bn){this.cq(b[e].pageX,b[e].pageY);break}this.He&&(e=this.ie(a),this.Dg(e.x,e.y,!0));this.ma()}2==b.length&&b[0]&&b[1]&&(this.U.ed=!1,!this.ml&&this.Qc(this.Bb)&&(this.H.re||(e=b[0].pageX-b[1].pageX,h=b[0].pageY-b[1].pageY,this.fov.qn=
Math.sqrt(e*e+h*h),this.ja.fov.active=!0,this.ja.fov.center.enabled=!0,this.ja.fov.center.x=(b[0].pageX+b[1].pageX)/2,this.ja.fov.center.y=(b[0].pageY+b[1].pageY)/2,this.ja.fov.ic=this.fov.prev*Math.sqrt(this.fov.Jp/this.fov.qn),4==this.Z()&&2!=this.yb&&this.ja.fov.ic>this.fov.max&&(this.ja.fov.ic=this.fov.max),this.ja.fov.ic<this.fov.min&&(this.ja.fov.ic=this.fov.min)),this.ma(),a.preventDefault()))}};c.prototype.Cu=function(a){this.U.Wh&&(this.U.Wh=!1,a.preventDefault());var b=!1;(this.Wf||this.Xf&&
this.fg)&&this.Ti();if(!this.H.mc&&!this.sc){this.U.ed&&(a.preventDefault(),this.ma());var e=(new Date).getTime();var h=void 0;var m=!1;h=Math.abs(this.U.start.x-this.U.oa.x)+Math.abs(this.U.start.y-this.U.oa.y);if(0<=h&&20>h){b=!0;this.Qc(this.Bb)&&(a.preventDefault(),this.Rb&&(this.Rb.me(),this.we=this.Rb.La?this.Rb:null));if(this.Bb)for(h=this.Bb;h&&h!=this.control;)h.onclick&&(h.onclick(),"hotspot"!=h.cv&&(m=!0),b=!1),h=h.parentNode;h=Math.abs(this.U.Rd.x-this.U.oa.x)+Math.abs(this.U.Rd.y-this.U.oa.y);
if(700>e-this.Ch&&0<=h&&20>h){if(this.Qc(this.Bb))if(a.preventDefault(),this.He)this.Vp(this.He);else if(this.H.Mk){var n=this;setTimeout(function(){n.$j()},1)}if(this.Bb)for(h=this.Bb;h&&h!=this.control;)h.ondblclick&&(h.ondblclick(),m=!0,b=!1),h=h.parentNode;this.Ch=0}else this.Ch=e;this.U.Rd.x=this.U.oa.x;this.U.Rd.y=this.U.oa.y}if(this.Bb)for(h=this.Bb;h&&h!=this.control;)this.U.xg!=this.Bb&&h.onmouseout&&(h.onmouseout(a),7<=this.Gf&&(m=!0)),h.onmouseup&&(h.onmouseup(a),7<=this.Gf&&(m=!0)),h=
h.parentNode;m&&a.preventDefault();this.ie(a);this.He&&(this.Dg(-1,-1,!0),b&&this.Up(this.He));this.Bb=null;this.U.ed=!1;this.Jj(this.gb);this.He=null}};c.prototype.Bu=function(a){this.H.mc||this.sc||(this.U.ed=!1);this.He=null;this.Jj(this.gb);this.ie(a);this.Dg(-1,-1,!0)};c.prototype.zo=function(){return null!=this.Bb||this.U.ed||this.U.Vc};c.prototype.Mo=function(a){if(!this.lf&&window.MSGesture){var b=window.MSGesture;this.N("setup gesture");this.lf=new b;this.lf.target=this.control}this.lf&&
this.lf.addPointer(a.pointerId)};c.prototype.Ln=function(a){this.ml=!0;this.vj=1;this.H.mc||this.H.re||this.sc||(a.touches?(this.Bb=a.touches.target,this.Qc(a.target)&&(a.preventDefault(),this.fov.prev=this.fov.m,this.ma())):(a.preventDefault(),this.fov.prev=this.fov.m,this.ma()))};c.prototype.kr=function(a){if(!this.H.mc&&!this.H.re&&!this.sc&&this.Qc(a.target)){a.preventDefault();this.ja.fov.active=!0;this.ja.fov.center.enabled=!0;var b=this.ie(a);this.ja.fov.center.x=b.x;this.ja.fov.center.y=b.y;
this.ja.fov.ic=this.fov.prev/Math.sqrt(a.scale);4==this.Z()&&2!=this.yb&&this.ja.fov.ic>this.fov.max&&(this.ja.fov.ic=this.fov.max);this.update();this.ma()}};c.prototype.Ts=function(a){this.H.mc||this.H.re||this.sc||(a.preventDefault(),1!=a.scale&&(this.ja.fov.active=!0,this.vj*=a.scale,this.ja.fov.center.enabled=!0,a=this.ie(a),this.ja.fov.center.x=a.x,this.ja.fov.center.y=a.y,this.ja.fov.ic=this.fov.prev/Math.sqrt(this.vj),4==this.Z()&&2!=this.yb&&this.ja.fov.ic>this.fov.max&&(this.ja.fov.ic=this.fov.max),
this.update(),this.ma()))};c.prototype.Kn=function(a){this.H.mc||this.H.re||this.sc||(this.ja.fov.active=!1,a.preventDefault(),this.ma(),this.lf&&this.lf.reset&&this.lf.reset())};c.prototype.Fs=function(a){this.H.Jh||this.sc||(this.isFullscreen&&a.preventDefault(),this.mj=a.keyCode,this.ma())};c.prototype.Gs=function(a){this.mj&&(this.mj=0,a.preventDefault())};c.prototype.$s=function(){this.mj=0};c.prototype.Sh=function(){this.isFullscreen&&(this.zh()||this.exitFullscreen(),this.zh()&&(this.$.style.left=
"0px",this.$.style.top="0px"))};c.prototype.gt=function(a,b,e,h){h?(this.th.alpha=a,this.th.beta=b,this.th.gamma=e,this.th.gamma+=90):(this.ib.alpha=a,this.ib.beta=b,this.ib.gamma=e,this.ib.gamma+=90);this.ib.orientation=window.orientation?1*parseInt(""+window.orientation,10):0;e=new y.Mm;a=this.ib;e.uf(-a.alpha);e.vf(-a.beta);e.Td(-a.gamma);e.vf(90-a.orientation);1>e.Ib?-1<e.Ib?(b=180/Math.PI*Math.asin(-e.Ib),a=180/Math.PI*Math.atan2(e.qc,e.pc),e=180/Math.PI*Math.atan2(e.oc,e.nc)):(b=0,a=90,e=-180/
Math.PI*Math.atan2(-e.Yb,e.Zb)):(b=0,a=-90,e=180/Math.PI*Math.atan2(-e.Yb,e.Zb));if(this.Gg)if(this.zo()||this.F.ej||this.ib.ai)this.ib.mf=this.$e()+e,this.ib.fadeIn=0,this.ib.ai=!1;else{h=this.F.active;var m=1;10>this.ib.fadeIn&&(this.ib.fadeIn+=1,m=.1*this.ib.fadeIn);e=-e+this.ib.mf;this.Ud(m*e+(1-m)*this.$e());this.Vd(m*a+(1-m)*this.$f());this.aq?this.sg(m*b+(1-m)*this.aj()):this.sg(0);this.Se();this.F.active=h}};c.prototype.Up=function(a){this.fa&&this.fa.hotspotProxyClick&&this.fa.hotspotProxyClick(a.id,
a.url);this.I("hsproxyclick",{id:this.T.id,url:this.T.url});""!=a.url&&(this.Gl(a.url,a.target),this.Dg(-1,-1,!1))};c.prototype.Vp=function(a){this.fa&&this.fa.hotspotProxyDoubleClick&&this.fa.hotspotProxyDoubleClick(a.id,a.url);this.I("hsproxydblclick",{id:this.T.id,url:this.T.url})};c.prototype.Xe=function(){return Math.min(1,2*Math.tan(Math.PI*Math.min(this.fov.m,90)/360))};c.prototype.Yo=function(){var a=this;setTimeout(function(){a.Yo()},100);9!=a.Gj||a.hj||window.requestAnimationFrame(function(){a.Th();
a.N("restart recover timer")});10<a.Gj&&1<a.Pl&&(a.Sc("recover timer - disabling requestAnimationFrame"),a.hj=!0,a.Th());a.Gj++};c.prototype.fi=function(a){if("__VideoPano"!=this.L.Xa){var b={PAN:{value:0,name:"pan"},$u:{value:1,name:"tilt"},Xu:{value:2,name:"fov"}},e=0,h=0,m=0;a=Math.max(a,0);for(var n in b){var q=b[n],v=this.Ze(this.co(a,q.value,""),q.value,"");var t=(t=this.Yn(v))?this.Mn(v,t,a):v.value;switch(q.value){case 0:q=this.pan.m;if(this.ae&&3!=v.type){if(2!=this.yb){for(;360<t;)t-=360;
for(;-360>t;)t+=360}e=t-q;2!=this.yb&&(180<e&&(e-=360),-180>e&&(e+=360));this.pan.m+=e*this.Id}else this.pan.m=t;this.v.Gh=this.pan.m;break;case 1:q=this.u.m;this.ae&&3!=v.type?(h=t-q,this.u.m+=h*this.Id):this.u.m=t;this.v.Hh=this.u.m;break;case 2:q=this.fov.m,this.ae&&3!=v.type?(m=t-q,this.fov.m+=m*this.Id):this.fov.m=t,this.v.Fh=this.fov.m}}t=this.Z();for(b=Math.floor(a);!this.Ze(b,3)&&0<b;)b--;b=this.Ze(b,3);n=a-b.time;this.ae&&-1!=this.Rg&&this.Ai+this.pk>a?(t=this.mh(this.Rg),this.fov.m>t?this.Ai=
a:(n=(a-this.Ai)/this.pk,n=Math.min(1,n),this.lb(this.Z(),this.Rg,1-n))):(0==b.Cb||n>b.Cb-.3?this.lb(b.value):(n/=b.Cb,this.lb(t,b.value,1-n)),this.v.Eo=b.value);this.ae&&(t=Math.sqrt(e*e+h*h+m*m),.3>t&&(this.ae=!1,this.Id=.02,this.Qg=0),0<this.Qg&&t>this.Qg&&(this.Id+=.01,this.Id=Math.min(this.Id,1)),this.Qg=t)}e=Math.floor(a);h=this.lr(e);for(m=0;m<h.length;m++)if(n=h[m],3>n.Sm)e!=this.Vm&&(t=n.pd,this.ac.hasOwnProperty(t)&&(b=this.ac[t].type,0==b?this.Be(t,n.Dm):1==b?this.Be(t,n.value):2==b&&this.Be(t,
"true"==n.Dm)));else if(b=this.Ze(this.co(a,n.ab,n.pd),n.ab,n.pd),t=(t=this.Yn(b))?this.Mn(b,t,a):b.value,n=n.pd.split("|"),2==n.length)for(b=n[0],n=n[1],v=0;v<this.K.length;v++)q=this.K[v],q.id==b&&("pan"==n?q.pan=t:"tilt"==n&&(q.u=t));this.Vm=e;this.update()};c.prototype.Nn=function(){if(""!=this.v.mg){var a=this.ao(this.v.mg);if(0==a.length||1==a.length&&a[0]==this.wa)return this.wa}a=this.wa;do if(this.v.Ro){var b=1E3;do a=this.Ua[Math.floor(Math.random()*this.Ua.length)];while(b--&&a==this.wa)}else b=
this.Ua.indexOf(a),b++,b>=this.Ua.length&&(b=0),a=this.Ua[b];while(""!=this.v.mg&&!this.nh(a).tags.includes(this.v.mg)&&a!=this.wa);return a};c.prototype.ot=function(a){var b=this.F.speed;this.F.yl&&(b=b*(a.getTime()-this.F.yl)/60);this.F.yl=a.getTime();this.v.jh&&(this.ra.ready()||4==this.Z())&&this.Xi()&&(this.v.jh=!1,this.v.active=!0,this.Ub.running=!0,this.Ub.finished=!1);if(this.F.active||0!=this.F.Jb&&this.ra.ready()){if(this.F.Cm&&"__AutoMove"==this.L.Xa){var e=a.getTime()-this.F.Um;b=e/100;
if(b>=this.L.length){if(this.fi(this.L.length),this.ya.splice(this.ya.indexOf(this.L),1),this.F.active=!1,this.L=this.F.Tm,this.F.Jb=0,this.rg(this.F.pan,this.F.u,this.F.fov),this.pan.Sb=this.F.pan,this.u.Sb=this.F.u,this.F.Ph&&(this.F.Ph=!1,this.v.tj=!0,this.v.od=!0,this.v.active=!0,this.I("autorotatechanged",{})),this.onMoveComplete)this.onMoveComplete()}else this.fi(b)}else{this.pan.d=this.F.pan-this.pan.m;if(360==this.pan.max-this.pan.min){for(;-180>this.pan.d;)this.pan.d+=360;for(;180<this.pan.d;)this.pan.d-=
360}this.u.d=this.F.u-this.u.m;this.X.d=this.F.X-this.X.m;this.fov.d=this.F.fov-this.fov.m;e=b*this.Xe();var h=Math.sqrt(this.pan.d*this.pan.d+this.u.d*this.u.d+this.X.d*this.X.d+this.fov.d*this.fov.d),m=this.pan.m-this.F.Gh,n=this.u.m-this.F.Hh,q=this.X.m-this.F.Fo,v=this.fov.m-this.F.Fh;100*Math.sqrt(m*m+n*n+q*q+v*v)<e&&0==this.F.Jb&&(this.F.aborted=!0);this.F.Gh=this.pan.m;this.F.Hh=this.u.m;this.F.Fo=this.X.m;this.F.Fh=this.fov.m;if(100*h<e||this.F.aborted){if(this.pan.d=0,this.u.d=0,this.X.d=
0,this.fov.d=0,this.fov.Lc.enabled=!1,this.F.active&&(this.F.active=!1,this.pan.m=this.F.pan,this.u.m=this.F.u,this.X.m=this.F.X,this.fov.m=this.F.fov,this.onMoveComplete))this.onMoveComplete()}else h=h>5*e?e/h:.2,this.pan.d*=h,this.u.d*=h,this.fov.d*=h;this.pan.m+=this.pan.d;this.u.m+=this.u.d;this.X.m+=this.X.d;this.H.Df&&this.fov.Lc.enabled?this.Zl(this.fov.m+this.fov.d,this.fov.Lc):this.fov.m+=this.fov.d;0!=this.F.Jb&&(this.F.Jb!=this.Z()?(b=this.mh(this.F.Jb),this.yd()>b?(this.fov.m+=-Math.max((2.5-
1.7*Math.min(Math.sqrt(this.pan.d*this.pan.d+this.u.d*this.u.d+this.X.d*this.X.d)/e,1))*e,this.fov.d)-this.fov.d,this.F.fov=this.fov.m):(this.lb(this.F.Jb,this.Z(),0),this.N("New projection from Target:"+this.Z()),this.F.Yh=0,this.ra.gj())):1>this.F.Yh?(this.F.Yh=Math.min(1,this.F.Yh+.05*b),this.lb(this.Z(),this.Dc(),this.F.Yh)):(this.lb(this.Z(),0,0),this.F.Jb=0,this.ra.gj()))}this.ig=a.getTime();this.update()}else if(this.v.active){e=a.getTime()-this.v.startTime;this.v.pj<this.v.startTime&&(this.v.pj=
this.v.startTime);if((this.v.od||this.Ub.running)&&0<this.ya.length){b=e/100;h=!1;if(this.rc!=this.L.Xa||""!=this.L.Le&&this.v.Jd!=this.L.Le){for(e=0;e<this.ya.length;e++)if(""==this.rc&&this.ya[e].Le==this.v.Jd||""!=this.rc&&this.ya[e].Xa==this.rc&&this.ya[e].Le==this.v.Jd){h=!0;this.L=this.ya[e];this.rc=this.L.Xa;break}!h&&0<this.ya.length&&this.ya[0].Le==this.v.Jd&&(h=!0,this.L=this.ya[0],this.rc=this.L.Xa)}else h=!0;if(h)if(e=(m=this.B.j&&this.B.Rc)&&this.v.om&&!this.Ub.running,this.Ke){h=b;if(e)for(this.B.j.currentTime<
this.Xm&&this.rk&&(this.qk++,this.rk=!1),h=10*(this.qk*this.B.j.duration+this.B.j.currentTime),this.Xm=this.B.j.currentTime,.05>this.B.j.duration-this.B.j.currentTime&&(this.rk=!0);h>=10*this.Ff;)h-=10*this.Ff;if(!m&&b>=this.L.length||m&&!e&&b>=this.L.length||m&&e&&(this.L.Xa!=this.L.Oo||this.L.No!=this.wa)&&b>=this.L.length){this.fi(this.L.length);this.v.Bd=0;this.Ke=!1;if(this.Ub.running){this.sp();return}if(this.v.hn){e=0;do b=this.Wm[this.L.Le],h=Math.floor(Math.random()*Object.keys(b).length),
h=b[h],this.rc=h.cliptitle,b=h.nodeid,h=h.startview,e++;while(b==this.wa&&10>e)}else this.rc=this.L.Oo,b=this.L.No,h=this.L.Xs;this.rc==this.L.Xa&&this.wa==b?1<this.Ua.length&&0<this.v.wj&&(this.v.startTime=a.getTime(),(e=this.Nn())&&e!=this.wa&&(this.ld("{"+e+"}"),this.Ke=!1,this.v.active=!0,this.D.Me=!0)):(this.ff&&b!=this.wa&&(this.ld("{"+b+"}",h),this.D.enabled?(this.v.active=!1,this.D.Me=!0):this.v.active=!0),this.v.startTime=a.getTime())}else this.fi(h),this.v.Bd=h}else if(b=this.L.qa[0],h=
this.L.qa[1],m=this.L.qa[2],n=this.L.qa[3],3!=n.ab&&(n=0),this.v.tj||this.F.aborted||this.Ub.running||e){if(this.Ke=!0,this.v.startTime=0<this.v.Bd?a.getTime()-100*this.v.Bd:a.getTime(),this.ae=e){for(this.Ff=this.qk=0;this.Ff<this.L.length/10;)this.Ff+=this.B.j.duration;h=10*this.B.j.currentTime;for(e=Math.floor(h);!this.Ze(e,3)&&0<e;)e--;e=this.Ze(e,3);e.value==this.Z()?this.Rg=-1:(this.Rg=e.value,this.Ai=h,this.pk=Math.max(5,e.time+e.Cb-h))}}else{e={};if(0<this.v.Bd)e.pan=this.v.Gh,e.tilt=this.v.Hh,
e.fov=this.v.Fh,e.projection=this.v.Eo;else{for(e.pan=b.value;360<e.pan;)e.pan-=360;for(;-360>e.pan;)e.pan+=360;e.tilt=h.value;e.fov=m.value;e.projection=n?n.value:4}e.timingFunction=3;e.speed=1;this.F.Ph=!0;this.uj(e);this.v.active=!0}}else 0<this.v.wj&&this.ff&&e>=1E3*this.v.wj?1<this.Ua.length&&(this.v.startTime=a.getTime(),(e=this.Nn())&&e!=this.wa&&(this.v.gd=a.getTime(),this.v.timeout=0,this.ld("{"+e+"}"),this.v.active=!0,this.D.Me=!0)):(e=a.getTime(),h=b=1E3/60,0!=this.v.gd&&(h=e-this.v.gd),
this.u.d=this.v.Zj*((this.v.po?this.u.Ga:0)-this.u.m)/100,this.fov.d=this.v.Zj*(this.fov.Ga-this.fov.m)/100,this.pan.d=.95*this.pan.d+-this.v.speed*this.Xe()*.05,b=h/b,this.pan.m+=this.pan.d*b,this.u.m+=this.u.d*b,this.fov.m+=this.fov.d*b,this.v.gd=e,this.update());3E3<a.getTime()-this.v.pj&&!this.v.Li&&(this.Ha.style.cursor="none",this.v.Li=!0)}else!this.Ub.finished&&1E3<a.getTime()-this.ig&&(this.ya.splice(this.ya.indexOf(this.L),1),this.L=this.Wk(!1),this.rc=this.L.Xa,this.v.active=!1,this.v.jh=
!0),this.v.enabled&&!this.U.ij()&&a.getTime()-this.ig>1E3*this.v.timeout&&!this.v.jh&&(this.v.vg&&this.Xi()||!this.v.vg)&&(this.v.active=!0,this.v.startTime=a.getTime(),this.v.gd=0,this.I("autorotatechanged",{}),this.pan.d=0,this.u.d=0,this.fov.d=0,this.fov.Lc.enabled=!1),!this.ja.enabled||this.U.ij()||0==this.pan.d&&0==this.u.d&&0==this.fov.d||(this.F.ej=!0,this.pan.d*=.9,this.u.d*=.9,this.fov.d*=.9,this.pan.m+=this.pan.d,this.u.m+=this.u.d,this.H.Df&&this.fov.Lc.enabled?this.cn(this.fov.d,this.fov.Lc):
this.Fi(this.fov.d),1E-4>this.pan.d*this.pan.d+this.u.d*this.u.d+this.fov.d*this.fov.d&&(this.pan.d=0,this.u.d=0,this.fov.d=0,this.fov.Lc.enabled=!1),this.update())};c.prototype.Wp=function(a){var b=this.D;b.Xc=!1;"previewtrack"==b.delay||"videopano"==b.delay&&!this.B.j?0<this.O.M.levels.length?this.O.M.levels[this.O.M.levels.length-1].loaded||(b.Xc=!0):this.ra.ap()||(b.Xc=!0):"videopano"==b.delay&&this.B.j&&!this.B.hg&&(b.Xc=!0);b.Xc||this.Tj(a)};c.prototype.Tj=function(a){a||(a=new Date);var b=
this.D;b.Xc=!1;b.yf=!0;b.Mp=a.getTime();0==b.bd||b.Mg||this.mm()};c.prototype.mm=function(){var a=this.D;4==a.bd?(this.L=this.Wk(!0,a.pm,a.qm,a.li),this.rc=this.L.Xa,this.v.active=!0,this.Ub.running=!0):this.moveTo(a.pm,a.qm,a.li,a.Ng,0,a.Ee)};c.prototype.qt=function(a){var b=this.D;if(!b.Dp){if(b.Fd){var e=a.getTime()-b.jq;e/=1E3*b.iq;1<=e?(b.Il(1),b.Fd=!1,this.zn(),this.Lp(),this.Wp(a)):b.Il(e)}else b.yf&&(e=a.getTime()-b.Mp,e/=1E3*b.Sg,1<=e?(b.yf=!1,this.ig=a.getTime(),this.update(),0!=b.bd&&b.Mg&&
this.mm(),4!=b.bd&&(this.Lj(!1),this.v.active=b.Me,this.I("autorotatechanged",{}),b.Me=!1),this.v.gd=0,this.ea&&this.Hk(),this.Tg=!1):b.Il(e));b=this.jt;b.Jq&&(b.Mi?a.getTime()-b.Pk>=1E3*b.delay&&(b.Mi=!1):(b.current+=b.qd,0>b.current&&(b.current=0,b.qd=-b.qd,b.Mi=!0,b.Pk=a.getTime()),1<b.current&&(b.current=1,b.qd=-b.qd,b.Mi=!0,b.Pk=a.getTime())))}};c.prototype.tt=function(){var a,b=this.J;if(0<b.Lb.length){for(a=0;a<b.Lb.length;a++)b.nd[a]!=b.vc[a]&&(b.nd[a]>b.vc[a]?(b.vc[a]+=.05,b.nd[a]<b.vc[a]&&
(b.vc[a]=b.nd[a])):(b.vc[a]-=.05,b.nd[a]>b.vc[a]&&(b.vc[a]=b.nd[a],-1!=b.Qj.indexOf(b.Lb[a])&&(b.Qj.splice(b.Qj.indexOf(b.Lb[a]),1),b.Lb.splice(a,1),b.nd.splice(a,1),b.vc.splice(a,1)))));this.update()}if(2==b.mode)for(a=0;a<this.K.length;a++){var e=this.K[a];"poly"==e.type&&e.cb!=e.Da&&(e.cb>e.Da?(e.Da+=b.qd,e.cb<e.Da&&(e.Da=e.cb)):(e.Da-=b.qd,e.cb>e.Da&&(e.Da=e.cb)),this.update())}3==b.mode&&b.cb!=b.Da&&(b.cb>b.Da?(b.Da+=b.qd,b.cb<b.Da&&(b.Da=b.cb)):(b.Da-=b.qd,b.cb>b.Da&&(b.Da=b.cb)),this.update())};
c.prototype.st=function(){var a=this.ja;this.U.ij()&&(this.H.Pd?(a.ga.x=.4*(this.ha.oa.x-a.oa.x),a.ga.y=.4*(this.ha.oa.y-a.oa.y),a.oa.x+=a.ga.x,a.oa.y+=a.ga.y):(a.ga.x=.1*-this.ha.ga.x*this.H.sensitivity/8,a.ga.y=.1*-this.ha.ga.y*this.H.sensitivity/8),this.bq(a.ga.x,a.ga.y),this.update());a.fov.active&&(this.H.Df&&a.fov.center.enabled?this.Nq(.4*(a.fov.ic-this.fov.m),a.fov.center):this.xk(.4*(a.fov.ic-this.fov.m)),.001>Math.abs(a.fov.ic-this.fov.m)/this.fov.m&&(a.fov.active=!1),this.update());if(a.enabled&&
(0!=a.ga.x||0!=a.ga.y)&&!this.U.ij()){var b=.9*(1-a.Vl);a.ga.x*=b;a.ga.y*=b;this.F.ej=!0;.01>a.ga.x*a.ga.x+a.ga.y*a.ga.y?(a.ga.x=0,a.ga.y=0):(this.bq(a.ga.x,a.ga.y),this.update())}};c.prototype.rt=function(){if(!this.Xi()&&this.bf&&5<this.O.M.kp){var a,b=0,e=this.sd.length;if(this.Fg)e=50,this.Qk<e&&this.Qk++,b=this.Qk;else for(a=0;a<e;a++)(this.sd[a].complete&&this.sd[a].src!=this.er||""==this.sd[a].src)&&b++;b==e?(this.Uh=1,this.isLoaded=!0,this.ta&&this.ta.ggLoaded&&this.ta.ggLoaded(),this.I("imagesready",
{}),this.v.vg&&this.v.enabled&&!this.F.active&&!this.D.Fd&&(this.v.active=!0,this.v.vg=!1,this.v.startTime=(new Date).getTime(),this.v.gd=0)):this.Uh=b/(1*e);this.I("downloadprogress",{percentLoaded:this.Uh})}};c.prototype.Th=function(){var a=this;a.Ij||(a.hj?setTimeout(function(){a.Ij=!1;a.Th()},1E3/60):window.requestAnimationFrame(function(){a.Ij=!1;a.Th()}));a.Ij=!0;this.Pl=this.Gj=0;a.F.ej=!1;var b=new Date;this.Ui++;120<=this.Ui&&(this.N("F/s: "+Math.round(1E3*this.Ui/(b.getTime()-this.Bo))),
this.Bo=b.getTime(),this.Ui=0);this.I("timer",{});this.pa&&this.ra.cr();this.Bm&&(this.cc(),this.Bm=!1);this.st();this.rt();this.B.j&&this.B.Rc&&!this.Ke&&this.Em&&(this.L=this.Em,this.fi(10*this.B.j.currentTime));this.ot(b);this.O.pt();this.qt(b);this.ra.Lu();(0<=this.J.mode||0<this.J.Lb.length)&&this.tt();this.ck();if(this.jf.pan!=this.pan.m||this.jf.u!=this.u.m||this.jf.fov!=this.fov.m)this.jf.pan=this.pan.m,this.jf.u=this.u.m,this.jf.fov=this.fov.m,this.I("positionchanged",{});this.xl!=this.Z()&&
(this.xl=this.Z(),this.I("projectionchanged",{}));this.ob&&(0<this.bh?this.bh--:(this.ob=!1,this.bh=0),this.D.yf||this.D.Fd||this.D.Xc||this.$d||(this.si(),this.I("renderframe",{})),this.I("repaint",{}));b=this.Un();b!=this.Co&&(b?(this.ta&&this.ta.ggReLoadedLevels&&this.ta.ggReLoadedLevels(),this.I("tilesrequested",{})):(a.ta&&a.ta.ggLoadedLevels&&a.ta.ggLoadedLevels(),this.I("tilesready",{})),this.Co=b)};c.prototype.mh=function(a){switch(a){case 4:a=Math.min(110,this.fov.max);break;case 12:a=Math.min(270,
this.fov.Cl);a=Math.min(360*this.aspect(),a);a=Math.min(360/this.aspect(),a);break;case 9:a=Math.min(270,this.fov.Dl);break;default:a=90}return a};c.prototype.ck=function(){this.Kk.Dn(this.pan.m,this.u.m);for(var a=0;a<this.S.length+this.V.length;a++){if(a<this.S.length)var b=this.S[a];else if(b=this.V[a-this.S.length],b.kd)continue;b.ck()}};c.prototype.ku=function(a,b){var e=this;var h="<<L>>"+String(e.eb);h=h.toUpperCase();"U"!=h.charAt(2)&&(e.H.eg=!1);if(0!=e.Mh.length||!e.H.eg||e.H.Wg||e.H.Xg&&
e.cf()||e.H.Ji)if(e.vd)e.$.removeChild(e.vd),e.vd=null;else{e.vd=document.createElement("div");var m=e.vd;h="left: "+a+"px;top:\t "+(b+"px;z-index: 32000;");h+="position:relative;";h+="display: table;";h+="color: black;";h+="background-color: white;";h+="border: 1px solid lightgray;";h+="box-shadow: 1px 1px 3px #333;";h+="font-family: Verdana, Arial, Helvetica, sans-serif;";h+="font-size: 9pt;";h+="opacity : 0.95;";m.setAttribute("style",h);m.setAttribute("class","gg_contextmenu");h=document.createElement("style");
a=document.createTextNode(".gg_context_row:hover { background-color: #3399FF }");h.type="text/css";h.styleSheet?h.styleSheet.cssText=a.nodeValue:h.appendChild(a);m.appendChild(h);for(a=0;a<e.Mh.length;a++){b=e.Mh[a];var n=document.createElement("div");h="text-align: left;";h+="margin: 0;";h+="padding: 5px 20px;";h+="vertical-align: left;";n.setAttribute("style",h);n.setAttribute("class","gg_context_row");""!=b.url?(h=document.createElement("a"),h.href=b.url,h.target="_blank",h.innerHTML=this.Kc(b.text),
h.setAttribute("style","color: black; text-decoration: none;"),n.appendChild(h)):(h=document.createElement("span"),h.innerHTML=this.Kc(b.text),h.setAttribute("style","color: black; text-decoration: none;"),n.appendChild(h));m.appendChild(n)}0<e.Mh.length&&(!e.H.eg||e.H.Wg||e.H.Xg&&e.cf()||e.H.Ji)&&m.appendChild(document.createElement("hr"));if(e.H.Ji&&e.pa){b=[];b.push({text:this.Kc("Rectilinear Projection"),Xh:4});b.push({text:this.Kc("Stereographic Projection"),Xh:9});b.push({text:this.Kc("Fisheye Projection"),
Xh:12});for(a=0;a<b.length;a++){n=b[a];var q=document.createElement("div");q.setAttribute("class","gg_context_row");h="text-align: left;";h+="margin: 0;";h=e.Z()==n.Xh?h+"padding: 5px 20px 5px 7px;":h+"padding: 5px 20px;";h+="vertical-align: left;";h+="cursor: pointer;";q.setAttribute("style",h);q.onclick=function(v){return function(){e.zk(v,1);e.update()}}(n.Xh);q.innerHTML=e.Z()==n.Xh?"&#10687; "+n.text:n.text;m.appendChild(q)}(!e.H.eg||e.H.Wg||e.H.Xg&&e.cf())&&m.appendChild(document.createElement("hr"))}e.H.Wg&&
(a=document.createElement("div"),a.setAttribute("class","gg_context_row"),h="text-align: left;margin: 0;padding: 5px 20px;",h+="vertical-align: left;",h+="cursor: pointer;",a.setAttribute("style",h),a.onclick=function(){e.$j()},a.innerHTML=e.zh()?this.Kc("Exit Fullscreen"):this.Kc("Enter Fullscreen"),m.appendChild(a));e.H.Xg&&e.cf()&&(a=document.createElement("div"),a.setAttribute("class","gg_context_row"),h="text-align: left;margin: 0;padding: 5px 20px;",h+="vertical-align: left;",h+="cursor: pointer;",
a.setAttribute("style",h),a.onclick=function(){e.Rf()},a.innerHTML="Enter VR",m.appendChild(a));e.H.eg||(a=document.createElement("div"),h="text-align: left;margin: 0;padding: 5px 20px;",h+="vertical-align: left;",a.setAttribute("style",h),a.setAttribute("class","gg_context_row"),h=document.createElement("a"),h.href=c.ah("aHR0cDovL3Bhbm8ydnIuY29tLw=="),h.target="_blank",h.innerHTML=c.ah("Q3JlYXRlZCB3aXRoIFBhbm8yVlI="),7<this.rj.length&&(h.innerHTML+="<br/>"+c.rn(this.rj).replace(/./gm,function(v){return"&#"+
v.charCodeAt(0)+";"})),h.setAttribute("style","color: black; text-decoration: none;"),a.appendChild(h),m.appendChild(a));e.$.insertBefore(e.vd,e.$.firstChild);m.onclick=function(){e.vd&&(e.$.removeChild(e.vd),e.vd=null)};m.oncontextmenu=m.onclick}};c.prototype.Iq=function(){var a=this;var b=a.Ha;a.control=b;a.control=b;setTimeout(function(){a.Th()},10);setTimeout(function(){a.Yo()},200);setTimeout(function(){a.Zd();a.si()},10);b.addEventListener&&(b.addEventListener("touchstart",function(e){a.Eu(e)},
!1),b.addEventListener("touchmove",function(e){a.Du(e)},!1),b.addEventListener("touchend",function(e){a.Cu(e)},!1),b.addEventListener("touchcancel",function(e){a.Bu(e)},!1),b.addEventListener("pointerdown",function(e){a.Mo(e)},!1),b.addEventListener("MSPointerDown",function(e){a.Mo(e)},!1),b.addEventListener("MSGestureStart",function(e){a.Ln(e)},!1),b.addEventListener("MSGestureEnd",function(e){a.Kn(e)},!1),b.addEventListener("MSGestureChange",function(e){a.Ts(e)},!1),b.addEventListener("gesturestart",
function(e){a.Ln(e)},!1),b.addEventListener("gesturechange",function(e){a.kr(e)},!1),b.addEventListener("gestureend",function(e){a.Kn(e)},!1),b.addEventListener("mousedown",function(e){a.Qs(e)},!1),b.addEventListener("mousemove",function(e){a.Ps(e)},!1),document.addEventListener("mouseup",function(e){a.Os(e)},!1),b.addEventListener("mousewheel",function(e){a.Lo(e)},!1),b.addEventListener("DOMMouseScroll",function(e){a.Lo(e)},!1),document.addEventListener("keydown",function(e){a.Fs(e)},!1),document.addEventListener("keyup",
function(e){a.Gs(e)},!1),window.addEventListener("resize",function(){a.Zd()},!1),a.hc.addEventListener("resize",function(){a.Zd()},!1),window.addEventListener("blur",function(){a.$s()},!1),a.$.addEventListener("webkitfullscreenchange",function(){a.Sh()},!1),document.addEventListener("mozfullscreenchange",function(){a.Sh()},!1),window.addEventListener("webkitfullscreenchange",function(){a.Sh()},!1),document.addEventListener("MSFullscreenChange",function(){a.Sh()},!1),document.addEventListener("fullscreenchange",
function(){a.Sh()},!1));b.oncontextmenu=function(e){void 0===e&&(e=window.event);return e.target&&!a.Qc(e.target)?!0:e.ctrlKey?!0:(e=a.ie(e),a.ku(e.x,e.y),!1)};window.addEventListener("deviceorientation",function(e){a.gt(e.alpha,e.beta,e.gamma,e.absolute);null!=e.alpha&&null!=e.beta&&null!=e.gamma&&0==a.kl&&(a.kl=!0,a.I("gyroavailable",{available:!0}),a.I("playerstatechanged",{}))})};c.prototype.Rm=function(){for(var a=0;a<this.K.length;a++)if("point"==this.K[a].type&&(this.fa&&this.fa.addSkinHotspot?
(this.K[a].Tf(),this.K[a].j=this.fa.addSkinHotspot(this.K[a])):(this.K[a].j=new y.lq(this,this.K[a]),this.K[a].dd&&this.K[a].Af&&(this.K[a].j.ggUse3d=!0,this.K[a].j.gg3dDistance=this.K[a].Ni)),this.K[a].j.__div.style.left="-1000px",this.K[a].j.__div.style.top="-1000px",this.K[a].j&&this.K[a].j.__div)){var b=this.Ha.firstChild;b?this.Ha.insertBefore(this.K[a].j.__div,b):this.Ha.appendChild(this.K[a].j.__div)}};c.prototype.Oq=function(){if(!this.fa||!this.fa.addSkinHotspot)for(var a=0;a<this.K.length;a++)"point"==
this.K[a].type&&this.K[a].j.rs()};c.prototype.Pq=function(){for(var a=0;a<this.kb.length;a++)this.kb[a].yk();for(a=0;a<this.Mb.length;a++)this.Mb[a].yk()};c.prototype.Jm=function(){var a,b=document.createElement("fakeelement"),e={OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",transition:"transitionEnd"};for(a in e)if(void 0!==b.style[a])return e[a]};c.prototype.Za=function(a){var b=[];a="#"==a.substr(0,1)?a.substr(1):
"^"+a+"$";a=new RegExp(a,"");for(var e=0;e<this.S.length;e++)a.test(this.S[e].id)&&b.push(this.S[e]);for(e=0;e<this.V.length;e++)a.test(this.V[e].id)&&b.push(this.V[e]);for(e=0;e<this.kb.length;e++)a.test(this.kb[e].id)&&b.push(this.kb[e]);for(e=0;e<this.Mb.length;e++)a.test(this.Mb[e].id)&&b.push(this.Mb[e]);return b};c.prototype.Mr=function(a){if("_videopanorama"==a)return this.B.j;a=this.Za(a);return 0<a.length?a[0].j:null};c.prototype.Lr=function(a){a=this.Za(a);return 0<a.length&&a[0].va?a[0]:
null};c.prototype.fp=function(a,b){var e=this;b.addEventListener("ended",function(m){e.I("videoended",{video:m.target})});b.addEventListener("pause",function(m){e.I("videopaused",{video:m.target})});b.addEventListener("play",function(m){e.I("videostarted",{video:m.target})});for(var h=0;h<this.V.length;h++)if(this.V[h].id==a)return this.V[h].j=b,this.V[h];h=new y.Qm(this);h.registerElement(a,b);return h};c.prototype.isPlaying=function(a){if("_main"===a)return!0;a=this.Za(a);return 0<a.length?a[0].va?
a[0].ng:!a[0].j.ended&&!a[0].j.paused:!1};c.prototype.ve=function(a,b){try{for(var e=this.Za(a),h=0;h<e.length;h++){var m=e[h];m.nb=b&&!isNaN(Number(b))?Number(b)-1:m.loop-1;-1==m.nb&&(m.nb=1E7);this.N(m.j);this.isPlaying(a)&&this.Uj(a);m.va?m.de():(m.j.play(),!m.Hd||this.Gc&&this.uh||m.Ef());this.$t(m.id)}}catch(n){this.N(n)}};c.prototype.$o=function(a,b){a=this.Za(a);for(var e=0;e<a.length;e++){var h=a[e];this.isPlaying(h.id)?this.Aj(h.id):this.ve(h.id,b)}};c.prototype.vt=function(a,b){a=this.Za(a);
for(var e=0;e<a.length;e++){var h=a[e];this.isPlaying(h.id)?this.Uj(h.id):this.ve(h.id,b)}};c.prototype.Aj=function(a){try{var b=void 0;if("_main"==a){this.Pj(a);for(b=0;b<this.S.length;b++)this.S[b].va?this.S[b].uk():this.S[b].j.pause();for(b=0;b<this.V.length;b++)this.V[b].j.pause()}else{var e=this.Za(a);for(b=0;b<e.length;b++){var h=e[b];this.Pj(h.id);h.va?h.uk():h.j.pause()}}}catch(m){this.N(m)}};c.prototype.yq=function(a,b){a=this.Za(a);for(var e=0;e<a.length;e++){var h=a[e];0==b||1==b?h.af&&
h.af(1==b):2==b&&h.me&&h.me();!h.La||-1==this.kb.indexOf(h)&&-1==this.V.indexOf(h)&&-1==this.Mb.indexOf(h)||(this.Rb=this.we=h)}};c.prototype.Uj=function(a){var b;try{if("_main"===a){this.Pj(a);for(b=0;b<this.S.length;b++)this.S[b].va?this.S[b].Kf():(this.S[b].j.pause(),this.S[b].j.currentTime=0);for(b=0;b<this.V.length;b++)this.V[b].j.pause(),this.V[b].j.currentTime=0}else{var e=this.Za(a);for(b=0;b<e.length;b++){var h=e[b];this.Pj(h.id);h.va?h.Kf():h.j&&h.j.pause&&(h.j.pause(),h.j.currentTime=0)}}}catch(m){this.N(m)}};
c.prototype.Pj=function(a){-1==this.wc.indexOf(a)&&this.wc.push(a);var b=this.Je.indexOf(a);-1!=b&&this.Je.splice(b,1);"_main"==a&&(this.Je=[])};c.prototype.$t=function(a){-1!=this.wc.indexOf("_main")&&-1==this.Je.indexOf(a)&&this.Je.push(a);a=this.wc.indexOf(a);-1!=a&&this.wc.splice(a,1)};c.prototype.mu=function(a){a=this.Za(a);return 0<a.length?(a=a[0],a.va?a.Lq():a.j?a.j.currentTime:0):0};c.prototype.ou=function(a,b){a=this.Za(a);0<a.length&&(a=a[0],a.va?(0>b&&(b=0),b>a.Ci.duration&&(b=a.Ci.duration-
.1),a.Mq(b)):a.j&&(0>b&&(b=0),b>a.j.duration&&(b=a.j.duration-.1),a.j.currentTime=b))};c.prototype.nu=function(a,b){a=this.Za(a);0<a.length&&(a=a[0],a.j&&(a.j.playbackRate=b))};c.prototype.setVolume=function(a,b){try{var e=void 0,h=Number(b);1<h&&(h=1);0>h&&(h=0);"_videopanorama"===a&&this.B.j&&(this.B.j.volume=h);if("_main"===a){this.ba=h;for(e=0;e<this.S.length;e++)this.S[e].j.volume=this.S[e].level*this.ba;for(e=0;e<this.V.length;e++)this.V[e].j.volume=this.V[e].level*this.ba;this.B.j&&(this.B.j.volume=
this.ba)}else{var m=this.Za(a);this.N(m);for(e=0;e<m.length;e++){var n=m[e];n.j&&null!=n.j.volume&&(n.j.volume=h*this.ba);n.level=h}}}catch(q){this.N(q)}};c.prototype.Uq=function(a,b){try{var e=void 0,h=void 0;"_videopanorama"===a&&this.B.j&&(this.B.j.volume+=Number(b));if("_main"===a){e=this.ba;e+=Number(b);1<e&&(e=1);0>e&&(e=0);this.ba=e;for(h=0;h<this.S.length;h++)this.S[h].j.volume=this.S[h].level*this.ba;for(h=0;h<this.V.length;h++)this.V[h].j.volume=this.V[h].level*this.ba;this.B.j&&(this.B.j.volume=
this.ba)}else{var m=this.Za(a);for(h=0;h<m.length;h++){var n=m[h];e=n.level;e+=Number(b);1<e&&(e=1);0>e&&(e=0);n.level=e;n.j&&null!=n.j.volume&&(n.j.volume=e*this.ba)}}}catch(q){this.N(q)}};c.prototype.Nj=function(a,b){switch(b){case 1:a.muted=!0;break;case 0:a.muted=!1;break;case -1:a.muted=!a.muted}};c.prototype.dm=function(a,b){if("_main"===a||"_all"===a){"_all"==a&&(b=(this.Ed=1==b||-1==b&&!this.Ed?!0:!1)?1:0);for(var e=0;e<this.S.length;e++)this.Nj(this.S[e].j,b),"_all"===a&&(this.S[e].j.muted?
(this.Aj(this.S[e].id),this.wc.splice(this.wc.indexOf(this.S[e].id),1)):-1==this.wc.indexOf(this.S[e].id)&&this.ve(this.S[e].id));for(e=0;e<this.V.length;e++)this.Nj(this.V[e].j,b);this.B.j&&this.Nj(this.B.j,b)}else for(a=this.Za(a),e=0;e<a.length;e++)this.Nj(a[e].j,b)};c.prototype.Ws=function(a){this.dm(a,1)};c.prototype.Gu=function(a){this.dm(a,0)};c.prototype.zu=function(a){this.dm(a,-1)};c.prototype.wr=function(){return this.dg};c.prototype.Mj=function(a,b,e){a.j.style.opacity=0==b?1:0;a.j.style[this.Tb]=
"opacity "+e+"ms";a.j.style.opacity=0==b?0:1};c.prototype.Qt=function(a,b,e){function h(){var v=m[q];if(!v.j)return"continue";0==b?(n.Mj(v,b,e),setTimeout(function(){0==v.j.style.opacity&&v.wf(!1)},e+10),v.Fc=!1):1==b?(n.Mj(v,b,e),v.wf(!0),v.Fc=!0):2==b&&("visible"==v.j.style.visibility?(n.Mj(v,0,e),setTimeout(function(){0==v.j.style.opacity&&v.wf(!1)},e+10),v.Fc=!1):(n.Mj(v,1,e),v.wf(!0),v.Fc=!0))}for(var m=this.Za(a),n=this,q=0;q<m.length;q++)h()};c.prototype.Lp=function(){try{for(var a=this,b=
!1,e=!1,h=0;h<this.S.length;h++){var m=this.S[h];if(-1!=m.loop&&!this.isPlaying(m.id)&&-1==this.wc.indexOf(m.id)&&(-1==this.wc.indexOf("_main")||-1!=this.Je.indexOf(m.id)))if(this.xa&&this.Ta.enabled&&4!=m.mode&&6!=m.mode&&!this.Ed)if(this.Ta.nn){if(m.va)m.de();else{var n=m.j.play();!m.Hd||this.Gc&&this.uh||m.Ef();if(void 0!==n)n.then(function(){})["catch"](function(){});m.j.currentTime=0}m.ua=0;e=!0}else b=!0;else if(!(4==m.mode||6==m.mode||"_background"==m.id&&this.isPlaying(m.id)||this.Ed))if(m.va)m.de();
else{n=m.j.play();if(void 0!==n)n.then(function(){})["catch"](function(){});m.j.currentTime&&(m.j.currentTime=0)}}b&&setTimeout(function(){a.Ta.tu()},1E3*this.Ta.Cb);e&&(this.Ta.qu=this.xa.currentTime,this.Ta.pu=setInterval(function(){a.Ta.hr()},10))}catch(q){this.N(q)}};c.prototype.zn=function(){for(var a=0;a<this.Ta.ri.length;a++)this.Ta.yn(this.Ta.ri[a])};c.prototype.jp=function(){for(var a;0<this.K.length;)a=this.K.pop(),a.j&&(this.Ha.removeChild(a.j.__div),delete a.j),a.j=null;this.J.Da=0;this.J.cb=
0;this.I("hotspotsremoved",{})};c.prototype.fm=function(a){this.Cf=a;this.$.style.zIndex=0!=a?a.toString():"auto";this.Oa&&this.Oa.rd&&(this.Oa.rd.zIndex=(a+4).toString());this.Ha.style.zIndex=(a+4).toString();this.mb.style.zIndex=(a+3).toString();this.Ea.style.zIndex=(a+5).toString();for(var b=0;b<this.bj();b++){var e=b<this.V.length?this.V[b]:this.kb[b-this.V.length];e.j&&(e.j.style.zIndex=(a+(e.La?8E4:0)).toString())}};c.prototype.Kj=function(a){var b=this.isFullscreen!==a;this.isFullscreen!==
a&&(this.isFullscreen=a,this.update(100));if(this.isFullscreen){if(this.dk)try{this.$.webkitRequestFullScreen?this.$.webkitRequestFullScreen():this.$.mozRequestFullScreen?this.$.mozRequestFullScreen():this.$.msRequestFullscreen?this.$.msRequestFullscreen():this.$.requestFullScreen?this.$.requestFullScreen():this.$.requestFullscreen&&this.$.requestFullscreen()}catch(e){this.N(e)}this.$.style.position="absolute";a=this.ph();this.$.style.left=window.pageXOffset-a.x+this.margin.left+"px";this.$.style.top=
window.pageYOffset-a.y+this.margin.top+"px";this.fm(10);document.body.style.overflow="hidden";b&&(this.ta&&this.ta.ggEnterFullscreen&&this.ta.ggEnterFullscreen(),this.I("fullscreenenter",{}),this.I("playerstatechanged",{}))}else{if(this.dk)try{document.webkitIsFullScreen?document.webkitCancelFullScreen():document.mozFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.fullScreen&&(document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen&&
document.exitFullscreen())}catch(e){this.N(e)}this.$.style.position="relative";this.$.style.left="0px";this.$.style.top="0px";this.fm(0);document.body.style.overflow="";b&&(this.ta&&this.ta.ggExitFullscreen&&this.ta.ggExitFullscreen(),this.I("fullscreenexit",{}),this.I("playerstatechanged",{}))}this.Zd()};c.prototype.$j=function(){this.Kj(!this.isFullscreen)};c.prototype.fr=function(){this.Kj(!0)};c.prototype.exitFullscreen=function(){this.Kj(!1)};c.prototype.Br=function(){return this.isFullscreen};
c.prototype.Rf=function(){this.Fa.Zq();this.mp();this.Fa.Rf();this.Fa.it();return!0};c.prototype.gs=function(){return"N/A"};c.prototype.fs=function(){if(this.Fa)return this.Fa.gg()?this.Fa.Fm:this.Fa.camera};c.prototype.hs=function(){if(this.Fa)return this.Fa.sb};c.prototype.du=function(a){this.Fa&&(this.Fa.Zf=a)};c.prototype.Sf=function(){this.Fa&&(this.Fa.Sf(),this.Fa.tf(),this.Fa.Dk());return!0};c.prototype.Sp=function(){this.Fa&&(this.Fa.gg()?this.Sf():this.Rf());return!0};c.prototype.gg=function(){return this.Fa&&
this.Fa.gg()?!0:!1};c.prototype.cf=function(){return this.Fa&&this.Fa.cf()?!0:!1};c.prototype.el=function(){return this.Fa?this.Fa.el():!1};c.prototype.ru=function(a,b,e){this.v.Jd=this.v.Bi;this.v.od=this.v.Ig;this.v.enabled=!0;this.v.Hf=this.v.enabled;this.v.active=!0;this.v.gd=0;var h=new Date;this.v.Bd=0;this.v.startTime=h.getTime();a&&0!=a&&(this.v.speed=a);b&&(this.v.timeout=b);e&&(this.v.Zj=e);this.I("autorotatechanged",{})};c.prototype.uu=function(){this.v.active=!1;this.v.enabled=!1;this.v.Hf=
this.v.enabled;this.Ke=this.v.tj=!1;this.F.active&&this.F.Ph&&(this.F.active=!1,this.F.Ph=!1,this.F.Jb=0);this.I("autorotatechanged",{})};c.prototype.yu=function(){this.v.enabled=!this.v.active;this.v.Hf=this.v.enabled;this.v.active=this.v.enabled;this.v.gd=0;if(this.v.enabled){var a=new Date;this.v.Bd=0;this.v.startTime=a.getTime();this.v.Jd=this.v.Bi;this.v.od=this.v.Ig}this.I("autorotatechanged",{})};c.prototype.ut=function(){var a=this.v.od;this.ma();this.v.od=a};c.prototype.Dt=function(){this.v.enabled&&
(this.v.active=!0,this.v.gd=0)};c.prototype.Jt=function(a){this.v.mg=a;this.v.Qo=!0};c.prototype.Ip=function(a){this.Ub.running&&this.sp();this.rc="";a&&""!=a&&(this.v.Jd=a);this.v.Hf=this.v.enabled;this.v.od=!0;this.v.enabled=!0;this.v.active=!0;this.v.gd=0;a=new Date;this.v.Bd=0;this.v.startTime=a.getTime();this.I("autorotatechanged",{})};c.prototype.Ct=function(a){a&&""!=a&&this.v.Jd!=a||0==this.v.Bd?this.Ip(a):(this.v.od=!0,this.v.enabled=!0,this.v.active=!0,this.I("autorotatechanged",{}))};c.prototype.sp=
function(){this.Ub.running=!1;this.Ub.finished=!0;this.v.active=this.D.Me;this.ya.splice(this.ya.indexOf(this.L),1);0<this.ya.length&&(this.L=this.ya[0]);this.rc="";this.Lj(!1);this.D.Me=!1;this.ig=(new Date).getTime()};c.prototype.gn=function(a){if(this.hc=document.getElementById(a))return this.hc.innerHTML="",!0;alert("container not found!");return!1};c.prototype.Lt=function(a){var b=this;b.hc.removeEventListener("resize",function(){b.Zd()});b.gn(a)&&(b.hc.appendChild(b.$),b.hc.addEventListener("resize",
function(){b.Zd()},!1))};c.prototype.mn=function(a){this.gn(a)&&(this.$=document.createElement("div"),this.$.onselectstart=function(){return!1},S&&this.$.setAttribute("id","viewport"),this.$.setAttribute("role","application"),a="top:\t0px;left: 0px;position:relative;-ms-touch-action: none;touch-action: none;text-align: left;"+(this.eb+"user-select: none;"),this.$.setAttribute("style",a),this.hc.appendChild(this.$),this.da=document.createElement("div"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+
(this.eb+"user-select: none;"),S&&this.da.setAttribute("id","viewer"),this.da.setAttribute("style",a),this.$.appendChild(this.da),this.Oa&&(this.Oa.rd=document.createElement("canvas"),S&&this.Oa.rd.setAttribute("id","lensflarecanvas"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+(this.eb+"user-select: none;"),a+=this.eb+"pointer-events: none;",this.Oa.rd.setAttribute("style",a),this.$.appendChild(this.Oa.rd)),this.Ha=document.createElement("div"),S&&this.Ha.setAttribute("id",
"hotspots"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;",this.sl&&(a+="background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);"),this.Gc&&!this.pa&&(a+=this.eb+"transform: translateZ(9999999px);"),a+=this.eb+"user-select: none;",this.Ha.setAttribute("style",a),this.$.appendChild(this.Ha),this.mb=document.createElement("canvas"),S&&this.mb.setAttribute("id","hotspotcanvas"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+
(this.eb+"user-select: none;"),a+=this.eb+"pointer-events: none;",this.mb.setAttribute("style",a),this.$.appendChild(this.mb),this.Ea=document.createElement("div"),S&&this.Ea.setAttribute("id","hotspottext"),this.Ea.setAttribute("style","top:\t0px;left: 0px;position:absolute;padding: 3px;visibility: hidden;"),this.Ea.classList.add("ggskin"),this.Ea.classList.add("ggdefaulthotspot"),this.Ea.innerHTML=" Hotspot text!",this.$.appendChild(this.Ea),this.divSkin=this.ta=this.Ha,this.fm(0))};c.prototype.tf=
function(){var a;this.ja.ga.x=0;this.ja.ga.y=0;this.ra.tf();var b=[];for(a=0;a<this.V.length;a++){var e=this.V[a];e.kd?b.push(e):e.ye()}for(a=0;a<this.kb.length;a++)this.kb[a].ye();for(a=0;a<this.Mb.length;a++)this.Mb[a].ye();this.J.Dh=-1;this.mb.style.visibility="hidden";this.yb=0;this.xf=[];this.Ta.ri=[];for(a=0;a<this.S.length;a++)e=this.S[a],0==e.mode||e.Po||this.xf.push(e);this.V=b;this.kb=[];this.Mb=[];this.B.j&&(this.$.removeChild(this.B.j),this.B.j=null,a=this.Za("_videopanorama"),0<a.length&&
(a[0].j=null));this.B.Rc=!1;this.B.hg=!1};c.prototype.ho=function(){var a=1,b=-1!=navigator.userAgent.indexOf("Mac");window.devicePixelRatio&&b&&(a=window.devicePixelRatio);return{w:screen.width*a,h:screen.height*a}};c.prototype.Xn=function(){var a=this.ho();return a.w>a.h?a.w:a.h};c.prototype.Ol=function(a,b){a=(new DOMParser).parseFromString(a,"text/xml");this.ep(a,b)};c.prototype.cp=function(a,b,e){try{var h=void 0;h=new XMLHttpRequest;h.open("GET",a,!1);h.send(null);if(h.responseXML){var m=a.lastIndexOf("/");
0<=m&&(this.be=a.substr(0,m+1));2<=arguments.length&&null!=b&&(this.be=b);this.Ol(h.responseText,e)}else alert("Error loading panorama XML")}catch(n){alert("Error:"+n)}};c.prototype.xt=function(a,b,e,h){var m=new XMLHttpRequest;var n=this;m.onload=function(q){if(4<=m.readyState)if(m.responseXML){var v=a.lastIndexOf("/");0<=v&&(n.be=a.substr(0,v+1));3<=arguments.length&&null!=e&&(n.be=e);n.Ol(m.responseText,h);b&&b()}else alert("Error loading panorama XML");else console.error("Wrong state loading XML:"+
m.statusText)};m.onerror=function(){console.error("Error loading XML:"+m.statusText)};m.open("GET",a,!0);m.send(null)};c.prototype.wk=function(a){var b="";"{"==a.charAt(0)&&(b=a.substr(1,a.length-2));(a=this.ee[b])&&(b=a);a={oldNodeId:this.wa,nodeId:b};this.I("beforechangenodeid",a);this.il?this.il=!1:this.Fl.push(this.wa);""!=this.wa&&-1==this.fk.indexOf(this.wa)&&(this.fk.push(this.wa),this.I("changevisitednodes",{}));this.Do=this.wa;this.wa=b;this.N("change active node: "+b);this.fa&&this.fa.changeActiveNode&&
this.fa.changeActiveNode("{"+b+"}");this.I("changenodeid",a);this.Xf=!0};c.prototype.Vi=function(){return this.wa};c.prototype.Or=function(a){return 0<this.Ua.length?(a||(a=this.wa),a=this.Ua.indexOf(a),a++,a>=this.Ua.length&&(a=0),this.Ua[a]):""};c.prototype.$r=function(a){return 0<this.Ua.length?(a||(a=this.wa),a=this.Ua.indexOf(a),a--,0>a&&(a=this.Ua.length-1),this.Ua[a]):""};c.prototype.Gr=function(){return this.Do};c.prototype.Ys=function(a){return-1!=this.fk.indexOf(a)};c.prototype.Wq=function(){this.fk=
[];this.I("changevisitednodes",{})};c.prototype.ep=function(a,b){var e=a.firstChild;this.Ie=[];this.Ua=[];this.ee=[];this.dg=!1;var h;if(h=e.getAttributeNode("appversion")){if(h=h.nodeValue.toString().match(/(\d+)\.(\d+)\.?(\d+)?/))this.jn=[parseInt(h[1],10),parseInt(h[2],10),parseInt(h[3]||"0",10)];this.N(this.jn)}for(a=e.firstChild;a;){if("map"==a.nodeName){var m={};(h=a.getAttributeNode("index"))&&(m.index=Number(h.nodeValue));(h=a.getAttributeNode("title"))&&(m.title=h.nodeValue.toString());h=
a.getAttributeNode("type");m.type=h.nodeValue.toString();"web"==m.type?(h=a.getAttributeNode("mapprovider"),m.mapprovider=h.nodeValue.toString(),(h=a.getAttributeNode("mapstyle"))&&(m.mapstyle=h.nodeValue.toString()),(h=a.getAttributeNode("googlecustomstylecode"))&&(m.googlecustomstylecode=h.nodeValue.toString()),(h=a.getAttributeNode("mapurltemplate"))&&(m.mapurltemplate=h.nodeValue.toString()),(h=a.getAttributeNode("mapmaxzoom"))&&(m.mapmaxzoom=Number(h.nodeValue)),(h=a.getAttributeNode("customlayernames"))&&
(m.customlayernames=h.nodeValue.toString().split("|")),(h=a.getAttributeNode("customlayerurltemplates"))&&(m.customlayerurltemplates=h.nodeValue.toString().split("|")),(h=a.getAttributeNode("customlayermaxzooms"))&&(m.customlayermaxzooms=h.nodeValue.toString().split("|")),(h=a.getAttributeNode("mapkey"))&&(m.mapkey=h.nodeValue.toString()),(h=a.getAttributeNode("styleurl"))&&(m.styleurl=h.nodeValue.toString()),(h=a.getAttributeNode("mapboxlayernames"))&&(m.mapboxlayernames=h.nodeValue.toString().split("|")),
(h=a.getAttributeNode("mapboxlayerstyleurls"))&&(m.mapboxlayerstyleurls=h.nodeValue.toString().split("|")),(h=a.getAttributeNode("googlelayernames"))&&(m.googlelayernames=h.nodeValue.toString().split("|")),(h=a.getAttributeNode("googlelayerstyles"))&&(m.googlelayerstyles=h.nodeValue.toString().split("|")),(h=a.getAttributeNode("maplimits"))&&(m.maplimits=h.nodeValue.toString().split("|"))):(h=a.getAttributeNode("width"),m.width=Number(h.nodeValue),h=a.getAttributeNode("height"),m.height=Number(h.nodeValue),
h=a.getAttributeNode("zoomlevels"),m.zoomlevels=Number(h.nodeValue),h=a.getAttributeNode("tileformat"),m.tileformat=h.nodeValue.toString(),h=a.getAttributeNode("bgcolor"),m.bgcolor=h.nodeValue.toString(),h=a.getAttributeNode("crispedges"),m.crispedges=1==h.nodeValue,h=a.getAttributeNode("transparent"),m.transparent=1==h.nodeValue,h=a.getAttributeNode("floorplannorth"),m.floorplannorth=Number(h.nodeValue));h=a.getAttributeNode("id");this.Uc[h.nodeValue.toString()]=m}a=a.nextSibling}if("tour"==e.nodeName){this.ff=
!0;a="";(h=e.getAttributeNode("start"))&&(a=h.nodeValue.toString());this.hasOwnProperty("startNode")&&this.startNode&&(a=String(this.startNode),this.startNode="");this.hasOwnProperty("startView")&&this.startView&&("object"===typeof this.startView&&null!==this.startView?b=this.startView:""!=this.startView&&(b=String(this.startView)),this.startView="");m=e.firstChild;var n="";for(e="";m;){if("panorama"==m.nodeName){if(h=m.getAttributeNode("id"))n=h.nodeValue.toString(),""==a&&(a=n),""==e&&(e=n),this.Ie[n]=
m,this.Ua.push(n);for(h=m.firstChild;h;){if("userdata"==h.nodeName){var q=this.hh(h);this.vi[n]=q;n==a&&(this.vi._first=q);q.customnodeid&&(this.ee[q.customnodeid]=n);this.Tc[n]=this.vn(h);this.kg[n]=this.wn(h);this.Bf[n]=this.xn(h)}if("hotspots"==h.nodeName)for(q=h.firstChild;q;)"hotspot"!=q.nodeName&&"polyhotspot"!=q.nodeName||this.Rk(n,h),q=q.nextSibling;if("sounds"==h.nodeName||"media"==h.nodeName)for(q=h.firstChild;q;){"sound"!=q.nodeName||this.El||(this.dg=!0);if("video"==q.nodeName){var v;
(v=q.getAttributeNode("level"))&&0<Number(v.nodeValue)&&(this.dg=!0)}q=q.nextSibling}h=h.nextSibling}}if("masternode"==m.nodeName)for(h=m.firstChild;h;)"userdata"==h.nodeName&&(q=this.hh(h),this.vi._master=q),"animationsequences"==h.nodeName&&this.gr(h),"translations"==h.nodeName&&((q=h.getAttributeNode("json"))&&this.nk(q.nodeValue.toString()),this.wl||this.cm(window.navigator.language)),h=h.nextSibling;"customproperty"==m.nodeName&&this.un(m);m=m.nextSibling}this.Ie.hasOwnProperty(a)||(m=this.ee[a])&&
(a=m);this.Ie.hasOwnProperty(a)||(this.Sc("Start node "+a+" not found!"),a=e);this.Nl(this.Ie[a],b);this.wk("{"+a+"}");this.wa=a}else this.ff=!1,this.Nl(e,b),this.wk(""),this.Ua.push("");this.$d&&(this.N("add pano vr config"),this.Fa.zi());this.I("configloaded",{});this.I("changenode",{});this.I("playerstatechanged",{})};c.prototype.Nl=function(a,b){var e=this;this.jp();this.Oa&&this.Oa.zt();this.Ae(this.gb);this.tf();for(var h=a.firstChild,m,n,q=0,v=this.O.M;h;){if("view"==h.nodeName){if(m=h.getAttributeNode("fovmode"))this.fov.mode=
Number(m.nodeValue);m=h.getAttributeNode("pannorth");this.pan.Rh=1*(m?m.nodeValue:0);for(var t=h.firstChild;t;){"start"==t.nodeName&&(m=t.getAttributeNode("pan"),this.pan.m=Number(m?m.nodeValue:0),this.pan.Ga=this.pan.m,m=t.getAttributeNode("tilt"),this.u.m=Number(m?m.nodeValue:0),this.u.Ga=this.u.m,m=t.getAttributeNode("roll"),this.X.m=Number(m?m.nodeValue:0),this.X.Ga=this.X.m,m=t.getAttributeNode("fov"),this.fov.m=Number(m?m.nodeValue:70),this.fov.Ga=this.fov.m,m=t.getAttributeNode("projection"),
this.O.Wo=Number(m?m.nodeValue:4),this.lb(this.oh()));"min"==t.nodeName&&(m=t.getAttributeNode("pan"),this.pan.min=1*(m?m.nodeValue:0),m=t.getAttributeNode("tilt"),this.u.min=1*(m?m.nodeValue:-90),m=t.getAttributeNode("fov"),this.fov.min=1*(m?m.nodeValue:5),1E-20>this.fov.min&&(this.fov.min=1E-20),m=t.getAttributeNode("fovpixel"),this.fov.Nh=1*(m?m.nodeValue:0));if("max"==t.nodeName){m=t.getAttributeNode("pan");this.pan.max=1*(m?m.nodeValue:0);m=t.getAttributeNode("tilt");this.u.max=1*(m?m.nodeValue:
90);m=t.getAttributeNode("fov");this.fov.max=1*(m?m.nodeValue:120);180<=this.fov.max&&(this.fov.max=179.9);if(m=t.getAttributeNode("fovstereographic"))this.fov.Dl=1*m.nodeValue;if(m=t.getAttributeNode("fovfisheye"))this.fov.Cl=1*m.nodeValue;if(m=t.getAttributeNode("scaletofit"))this.H.qp=1==m.nodeValue}if("flyin"==t.nodeName){if(m=t.getAttributeNode("projection"))this.jc.Jb=Number(m.nodeValue);if(m=t.getAttributeNode("pan"))this.jc.pan=parseFloat(m.nodeValue);if(m=t.getAttributeNode("tilt"))this.jc.u=
parseFloat(m.nodeValue);if(m=t.getAttributeNode("fov"))this.jc.fov=parseFloat(m.nodeValue)}t=t.nextSibling}}if("autorotate"==h.nodeName){if(m=h.getAttributeNode("speed"))this.v.speed=1*m.nodeValue;if(m=h.getAttributeNode("delay"))this.v.timeout=1*m.nodeValue;if(m=h.getAttributeNode("returntohorizon"))this.v.Zj=1*m.nodeValue;if(m=h.getAttributeNode("horizonfromdefview"))this.v.po=1==m.nodeValue;if(m=h.getAttributeNode("nodedelay"))this.v.wj=1*m.nodeValue;if(m=h.getAttributeNode("noderandom"))this.v.Ro=
1==m.nodeValue;(m=h.getAttributeNode("nodefilter"))&&!this.v.Qo&&(this.v.mg=m.nodeValue);this.Ld&&(this.v.enabled=!0,this.v.Hf=!0,this.v.active=!1);this.v.Bd=0;(m=h.getAttributeNode("startloaded"))&&this.Ld&&(this.v.vg=1==m.nodeValue,this.v.vg&&(this.v.active=!1));if(m=h.getAttributeNode("useanimation"))this.v.Ig=1==m.nodeValue,this.v.od=this.v.Ig;if(m=h.getAttributeNode("syncanimationwithvideo"))this.v.om=1==m.nodeValue}if("animation"==h.nodeName){if(m=h.getAttributeNode("syncanimationwithvideo"))this.v.om=
1==m.nodeValue;if(m=h.getAttributeNode("useinautorotation"))this.v.Ig=1==m.nodeValue;if(m=h.getAttributeNode("animsequence"))this.v.Bi=m.nodeValue,this.Ld&&(this.v.Jd=this.v.Bi);if(m=h.getAttributeNode("clipsrandom"))this.v.hn=1==m.nodeValue;this.ya=[];for(t=h.firstChild;t;){if("clip"==t.nodeName){this.L=new y.Lm;if(m=t.getAttributeNode("animtitle"))this.L.Le=m.nodeValue.toString();if(m=t.getAttributeNode("cliptitle"))this.L.Xa=m.nodeValue.toString();if(m=t.getAttributeNode("nodeid"))this.L.ev=m.nodeValue.toString();
if(m=t.getAttributeNode("length"))this.L.length=Number(m.nodeValue);if(m=t.getAttributeNode("animtype"))this.L.Fq=Number(m.nodeValue);if(m=t.getAttributeNode("nextcliptitle"))this.L.Oo=m.nodeValue.toString();if(m=t.getAttributeNode("nextclipnodeid"))this.L.No=m.nodeValue.toString();if(m=t.getAttributeNode("nextclipstartview"))this.L.Xs=m.nodeValue.toString();if(m=t.getAttributeNode("transitiontype"))this.L.Fu=Number(m.nodeValue);var x=t.firstChild;for(this.L.qa=[];x;){if("keyframe"==x.nodeName){var z=
new y.cd;if(m=x.getAttributeNode("time"))z.time=Number(m.nodeValue);if(m=x.getAttributeNode("value"))z.value=Number(m.nodeValue);if(m=x.getAttributeNode("valuestring"))z.Dm=m.nodeValue.toString();if(m=x.getAttributeNode("transitiontime"))z.Cb=Number(m.nodeValue);m=x.getAttributeNode("type");var C=0;m&&(z.type=Number(m.nodeValue),C=Number(m.nodeValue));if(m=x.getAttributeNode("property"))z.ab=Number(m.nodeValue);if(m=x.getAttributeNode("additionaltrackid"))z.pd=m.nodeValue.toString();if(m=x.getAttributeNode("additionaltracktype"))z.Sm=
Number(m.nodeValue);if(1==C||2==C){if(m=x.getAttributeNode("bezierintime"))z.Ne=Number(m.nodeValue);if(m=x.getAttributeNode("bezierinvalue"))z.Oe=Number(m.nodeValue);if(m=x.getAttributeNode("bezierouttime"))z.Pe=Number(m.nodeValue);if(m=x.getAttributeNode("bezieroutvalue"))z.Qe=Number(m.nodeValue)}this.L.qa.push(z)}x=x.nextSibling}this.ya.push(this.L);"__VideoPano"==this.L.Xa&&(this.Em=this.L)}t=t.nextSibling}}"input"==h.nodeName&&(n||(n=h));if(n)for(x=0;6>x;x++)m=n.getAttributeNode("prev"+x+"url"),
this.Zg[x]=m?String(m.nodeValue):"";"altinput"==h.nodeName&&(t=0,(m=h.getAttributeNode("screensize"))&&(t=1*m.nodeValue),0<t&&t<=this.Xn()&&t>q&&(q=t,n=h));if("control"==h.nodeName&&this.Ld){if(m=h.getAttributeNode("simulatemass"))this.ja.enabled=1==m.nodeValue;if(m=h.getAttributeNode("rubberband"))this.H.pp=1==m.nodeValue;if(m=h.getAttributeNode("zoomcentercursor"))this.H.Df=1==m.nodeValue;if(m=h.getAttributeNode("locked"))this.H.mc=1==m.nodeValue;m&&(this.H.Jh=1==m.nodeValue);if(m=h.getAttributeNode("lockedmouse"))this.H.mc=
1==m.nodeValue;if(m=h.getAttributeNode("lockedkeyboard"))this.H.Jh=1==m.nodeValue;if(m=h.getAttributeNode("lockedkeyboardzoom"))this.H.Js=1==m.nodeValue;if(m=h.getAttributeNode("lockedwheel"))this.H.re=1==m.nodeValue;if(m=h.getAttributeNode("invertwheel"))this.H.to=1==m.nodeValue;if(m=h.getAttributeNode("speedwheel"))this.H.km=1*m.nodeValue;if(m=h.getAttributeNode("invertcontrol"))this.H.Pd=1==m.nodeValue;if(m=h.getAttributeNode("sensitivity"))this.H.sensitivity=1*m.nodeValue,1>this.H.sensitivity&&
(this.H.sensitivity=1);if(m=h.getAttributeNode("dblclickfullscreen"))this.H.Mk=1==m.nodeValue;if(m=h.getAttributeNode("contextfullscreen"))this.H.Wg=1==m.nodeValue;if(m=h.getAttributeNode("contextvr"))this.H.Xg=1==m.nodeValue;if(m=h.getAttributeNode("contextprojections"))this.H.Ji=1==m.nodeValue;if(m=h.getAttributeNode("hideabout"))this.H.eg=1==m.nodeValue;for(t=h.firstChild;t;)"menulink"==t.nodeName&&(x={text:"",url:""},m=t.getAttributeNode("text"),x.text=m.nodeValue,m=t.getAttributeNode("url"),
x.url=m.nodeValue,this.Mh.push(x)),t=t.nextSibling}if("transition"==h.nodeName&&this.Ld){if(m=h.getAttributeNode("enabled"))this.D.enabled=1==m.nodeValue;if(m=h.getAttributeNode("blendtime"))this.D.Sg=1*m.nodeValue;if(m=h.getAttributeNode("blendcolor"))this.D.If=m.nodeValue.toString();if(m=h.getAttributeNode("type"))this.D.type=m.nodeValue.toString();if(m=h.getAttributeNode("delay"))this.D.delay=m.nodeValue.toString();if(m=h.getAttributeNode("softedge"))this.D.Wc=1*m.nodeValue;if(m=h.getAttributeNode("zoomin"))this.D.ca=
1*m.nodeValue;if(m=h.getAttributeNode("zoomout"))this.D.bd=1*m.nodeValue;if(m=h.getAttributeNode("zoomfov"))this.D.lk=1*m.nodeValue;if(m=h.getAttributeNode("zoomafterinfov"))this.D.jk=1*m.nodeValue;if(m=h.getAttributeNode("zoomafteroutfov"))this.D.kk=1*m.nodeValue;if(m=h.getAttributeNode("zoomspeed"))this.D.Ng=1*m.nodeValue;if(m=h.getAttributeNode("zoomoutpause"))this.D.Mg=1==m.nodeValue;"cut"==this.D.type&&(this.D.Sg=0)}if("soundstransition"==h.nodeName){if(m=h.getAttributeNode("enabled"))this.Ta.enabled=
1==m.nodeValue;if(m=h.getAttributeNode("transitiontime"))this.Ta.Cb=1*m.nodeValue;if(m=h.getAttributeNode("crossfade"))this.Ta.nn=1==m.nodeValue}if("flyintransition"==h.nodeName){if(m=h.getAttributeNode("enabled"))this.Ub.enabled=1==m.nodeValue&&this.pa;if(m=h.getAttributeNode("speed"))this.Ub.speed=1*m.nodeValue}"userdata"==h.nodeName&&(this.userdata=this.Jg=this.hh(h),this.Tc[a.id]||(this.Tc[a.id]=this.vn(h),this.kg[a.id]=this.wn(h),this.Bf[a.id]=this.xn(h)));"customproperty"==h.nodeName&&this.un(h);
"translations"==h.nodeName&&((m=h.getAttributeNode("json"))&&this.nk(m.nodeValue.toString()),this.wl||this.cm(window.navigator.language));if("hotspots"==h.nodeName){if(m=h.getAttributeNode("smoothmovement"))this.Gp=1==m.nodeValue;for(t=h.firstChild;t;){if("label"==t.nodeName&&this.Ld){x=this.J.Xj;if(m=t.getAttributeNode("enabled"))x.enabled=1==m.nodeValue;if(m=t.getAttributeNode("width"))x.width=1*m.nodeValue;if(m=t.getAttributeNode("height"))x.height=1*m.nodeValue;if(m=t.getAttributeNode("textcolor"))x.Yj=
1*m.nodeValue;if(m=t.getAttributeNode("textalpha"))x.Wj=1*m.nodeValue;if(m=t.getAttributeNode("background"))x.background=1==m.nodeValue;if(m=t.getAttributeNode("backgroundalpha"))x.Nb=1*m.nodeValue;if(m=t.getAttributeNode("backgroundcolor"))x.Ob=1*m.nodeValue;if(m=t.getAttributeNode("border"))x.Di=1*m.nodeValue;if(m=t.getAttributeNode("bordercolor"))x.Qb=1*m.nodeValue;if(m=t.getAttributeNode("borderalpha"))x.Pb=1*m.nodeValue;if(m=t.getAttributeNode("borderradius"))x.tk=1*m.nodeValue;if(m=t.getAttributeNode("wordwrap"))x.ik=
1==m.nodeValue}if("polystyle"==t.nodeName&&this.Ld){if(m=t.getAttributeNode("mode"))this.J.mode=1*m.nodeValue;if(m=t.getAttributeNode("bordercolor"))this.J.Qb=1*m.nodeValue;if(m=t.getAttributeNode("backgroundcolor"))this.J.Ob=1*m.nodeValue;if(m=t.getAttributeNode("borderalpha"))this.J.Pb=1*m.nodeValue;if(m=t.getAttributeNode("backgroundalpha"))this.J.Nb=1*m.nodeValue;if(m=t.getAttributeNode("handcursor"))this.J.cg=1==m.nodeValue}m=void 0;"hotspot"==t.nodeName&&(m=new y.yi(this),m.type="point",m.rb(t),
this.K.push(m),this.Rk(a.id,t));"polyhotspot"==t.nodeName&&(m=new y.yi(this),m.type="poly",m.rb(t),this.K.push(m),this.Rk(a.id,t));t=t.nextSibling}}if("sounds"==h.nodeName||"media"==h.nodeName)for(t=h.firstChild;t;){if("sound"==t.nodeName&&!this.El)for(this.dg=!0,m=new y.uq(this),m.rb(t),m.addElement(),x=0;x<this.xf.length;x++)m.id==this.xf[x].id&&(this.xf.splice(x,1),x--);"video"==t.nodeName&&(m=new y.Qm(this),m.rb(t),m.addElement(),0<m.level&&(this.dg=!0));"image"==t.nodeName&&(m=new y.sq(this),
m.rb(t),m.addElement());"webelement"==t.nodeName&&(m=new y.vq(this),m.rb(t),m.addElement());"lensflare"==t.nodeName&&this.Oa&&(m=new y.tq(this),m.rb(t),this.Oa.Ih.push(m));t=t.nextSibling}h=h.nextSibling}for(x=0;x<this.xf.length;x++){a=this.xf[x];if(this.xa&&this.Ta.enabled&&this.isPlaying(a.id))this.Ta.ri.push(a);else{try{a.va?a.Kf():a.j.pause()}catch(E){this.N(E)}a.ye()}this.S.splice(this.S.indexOf(a),1)}1!=this.D.ca&&2!=this.D.ca&&6!=this.D.ca&&7!=this.D.ca&&this.zn();this.$d||(this.ib.ai=!0);
b&&("object"===typeof b&&null!==b?(b.hasOwnProperty("pan")&&this.Ud(Number(b.pan)),b.hasOwnProperty("tilt")&&this.Vd(Number(b.tilt)),b.hasOwnProperty("projection")&&this.lb(Number(b.projection)),b.hasOwnProperty("fov")&&this.ub(Number(b.fov))):""!=b&&(b=b.toString().split("/"),4<b.length&&this.lb(Number(b[4])),0<b.length&&(m=String(b[0]),"N"==m.charAt(0)?this.Oj(Number(m.substr(1))):"S"==m.charAt(0)?this.Oj(-180+Number(m.substr(1))):this.Ud(Number(m))),1<b.length&&this.Vd(Number(b[1])),2<b.length&&
this.ub(Number(b[2]))),this.pan.open=this.pan.m);if(n){m=n.getAttributeNode("stereo");this.Ad=!1;m&&1==m.nodeValue&&(this.Ad=!0);m=n.getAttributeNode("fliplr");this.wg=!1;m&&1==m.nodeValue&&(this.wg=!0);for(x=0;x<(this.Ad?12:6);x++)(m=n.getAttributeNode("tile"+x+"url"))&&(this.Yg[x]=String(m.nodeValue));for(x=0;6>x;x++)(m=n.getAttributeNode("prev"+x+"url"))&&(this.Zg[x]=String(m.nodeValue));if(m=n.getAttributeNode("tilevrurl"))this.Ik=String(m.nodeValue);if(m=n.getAttributeNode("tilesize"))this.Ge=
1*m.nodeValue;m=n.getAttributeNode("canvassize");if(m=n.getAttributeNode("tilescale"))this.Ag=1*m.nodeValue;if(m=n.getAttributeNode("leveltileurl"))v.Al=m.nodeValue;if(m=n.getAttributeNode("leveltilesize"))v.W=Number(m.nodeValue);if(m=n.getAttributeNode("levelbias"))v.Ho=Number(m.nodeValue);if(m=n.getAttributeNode("levelbiashidpi"))v.Io=Number(m.nodeValue);m=n.getAttributeNode("overlap");this.Sa.X=0;this.Sa.pitch=0;m&&(v.$a=Number(m.nodeValue));if(m=n.getAttributeNode("levelingroll"))this.Sa.X=Number(m.nodeValue);
if(m=n.getAttributeNode("levelingpitch"))this.Sa.pitch=Number(m.nodeValue);this.yb=0;(m=n.getAttributeNode("flat"))&&1==m.nodeValue&&(this.yb=2);m=n.getAttributeNode("width");v.width=1*(m?m.nodeValue:1);m=n.getAttributeNode("height");v.height=1*(m?m.nodeValue:v.width);this.B.src=[];v.levels=[];for(t=n.firstChild;t;){if("preview"==t.nodeName){if(m=t.getAttributeNode("color"))v.Cj=m.nodeValue;if(m=t.getAttributeNode("strip"))v.bp=1==m.nodeValue}if("video"==t.nodeName){if(m=t.getAttributeNode("format"))"3x2"==
m.nodeValue&&(this.B.format=14),"equirectangular"==m.nodeValue&&(this.B.format=1);if(m=t.getAttributeNode("flipy"))this.B.flipY=Number(m.nodeValue);if(m=t.getAttributeNode("startonload"))this.B.Sj=1==m.nodeValue;if(m=t.getAttributeNode("startmutedmobile"))this.B.lm=1==m.nodeValue;if(m=t.getAttributeNode("bleed"))this.B.Re=Number(m.nodeValue);if(m=t.getAttributeNode("endaction"))this.B.ge=String(m.nodeValue);if(m=t.getAttributeNode("targetview"))this.B.Vj=String(m.nodeValue);if(m=t.getAttributeNode("width"))this.B.width=
Number(m.nodeValue);if(m=t.getAttributeNode("height"))this.B.height=Number(m.nodeValue);for(x=t.firstChild;x;)"source"==x.nodeName&&(m=x.getAttributeNode("url"))&&this.B.src.push(m.nodeValue.toString()),x=x.nextSibling}if("level"==t.nodeName){n=new y.Om;m=t.getAttributeNode("width");n.width=1*(m?m.nodeValue:1);m=t.getAttributeNode("height");n.height=1*(m?m.nodeValue:n.width);if(m=t.getAttributeNode("preload"))n.cache=1==m.nodeValue;if(m=t.getAttributeNode("preview"))n.sf=1==m.nodeValue;n.Y=Math.floor((n.width+
v.W-1)/v.W);n.sa=Math.floor((n.height+v.W-1)/v.W);v.levels.push(n)}t=t.nextSibling}v.zl=v.levels.length}this.bf=!0;this.Fg&&(this.pa=this.Eg=!1,this.Bc||(this.N("dummy rendering"),this.Bc=document.createElement("canvas"),this.Bc.width=100,this.Bc.height=100,this.Bc.id="dummycanvas",this.da.appendChild(this.Bc)),this.cc());this.pa&&this.R&&(this.ra.ro(this.Ag),this.ra.so());var F=this;0<v.levels.length&&v.bp&&0==this.yb&&(b=new Image,n=new y.Om,n.sf=!0,n.cache=!0,n.Y=n.sa=0,n.height=n.width=0,v.levels.push(n),
b.crossOrigin=this.crossOrigin,b.onload=this.ra.Vs(b),b.setAttribute("src",this.O.zg(6,v.zl-1,0,0)));if(0<this.B.src.length&&this.pa)if(this.ti){this.B.j=document.createElement("video");this.B.j.crossOrigin=this.crossOrigin;this.B.j.setAttribute("style","display:none; max-width:none;");this.B.j.setAttribute("playsinline","playsinline");this.B.j.preload=!0;this.B.j.volume=this.ba;this.$.appendChild(this.B.j);this.B.Rc=!1;this.B.sm=!1;this.B.j.oncanplay=function(){if(!F.B.Rc){F.B.hg=!0;var E,D,A=[],
G=new y.Ra,J=F.R,H=F.B.j.videoWidth/3;F.B.width=F.B.j.videoWidth;F.B.height=F.B.j.videoHeight;for(E=0;6>E;E++){var I=E%3*H+F.B.Re;var M=I+H-2*F.B.Re;var K=4;3>E&&(K+=H);var O=K+H-2*F.B.Re;for(D=0;4>D;D++){G.x=-1;G.y=-1;G.z=1;for(var R=0;R<D;R++)G.op();A.push((0<G.x?I:M)/(3*H),(0<G.y?O:K)/(2*H))}}J.bindBuffer(J.ARRAY_BUFFER,F.B.mi);J.bufferData(J.ARRAY_BUFFER,new Float32Array(A),J.STATIC_DRAW);F.D.Xc&&"videopano"==F.D.delay&&F.Tj(null)}};this.B.nb=function(){var E=F.Za("_videopanorama");return 0<E.length&&
E[0].nb?E[0].nb:0};this.B.Xl=function(E){var D=F.Za("_videopanorama");0<D.length&&(D[0].nb=E)};this.B.loop=function(){return 0<F.B.nb()?(F.B.Xl(F.B.nb()-1),F.B.j.play(),!0):!1};"exit"==this.B.ge?this.B.j.onended=function(){F.B.hg=!1;F.B.Rc=!1;F.$.removeChild(F.B.j);F.B.j=null;F.update()}:"stop"==this.B.ge?F.B.j.onended=function(){F.B.loop()||F.update()}:"{"==this.B.ge.charAt(0)?this.B.j.onended=function(){F.ld(F.B.ge,F.B.Vj)}:this.B.j.loop=!0;for(x=0;x<this.B.src.length;x++)v=document.createElement("source"),
v.setAttribute("src",this.vb(this.B.src[x])),this.B.j.appendChild(v);v=this.Za("_videopanorama");0<v.length?v[0].j=this.B.j:this.fp("_videopanorama",this.B.j);if(this.B.Sj&&(v=this.B.j.play(),void 0!==v))v.then(function(){})["catch"](function(){e.B.lm&&(e.B.j.muted=!0,e.B.j.play())})}else"{"==this.B.ge.charAt(0)&&F.ld(F.B.ge,F.B.Vj);this.Rm();this.D.Fd||this.Lp();this.update();this.Ld&&(this.Ld=!1,this.I("viewerinit",{}),this.ta&&this.ta.ggViewerInit&&this.ta.ggViewerInit(),this.Ub.enabled&&0==this.yb&&
this.pa&&(this.lb(9),this.pan.m=this.jc.pan,this.u.m=this.jc.u,this.fov.m=this.jc.fov,this.lb(this.jc.Jb),this.L=this.Wk(!1),this.pan.m=this.L.qa[0].value,this.u.m=this.L.qa[1].value,this.fov.m=this.L.qa[2].value,3==this.L.qa[3].ab&&this.lb(this.L.qa[3].value),this.rc=this.L.Xa,this.Lj(!0),this.v.active=!1,this.v.jh=!0));this.cc()};c.prototype.Gl=function(a,b){0<a.length&&(".xml"==a.substr(a.length-4)||".swf"==a.substr(a.length-4)||"{"==a.charAt(0)?this.ld(this.vb(a),b):window.open(this.vb(a),b))};
c.prototype.su=function(){this.bf=this.isLoaded=!1;this.checkLoaded=this.sd=[];this.Uh=0;this.ta&&this.ta.ggReLoaded&&this.ta.ggReLoaded();this.I("beforechangenode",{})};c.prototype.ss=function(a){var b="";0<this.Fl.length&&(b=this.Fl.pop());""!=b&&(this.il=!0);this.ld("{"+b+"}",a)};c.prototype.ld=function(a,b){if(""!=a&&"{}"!=a){this.su();this.he&&!this.Fg&&(this.Pc(0),this.cc());this.fa&&this.fa.hotspotProxyOut&&this.fa.hotspotProxyOut(this.T.id,this.T.url);this.I("hsproxyout",{id:this.T.id,url:this.T.url});
".swf"==a.substr(a.length-4)&&(a=a.substr(0,a.length-4)+".xml");var e="",h=null;"object"===typeof b&&null!==b?h=b:b&&(e=b.toString());b="/"+this.u.m+"/"+this.fov.m+"//"+this.Z();e=e.replace("$cur",this.pan.m+b);e=e.replace("$(cur)",this.pan.m+b);e=e.replace("$fwd","N"+this.je()+b);e=e.replace("$(fwd)","N"+this.je()+b);e=e.replace("$bwd","S"+this.je()+b);e=e.replace("$(bwd)","S"+this.je()+b);e=e.replace("$ap",String(this.pan.m));e=e.replace("$(ap)",String(this.pan.m));e=e.replace("$an",String(this.je()));
e=e.replace("$(an)",String(this.je()));e=e.replace("$at",String(this.u.m));e=e.replace("$(at)",String(this.u.m));e=e.replace("$af",String(this.fov.m));e=e.replace("$(af)",String(this.fov.m));e=e.replace("$ar",String(this.Z()));e=e.replace("$(ar)",String(this.Z()));""!=e&&(b=e.split("/"),3<b.length&&""!=b[3]&&(this.startNode=b[3]));h=null!==h?h:e;this.ma();if("{"==a.charAt(0)){b=a.substr(1,a.length-2);if(this.wa==b&&this.Tg){this.bf=this.isLoaded=!0;return}(e=this.ee[b])&&(b=e);e=this.D;var m=this.R;
if(this.Ie[b]){this.Tg=!0;if(this.D.enabled&&this.pa&&this.D.xc){e.Dp=!0;e.yf||e.Fd||e.Xc||this.Lj(!0);var n=void 0;"wipeleftright"==e.type?n=1:"wiperightleft"==e.type?n=2:"wipetopbottom"==e.type?n=3:"wipebottomtop"==e.type?n=4:"wiperandom"==e.type&&(n=Math.ceil(4*Math.random()));e.Lk=n;m.bindFramebuffer(m.FRAMEBUFFER,e.xc);m.viewport(0,0,e.xc.width,e.xc.height);m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT);e.pi=!0;this.si();e.pi=!1;m.bindFramebuffer(m.FRAMEBUFFER,null);m.viewport(0,0,this.wb.width,
this.wb.height);m=new Date;this.T!=this.gb&&6!=e.ca?7==e.ca?(e.Kg=this.T.$b/this.C.width,e.Lg=.5):(e.Kg=this.T.$b/this.C.width,e.Lg=1-this.T.Kb/this.C.height):(e.Kg=.5,e.Lg=.5);if(1==e.ca||2==e.ca||6==e.ca||7==e.ca)e.jq=m.getTime(),e.Fd=!0,e.Db=Math.sin(this.yd()/2*Math.PI/180)/Math.sin(e.lk/2*Math.PI/180),e.Db=Math.max(e.Db,1),e.iq=1/e.Ng*e.Db*.3}this.Nl(this.Ie[b],h);this.wk(a);if(e.enabled&&this.pa&&(this.Wp(null),0!=e.bd)){e.pm=this.$e();e.qm=this.$f();e.li=this.yd();e.Ee=this.Z();if(1==e.bd||
3==e.bd)this.ub(e.kk);else if(2==e.bd)this.ub(e.jk);else if(4==e.bd){for(h=a=0;h<this.ya.length;h++)this.ya[h].Xa&&0==this.ya[h].Xa.indexOf("__FlyIn")&&(a=this.ya[h]);0!=a?(this.lb(this.Yi(3,a).value),this.Ud(this.Yi(0,a).value),this.Vd(this.Yi(1,a).value),this.ub(this.Yi(2,a).value)):(this.lb(this.jc.Jb),this.Ud(this.jc.pan),this.Vd(this.jc.u),this.ub(this.jc.fov))}e.Mg||1==e.ca||2==e.ca||6==e.ca||7==e.ca||this.mm()}e.Dp=!1;this.$d&&(this.N("add pano opennext"),this.Fa.zi());this.D.Fd||this.D.yf||
this.D.Xc||(this.ea&&this.Hk(),this.Tg=!1)}else{this.Sc("invalid node id: "+b);return}}else this.cp(a,null,h);this.I("changenode",{});this.update(5)}};c.prototype.Zn=function(){return this.bf?this.ff?this.Ua.slice(0):[""]:[]};c.prototype.hh=function(a){var b;var e={title:"",description:"",author:"",datetime:"",copyright:"",source:"",information:"",comment:"",latitude:0,longitude:0,altitude:-1E4,heading:0,customnodeid:"",streetviewlink:"",tags:[]};if(a&&((b=a.getAttributeNode("title"))&&(e.title=b.nodeValue.toString()),
(b=a.getAttributeNode("description"))&&(e.description=b.nodeValue.toString()),(b=a.getAttributeNode("author"))&&(e.author=b.nodeValue.toString()),(b=a.getAttributeNode("datetime"))&&(e.datetime=b.nodeValue.toString()),(b=a.getAttributeNode("copyright"))&&(e.copyright=b.nodeValue.toString()),(b=a.getAttributeNode("source"))&&(e.source=b.nodeValue.toString()),(b=a.getAttributeNode("info"))&&(e.information=b.nodeValue.toString()),(b=a.getAttributeNode("comment"))&&(e.comment=b.nodeValue.toString()),
(b=a.getAttributeNode("latitude"))&&(e.latitude=Number(b.nodeValue)),(b=a.getAttributeNode("longitude"))&&(e.longitude=Number(b.nodeValue)),(b=a.getAttributeNode("nodeid"))&&(e.nodeid=b.nodeValue.toString()),(b=a.getAttributeNode("altitude"))&&(e.altitude=Number(b.nodeValue)),(b=a.getAttributeNode("heading"))&&(e.heading=Number(b.nodeValue)),(b=a.getAttributeNode("customnodeid"))&&(e.customnodeid=b.nodeValue.toString()),(b=a.getAttributeNode("streetviewlink"))&&(e.streetviewlink=b.nodeValue.toString()),
b=a.getAttributeNode("tags"))){a=b.nodeValue.toString().split("|");for(b=0;b<a.length;b++)""==a[b]&&(a.splice(b,1),b--);e.tags=a}return e};c.prototype.gr=function(a){for(var b="",e=a.firstChild;e;){if("sequence"==e.nodeName){if(a=e.getAttributeNode("title"))b=a.nodeValue;for(var h=[],m=e.firstChild;m;){if("sequenceelement"==m.nodeName){var n={};if(a=m.getAttributeNode("index"))n.index=a.nodeValue;if(a=m.getAttributeNode("nodeid"))n.nodeid=a.nodeValue;if(a=m.getAttributeNode("cliptitle"))n.cliptitle=
a.nodeValue;if(a=m.getAttributeNode("startview"))n.startview=a.nodeValue;h.push(n)}m=m.nextSibling}this.Wm[b]=h}e=e.nextSibling}};c.prototype.vn=function(a){for(var b={},e=a.firstChild;e;){if("mapcoords"==e.nodeName){var h={x:0,y:0};a=e.getAttributeNode("x");h.x=Number(a.nodeValue);a=e.getAttributeNode("y");h.y=Number(a.nodeValue);a=e.getAttributeNode("mapid");b[a.nodeValue.toString()]=h}e=e.nextSibling}return b};c.prototype.wn=function(a){for(var b={},e=a.firstChild;e;){if("mapcoords"==e.nodeName){var h=
{x:0,y:0};a=e.getAttributeNode("x_floorplan_percent");h.x=Number(a.nodeValue);a=e.getAttributeNode("y_floorplan_percent");h.y=Number(a.nodeValue);a=e.getAttributeNode("mapid");b[a.nodeValue.toString()]=h}e=e.nextSibling}return b};c.prototype.xn=function(a){for(var b={},e=a.firstChild;e;){if("custompropertyvalue"==e.nodeName){a=e.getAttributeNode("value");var h=a.nodeValue.toString();a=e.getAttributeNode("variablename");b[a.nodeValue.toString()]=h}e=e.nextSibling}return b};c.prototype.Rk=function(a,
b){var e,h="";(e=b.getAttributeNode("id"))&&(h=e.nodeValue.toString());if(!this.jb.hasOwnProperty(a)||!this.jb[a].hasOwnProperty(h)){var m={};for(b=b.firstChild;b;){if("custompropertyvalue"==b.nodeName){e=b.getAttributeNode("variablename");var n=e.nodeValue;e=b.getAttributeNode("value");m[n]=e.nodeValue}b=b.nextSibling}this.jb[a]||(this.jb[a]={});this.jb[a][h]=m}};c.prototype.un=function(a){var b=a.getAttributeNode("variablename"),e=b.nodeValue.toString();b=a.getAttributeNode("variabletype");var h=
Number(b.nodeValue);b=a.getAttributeNode("propertytype");var m=Number(b.nodeValue);b=a.getAttributeNode("defaultvalue");this.fb[e]={xi:h,Zh:m,Ok:b.nodeValue.toString()}};c.prototype.nh=function(a){return a?this.vi[a]?this.vi[a]:this.hh():this.Jg};c.prototype.$n=function(a,b){""==a&&(a="node1");return this.Bf.hasOwnProperty(a)&&this.Bf[a].hasOwnProperty(b)?this.Bf[a][b]:null};c.prototype.zp=function(a,b,e){this.Bf[a][b]!=e&&(this.Bf[a][b]=e,this.I("varchanged_"+b,{}))};c.prototype.bl=function(a){a=
this.nh(a);var b=[];""!=a.latitude&&0!=a.latitude&&0!=a.longitude&&(b.push(a.latitude),b.push(a.longitude));return b};c.prototype.ao=function(a){for(var b=[],e=0;e<this.Ua.length;e++){var h=this.Ua[e],m=this.nh(h);m&&m.tags.includes(a)&&b.push(h)}return b};c.prototype.Sr=function(a){return this.nh(a).title};c.prototype.Pr=function(a,b){var e=-1;a=this.bl(a);b=this.bl(b);if(2==a.length&&2==b.length){e=Math.PI/180*(b[0]-a[0]);var h=Math.PI/180*(b[1]-a[1]);a=Math.sin(e/2)*Math.sin(e/2)+Math.sin(h/2)*
Math.sin(h/2)*Math.cos(Math.PI/180*a[0])*Math.cos(Math.PI/180*b[0]);e=12742E3*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}return e};c.prototype.Ze=function(a,b,e){var h;for(h=0;h<this.L.qa.length;h++){var m=this.L.qa[h];if(m.time==a&&m.ab==b&&(!e||m.pd==e))return m}return!1};c.prototype.Yi=function(a,b){var e;for(e=0;e<b.qa.length;e++)if(0==b.qa[e].time&&b.qa[e].ab==a)return b.qa[e];return!1};c.prototype.co=function(a,b,e){for(a=Math.floor(a);!this.Ze(a,b,e)&&0<a;)a--;return a};c.prototype.Yn=function(a){var b,
e=1E5,h=a,m=!1;for(b=0;b<this.L.qa.length;b++){var n=this.L.qa[b];n.ab==a.ab&&n.pd==a.pd&&n.time>a.time&&n.time<e&&(h=this.L.qa[b],e=h.time,m=!0)}return m?h:!1};c.prototype.lr=function(a){for(var b=[],e=0;e<this.L.qa.length;e++){var h=this.L.qa[e];if(h.time<=a&&4==h.ab){for(var m=!1,n=0;n<b.length;n++)if(b[n].pd==this.L.qa[e].pd){b[n].time<h.time?b.splice(n,1):m=!0;break}m||b.push(h)}}return b};c.prototype.Mn=function(a,b,e){var h=new y.Jc(a.time,a.value),m=new y.Jc(b.time,b.value),n=(e-a.time)/(b.time-
a.time);if(0!=a.type||0!=b.type&&3!=b.type)if(3==a.type)e=a.value;else{n=new y.Jc;var q=new y.Jc,v=b.time-a.time;0==a.type?q.init(a.time+.3*v,a.value):q.init(a.Pe,a.Qe);0==b.type||3==b.type?n.init(b.time-.3*v,b.value):n.init(b.Ne,b.Oe);a=new y.Jc;a.sk(h,m,q,n,e);e=a.y}else a=new y.Jc,a.Od(h,m,n),e=a.y;return e};c.prototype.Wk=function(a,b,e,h){for(var m=0;m<this.ya.length;m++)if(this.ya[m].Xa&&0==this.ya[m].Xa.indexOf("__FlyIn"))return this.ya[m];m=new y.Km;m.Xa="__FlyIn";m.De=this.pan.m;m.ii=this.u.m;
m.Wd=this.fov.m;m.hi=this.Z();m.Ee=this.oh();a?(m.Qf=!1,m.Ve=!1,m.speed=this.D.Ng,m.Xd=b,m.Fe=e,m.ki=h):(m.Qf=!0,m.Ve=!0,m.speed=this.Ub.speed,m.Xd=this.pan.Ga,m.Fe=this.u.Ga,m.ki=this.fov.Ga);return this.Jn(m)};c.prototype.Jn=function(a){var b=new y.Lm;b.Xa=a.Xa;b.Le="";b.qa=[];for(var e=a.hi!=a.Ee&&-1!=a.Ee;-180>a.Xd;)a.Xd+=360;for(;180<a.Xd;)a.Xd-=360;var h=a.Xd-a.De;if(360==this.pan.max-this.pan.min){for(;-180>h;)h+=360;for(;180<h;)h-=360}var m=a.Fe-a.ii,n=a.ki-a.Wd,q=Math.round(Math.sqrt(h*h+
m*m+n*n)/a.speed*.33);e&&(q=Math.max(10,q));b.length=q;if(a.We){var v=Math.ceil(.7*q);v=Math.min(15,v);v=Math.max(5,v);b.length=q+v;var t=.33*v}var x=a.ki,z=q,C=0,F=q-1;if(e){var E=a.Wd;var D=4==a.Ee?120:this.mh(a.Ee);n=x-a.Wd;var A=new y.Jc(0,a.Wd),G=new y.Jc(q,x),J=new y.Jc,H=new y.Jc;H.init(q/3,a.Wd+n/3);J.init(2*q/3,x-n/3);if(E>D)for(;C<=q&&E>D;)E=new y.Jc,E.sk(A,G,H,J,C),E=E.y,C++;else C=1;C>=.8*q&&(z=C=Math.round(.8*q));0==C&&(C=1);D=4==a.hi?120:this.mh(a.hi);E=a.ki;if(E>D)for(;F>C&&E>D;)E=
new y.Jc,E.sk(A,G,H,J,F),E=E.y,F--}A=new y.cd;A.time=0;A.ab=0;A.value=a.De;A.type=1;A.Pe=q/3;A.Qe=a.Qf?a.De:a.De+h/3;b.qa.push(A);A=new y.cd;A.time=0;A.ab=1;A.value=a.ii;A.type=1;A.Pe=q/3;A.Qe=a.Qf?a.ii:a.ii+m/3;b.qa.push(A);A=new y.cd;A.time=0;A.ab=2;A.value=a.Wd;A.type=1;A.Pe=q/3;A.Qe=a.Qf?a.Wd:a.Wd+n/3;b.qa.push(A);A=new y.cd;A.time=0;A.ab=3;A.value=a.hi;A.type=0;A.Cb=0;b.qa.push(A);e&&(A=new y.cd,A.time=C,A.ab=3,A.value=a.Ee,A.type=0,A.Cb=F-C,b.qa.push(A));A=new y.cd;A.time=q;A.ab=0;A.value=a.De+
h;A.type=1;A.Ne=2*q/3;A.Oe=a.Ve&&!a.We?A.value:A.value-h/3;a.We&&(A.Pe=q+t,A.Qe=A.value+t/q*h);b.qa.push(A);A=new y.cd;A.time=q;A.ab=1;A.value=a.Fe;A.type=1;A.Ne=2*q/3;A.Oe=a.Ve&&!a.We?a.Fe:a.Fe-m/3;a.We&&(A.Pe=q+t,A.Qe=A.value+t/q*m);b.qa.push(A);A=new y.cd;A.time=z;A.ab=2;A.value=x;A.type=1;A.Ne=2*z/3;A.Oe=a.Ve?x:x-n/3;b.qa.push(A);a.We&&(A=new y.cd,A.time=q+v,A.ab=0,A.value=a.De+h,A.type=1,A.Ne=q+v-t,A.Oe=a.De+h,b.qa.push(A),A=new y.cd,A.time=q+v,A.ab=1,A.value=a.Fe,A.type=1,A.Ne=q+v-t,A.Oe=a.Fe,
b.qa.push(A));this.ya.push(b);return b};c.prototype.Su=function(){this.B.j&&this.B.j.play()};c.prototype.Tu=function(){this.B.j&&(this.B.j.pause(),this.B.j.currentTime=0)};c.prototype.Ru=function(){this.B.j&&this.B.j.pause()};c.prototype.gu=function(a){this.B.j&&(0>a&&(a=0),a>this.B.j.duration&&(a=this.B.j.duration-.1),this.B.j.currentTime=a,this.update())};c.prototype.ks=function(){return this.B.j?this.B.j.currentTime:0};c.prototype.js=function(){if(this.B.j)return this.B.j};c.prototype.fu=function(a){if(this.B.j){var b=
!this.B.j.paused&&!this.B.j.ended,e=this.B.j.currentTime;this.B.j.pause();this.B.j.src=isNaN(parseInt(a,10))?String(a):this.B.src[parseInt(a,10)];b&&(this.B.j.onloadedmetadata=function(){this.currentTime=e;this.play();this.onloadedmetadata=null});this.B.j.currentTime=e}};c.prototype.dr=function(){this.El=!0};c.prototype.Xr=function(){var a={};a.currentNode=this.Vi();a.position={pan:this.pan.m,tilt:this.u.m,fov:this.fov.m,projection:this.Z()};for(var b=a.variables={},e=0,h=Object.keys(this.ac);e<h.length;e++){var m=
h[e];this.ac[m].qo||"undefined"!==this.fl(m)&&((b[m]={}).value=this.fl(m))}b=a.hsprops={};e=0;for(h=Object.keys(this.jb);e<h.length;e++){m=h[e];for(var n=b[m]={},q=0,v=Object.keys(this.jb[m]);q<v.length;q++)for(var t=v[q],x=n[t]={},z=0,C=Object.keys(this.jb[m][t]);z<C.length;z++){var F=C[z];x[F]=this.Zk(m,t,F)}}b=a.polyhotspots=[];for(e=0;e<this.K.length;e++)"poly"==this.K[e].type&&(h=this.K[e],m={},m.id=h.id,m.bordercolor=h.Qb,m.borderalpha=h.Pb,m.backgroundcolor=h.Ob,m.backgroundalpha=h.Nb,b.push(m));
return a};c.prototype.Rt=function(a){if(a.hasOwnProperty("position")){var b=a.position;this.pan.m=b.pan;this.u.m=b.tilt;this.fov.m=b.fov;this.lb(b.projection)}b=0;for(var e=Object.keys(a.variables);b<e.length;b++){var h=e[b];this.Be(h,a.variables[h].value)}b=0;for(e=Object.keys(a.hsprops);b<e.length;b++){h=e[b];for(var m=a.hsprops[h],n=0,q=Object.keys(m);n<q.length;n++)for(var v=q[n],t=m[v],x=0,z=Object.keys(t);x<z.length;x++){var C=z[x];this.bm(h,v,C,t[C])}}for(b=0;b<a.polyhotspots.length;b++)for(e=
a.polyhotspots[b],h=0;h<this.K.length;h++)"poly"==this.K[h].type&&this.K[h].id==e.id&&(this.K[h].Qb=e.bordercolor,this.K[h].Pb=e.borderalpha,this.K[h].Nb=e.backgroundalpha,this.K[h].Ob=e.backgroundcolor);return this.ob=!0};return c}();y.Pm=f})(ggP2VR||(ggP2VR={}));window.ggHasHtml5Css3D=ma;window.ggHasWebGL=na;window.pano2vrPlayer=ggP2VR.Pm;var Z=ggP2VR.Pm.prototype;Z._=Z.Kc;Z.setContainer=Z.Lt;Z.setLanguage=Z.cm;Z.getLanguage=Z.Er;Z.addTranslations=Z.nk;Z.getVersion=Z.jo;Z.readConfigString=Z.Ol;
Z.readConfigUrl=Z.cp;Z.readConfigUrlAsync=Z.xt;Z.readConfigXml=Z.ep;Z.openUrl=Z.Gl;Z.openNext=Z.ld;Z.goBack=Z.ss;Z.setMargins=Z.Pt;Z.addListener=Z.addListener;Z.on=Z.addListener;Z.removeEventListener=Z.removeEventListener;Z.off=Z.removeEventListener;Z.detectBrowser=Z.tn;Z.initWebGL=Z.Pc;Z.getPercentLoaded=Z.Wr;Z.setBasePath=Z.Kt;Z.getBasePath=Z.On;Z.setViewerSize=Z.Cp;Z.getViewerSize=Z.ns;Z.updateViewerSizeNow=Z.cc;Z.setSkinObject=Z.Zt;Z.changeViewMode=Z.Sq;Z.getViewMode=Z.ls;
Z.changePolygonMode=Z.en;Z.setPolygonMode=Z.en;Z.getPolygonMode=Z.Zr;Z.showOnePolyHotspot=Z.Ep;Z.hideOnePolyHotspot=Z.no;Z.changePolyHotspotColor=Z.Rq;Z.toggleOnePolyHotspot=Z.Au;Z.changeViewState=Z.Tq;Z.getViewState=Z.ms;Z.setRenderFlags=Z.St;Z.getRenderFlags=Z.bs;Z.setMaxTileCount=Z.yp;Z.updatePanorama=Z.si;Z.isTouching=Z.zo;Z.getIsMobile=Z.al;Z.setIsMobile=Z.Ot;Z.getHasTouch=Z.Sn;Z.getIsTour=Z.Dr;Z.getNodesCount=Z.Tr;Z.getIsAutorotating=Z.Ar;Z.getIsLoading=Z.Cr;Z.getIsLoaded=Z.Xi;
Z.getIsTileLoading=Z.Un;Z.getLastActivity=Z.Fr;Z.getPan=Z.$e;Z.getPanNorth=Z.je;Z.getPanDest=Z.Vr;Z.getPanN=Z.cl;Z.setPan=Z.Ud;Z.setPanNorth=Z.Oj;Z.changePan=Z.Gi;Z.changePanLog=Z.dn;Z.getTilt=Z.$f;Z.getTiltDest=Z.ds;Z.setTilt=Z.Vd;Z.changeTilt=Z.Hi;Z.changeTiltLog=Z.fn;Z.getFov=Z.yd;Z.getFovDest=Z.tr;Z.setFov=Z.ub;Z.setFovMode=Z.$l;Z.changeFov=Z.xk;Z.changeFovLog=Z.Fi;Z.getVFov=Z.Gb;Z.setVFov=Z.ei;Z.getHFov=Z.Yk;Z.setHFov=Z.am;Z.getDFov=Z.Xk;Z.setDFov=Z.Yl;Z.getRoll=Z.aj;Z.setRoll=Z.sg;
Z.setPanTilt=Z.em;Z.setPanTiltFov=Z.rg;Z.setDefaultView=Z.rp;Z.setLocked=Z.setLocked;Z.setLockedMouse=Z.wp;Z.setLockedKeyboard=Z.vp;Z.getLockedKeyboard=Z.Hr;Z.setLockedWheel=Z.xp;Z.moveTo=Z.moveTo;Z.moveToEx=Z.uj;Z.moveToDefaultView=Z.Rs;Z.moveToDefaultViewEx=Z.Ss;Z.addHotspotElements=Z.Rm;Z.playSound=Z.ve;Z.playPauseSound=Z.$o;Z.playStopSound=Z.vt;Z.pauseSound=Z.Aj;Z.activateSound=Z.yq;Z.soundGetTime=Z.mu;Z.soundSetTime=Z.ou;Z.soundSetPlaybackRate=Z.nu;Z.setMediaVisibility=Z.Qt;Z.isPlaying=Z.isPlaying;
Z.stopSound=Z.Uj;Z.setVolume=Z.setVolume;Z.changeVolume=Z.Uq;Z.mute=Z.Ws;Z.unmute=Z.Gu;Z.toggleMuted=Z.zu;Z.getHasSounds=Z.wr;Z.removeHotspots=Z.jp;Z.getHotspotsVisible=Z.Tn;Z.getHotspotPropValue=Z.Zk;Z.setHotspotPropValue=Z.bm;Z.getCustomPropertyDefaultValue=Z.sr;Z.getCurrentPerspective=Z.Ye;Z.addHotspot=Z.Aq;Z.updateHotspot=Z.Iu;Z.removeHotspot=Z.yt;Z.setActiveHotspot=Z.Ae;Z.getPointHotspotIds=Z.Yr;Z.getHotspot=Z.yr;Z.setFullscreen=Z.Kj;Z.toggleFullscreen=Z.$j;Z.enterFullscreen=Z.fr;
Z.exitFullscreen=Z.exitFullscreen;Z.getIsFullscreen=Z.Br;Z.startAutorotate=Z.ru;Z.stopAutorotate=Z.uu;Z.toggleAutorotate=Z.yu;Z.pauseAutorotate=Z.ut;Z.resumeAutorotate=Z.Dt;Z.setAutorotateNodeFilter=Z.Jt;Z.startAnimation=Z.Ip;Z.resumeAnimation=Z.Ct;Z.createLayers=Z.mn;Z.removePanorama=Z.tf;Z.getScreenResolution=Z.ho;Z.getMaxScreenResolution=Z.Xn;Z.getNodeIds=Z.Zn;Z.getNodeUserdata=Z.nh;Z.getNodeUserdataPropValue=Z.$n;Z.setNodeUserdataPropValue=Z.zp;Z.getNodeLatLng=Z.bl;Z.getNodeTitle=Z.Sr;
Z.getNodeDistance=Z.Pr;Z.getCurrentNode=Z.Vi;Z.getNextNode=Z.Or;Z.getPrevNode=Z.$r;Z.getLastVisitedNode=Z.Gr;Z.getNodesWithTag=Z.ao;Z.getCurrentPointHotspots=Z.qr;Z.getPositionAngles=Z.Zi;Z.getPositionRawAngles=Z.bo;Z.nodeVisited=Z.Ys;Z.clearVisitedNodes=Z.Wq;Z.setElementIdPrefix=Z.Mt;Z.videoPanoPlay=Z.Su;Z.videoPanoStop=Z.Tu;Z.videoPanoPause=Z.Ru;Z.getVideoPanoTime=Z.ks;Z.setVideoPanoTime=Z.gu;Z.getVideoPanoObject=Z.js;Z.setVideoPanoSource=Z.fu;Z.getMediaObject=Z.Mr;
Z.getMediaBufferSourceObject=Z.Lr;Z.registerVideoElement=Z.fp;Z.disableSoundLoading=Z.dr;Z.setCrossOrigin=Z.setCrossOrigin;Z.setProjection=Z.lb;Z.getProjection=Z.Z;Z.changeProjection=Z.zk;Z.changeProjectionEx=Z.zk;Z.changeLensflares=Z.Qq;Z.setTransition=Z.bu;Z.getMapType=Z.Kr;Z.getMapDetails=Z.Jr;Z.getNodeMapCoords=Z.Qr;Z.getNodeMapCoordsInPercent=Z.Rr;Z.getMapContainingNode=Z.Ir;Z.getMapsContainingNode=Z.Wn;Z.getMapIDs=Z.Vn;Z.getFirstMap=Z.Rn;Z.getFirstFloorplan=Z.Wi;Z.hasMap=Z.ys;
Z.hasFloorplan=Z.xs;Z.addVariable=Z.Dq;Z.setVariableOptions=Z.Bp;Z.setVariableValue=Z.Be;Z.getVariableValue=Z.fl;Z.setSuperCookie=Z.au;Z.getGyroAvailable=Z.ur;Z.setUseGyro=Z.cu;Z.getUseGyro=Z.es;Z.getOS=Z.Ur;Z.getBrowser=Z.nr;Z.getBrowserTheme=Z.pr;Z.triggerEvent=Z.I;Z.requestRedraw=Z.At;Z.getWebGlContext=Z.os;Z.getHasTouch=Z.Sn;Z.updateViewerSizeNow=Z.cc;Z.getApiVersion=Z.mr;Z.setApiVersion=Z.It;Z.getInertia=Z.zr;Z.setInertia=Z.Nt;Z.getZoomCenterCursor=Z.ps;Z.setZoomCenterCursor=Z.hu;
Z.getPlayerState=Z.Xr;Z.setPlayerState=Z.Rt;Z.enterVR=Z.Rf;Z.exitVR=Z.Sf;Z.toggleVR=Z.Sp;Z.isInVR=Z.gg;Z.hasVR=Z.cf;Z.getVRDisplayName=Z.gs;Z.getVRCamera=Z.fs;Z.getVRRenderer=Z.hs;Z.setVRFrameBufferScaleFactor=Z.du;Z.getSkinGroup=Z.el;
